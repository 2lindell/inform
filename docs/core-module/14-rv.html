<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>RValues</title>
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">
		<link href="../inweb.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body>
		<nav role="navigation">
		<h1><a href="../index.html">
<img src="../docs-src/Figures/Inform.png" height=72">
</a></h1>
<ul><li><a href="../compiler.html">compiler tools</a></li>
<li><a href="../other.html">other tools</a></li>
<li><a href="../extensions.html">extensions and kits</a></li>
<li><a href="../units.html">unit test tools</a></li>
</ul><h2>Compiler Webs</h2><ul>
<li><a href="../inbuild/index.html">inbuild</a></li>
<li><a href="../inform7/index.html">inform7</a></li>
<li><a href="../inter/index.html">inter</a></li>
</ul><h2>Inbuild Modules</h2><ul>
<li><a href="../supervisor-module/index.html">supervisor</a></li>
</ul><h2>Inform7 Modules</h2><ul>
<li><a href="index.html"><span class="selectedlink">core</span></a></li>
<li><a href="../inflections-module/index.html">inflections</a></li>
<li><a href="../linguistics-module/index.html">linguistics</a></li>
<li><a href="../kinds-module/index.html">kinds</a></li>
<li><a href="../if-module/index.html">if</a></li>
<li><a href="../multimedia-module/index.html">multimedia</a></li>
<li><a href="../problems-module/index.html">problems</a></li>
<li><a href="../index-module/index.html">index</a></li>
</ul><h2>Inter Modules</h2><ul>
<li><a href="../bytecode-module/index.html">bytecode</a></li>
<li><a href="../building-module/index.html">building</a></li>
<li><a href="../codegen-module/index.html">codegen</a></li>
</ul><h2>Shared Modules</h2><ul>
<li><a href="../arch-module/index.html">arch</a></li>
<li><a href="../syntax-module/index.html">syntax</a></li>
<li><a href="../words-module/index.html">words</a></li>
<li><a href="../html-module/index.html">html</a></li>
<li><a href="../../../inweb/docs/foundation-module/index.html">foundation</a></li>

</ul>
		</nav>
		<main role="main">
		
<!--Weave of 'RValues' generated by 7-->
<ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="../compiler.html">Inform7 Modules</a></li><li><a href="index.html">core</a></li><li><a href="index.html#14">Chapter 14: Specifications</a></li><li><b>RValues</b></li></ul><p class="purpose">Utility functions for specifications representing rvalues.</p>

<ul class="toc"><li><a href="#SP1">&#167;1. Constants</a></li><li><a href="#SP7">&#167;7. Literals as rvalues</a></li><li><a href="#SP17">&#167;17. Pairs</a></li><li><a href="#SP18">&#167;18. Constant descriptions</a></li><li><a href="#SP19">&#167;19. Testing</a></li><li><a href="#SP21">&#167;21. Pretty-printing</a></li><li><a href="#SP23">&#167;23. Compilation</a></li></ul><hr class="tocbar">

<p class="inwebparagraph"><a id="SP1"></a><b>&#167;1. Constants. </b>Constant nodes can store references to many of the structures in this compiler:
for example, each <code class="display"><span class="extract">table *</span></code> pointer in Inform corresponds to a constant node
representing the name of that table.
</p>

<p class="inwebparagraph">Dealing with these is very repetitive, and we use macros to define the
relevant routines. Firstly, creating a CONSTANT node from one of these
pointers:
</p>


<pre class="definitions">
    <span class="definitionkeyword">define</span> <span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="identifier">structure</span><span class="plain">, </span><span class="identifier">K</span><span class="plain">)</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_constant_</span><span class="plain">##</span><span class="identifier">structure</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">val</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
</pre>

<pre class="display">
    <span class="plain">#</span><span class="identifier">ifdef</span><span class="plain"> </span><span class="identifier">IF_MODULE</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_action_name<button class="popup" onclick="togglePopup('usagePopup922')">...<span class="popuptext" id="usagePopup922">Usage of <b>Rvalues::from_action_name</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">action_name</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="identifier">action_name</span><span class="plain">, </span><span class="identifier">K_action_name</span><span class="plain">) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_action_pattern<button class="popup" onclick="togglePopup('usagePopup923')">...<span class="popuptext" id="usagePopup923">Usage of <b>Rvalues::from_action_pattern</b>:<br>Make Assertions - <a href="9-ma.html#SP3_3_11">&#167;3.3.11</a><br>Conditions - <a href="14-cn.html#SP10">&#167;10</a></span></button></span><span class="plain">(</span><span class="identifier">action_pattern</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (((</span><span class="identifier">PL::Actions::Patterns::is_unspecific</span><span class="plain">(</span><span class="identifier">val</span><span class="plain">) == </span><span class="identifier">FALSE</span><span class="plain">) &amp;&amp;</span>
            <span class="plain">(</span><span class="identifier">PL::Actions::Patterns::is_overspecific</span><span class="plain">(</span><span class="identifier">val</span><span class="plain">) == </span><span class="identifier">FALSE</span><span class="plain">)) ||</span>
            <span class="plain">(</span><span class="identifier">preform_lookahead_mode</span><span class="plain">)) {</span>
            <span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="identifier">action_pattern</span><span class="plain">, </span><span class="identifier">K_stored_action</span><span class="plain">);</span>
        <span class="plain">} </span><span class="reserved">else</span><span class="plain"> {</span>
            <span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="identifier">action_pattern</span><span class="plain">, </span><span class="identifier">K_description_of_action</span><span class="plain">);</span>
        <span class="plain">}</span>
    <span class="plain">}</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_grammar_verb<button class="popup" onclick="togglePopup('usagePopup924')">...<span class="popuptext" id="usagePopup924">Usage of <b>Rvalues::from_grammar_verb</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">grammar_verb</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="identifier">grammar_verb</span><span class="plain">, </span><span class="identifier">K_understanding</span><span class="plain">) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_named_action_pattern<button class="popup" onclick="togglePopup('usagePopup925')">...<span class="popuptext" id="usagePopup925">Usage of <b>Rvalues::from_named_action_pattern</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">named_action_pattern</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="identifier">named_action_pattern</span><span class="plain">, </span><span class="identifier">K_nil</span><span class="plain">) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_scene<button class="popup" onclick="togglePopup('usagePopup926')">...<span class="popuptext" id="usagePopup926">Usage of <b>Rvalues::from_scene</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">scene</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="identifier">scene</span><span class="plain">, </span><span class="identifier">K_scene</span><span class="plain">) }</span>
    <span class="plain">#</span><span class="identifier">endif</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_activity<button class="popup" onclick="togglePopup('usagePopup927')">...<span class="popuptext" id="usagePopup927">Usage of <b>Rvalues::from_activity</b>:<br>The Creator - <a href="9-tc.html#SP5_4_2_5">&#167;5.4.2.5</a><br>Activities - <a href="21-ac.html#SP6">&#167;6</a></span></button></span><span class="plain">(</span><span class="reserved">activity</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">activity</span><span class="plain">, </span><span class="functiontext"><a href="21-ac.html#SP6">Activities::to_kind</a></span><span class="plain">(</span><span class="identifier">val</span><span class="plain">)) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_binary_predicate<button class="popup" onclick="togglePopup('usagePopup928')">...<span class="popuptext" id="usagePopup928">Usage of <b>Rvalues::from_binary_predicate</b>:<br>Binary Predicates - <a href="6-bp.html#SP28">&#167;28</a><br>The Equality Relation - <a href="12-ter.html#SP3">&#167;3</a></span></button></span><span class="plain">(</span><span class="reserved">binary_predicate</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">binary_predicate</span><span class="plain">, </span><span class="identifier">Kinds::base_construction</span><span class="plain">(</span><span class="identifier">CON_relation</span><span class="plain">)) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_constant_phrase<button class="popup" onclick="togglePopup('usagePopup929')">...<span class="popuptext" id="usagePopup929">Usage of <b>Rvalues::from_constant_phrase</b>:<br>Phrases as Values - <a href="22-pav.html#SP3">&#167;3</a></span></button></span><span class="plain">(</span><span class="reserved">constant_phrase</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">constant_phrase</span><span class="plain">, </span><span class="identifier">Kinds::base_construction</span><span class="plain">(</span><span class="identifier">CON_phrase</span><span class="plain">)) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_equation<button class="popup" onclick="togglePopup('usagePopup930')">...<span class="popuptext" id="usagePopup930">Usage of <b>Rvalues::from_equation</b>:<br>Type Expressions and Values - <a href="10-teav.html#SP12_1">&#167;12.1</a>, <a href="10-teav.html#SP12_3">&#167;12.3</a><br>Equations - <a href="20-eq.html#SP10_1_3">&#167;10.1.3</a></span></button></span><span class="plain">(</span><span class="reserved">equation</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">equation</span><span class="plain">, </span><span class="identifier">K_equation</span><span class="plain">) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_named_rulebook_outcome<button class="popup" onclick="togglePopup('usagePopup931')">...<span class="popuptext" id="usagePopup931">Usage of <b>Rvalues::from_named_rulebook_outcome</b>:<br>Focus and Outcome - <a href="21-fao.html#SP10">&#167;10</a></span></button></span><span class="plain">(</span><span class="reserved">named_rulebook_outcome</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">named_rulebook_outcome</span><span class="plain">, </span><span class="identifier">K_rulebook_outcome</span><span class="plain">) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_property<button class="popup" onclick="togglePopup('usagePopup932')">...<span class="popuptext" id="usagePopup932">Usage of <b>Rvalues::from_property</b>:<br>Refine Parse Tree - <a href="9-rpt.html#SP9_7_6_1">&#167;9.7.6.1</a><br>Terms - <a href="11-tr.html#SP8">&#167;8</a><br>Propositions - <a href="11-pr.html#SP27">&#167;27</a><br>Tree Conversions - <a href="11-tc.html#SP4">&#167;4</a><br>Properties - <a href="15-pr.html#SP5_8">&#167;5.8</a><br>Measurement Adjectives - <a href="15-ma.html#SP13">&#167;13</a></span></button></span><span class="plain">(</span><span class="reserved">property</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">property</span><span class="plain">, </span><span class="functiontext"><a href="15-pr.html#SP6">Properties::to_kind</a></span><span class="plain">(</span><span class="identifier">val</span><span class="plain">)) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_rule<button class="popup" onclick="togglePopup('usagePopup933')">...<span class="popuptext" id="usagePopup933">Usage of <b>Rvalues::from_rule</b>:<br>Rules - <a href="21-rl.html#SP5_1">&#167;5.1</a><br>Rule Bookings - <a href="21-rb.html#SP24_1">&#167;24.1</a></span></button></span><span class="plain">(</span><span class="reserved">rule</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">rule</span><span class="plain">, </span><span class="functiontext"><a href="21-rl.html#SP8">Rules::to_kind</a></span><span class="plain">(</span><span class="identifier">val</span><span class="plain">)) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_rulebook<button class="popup" onclick="togglePopup('usagePopup934')">...<span class="popuptext" id="usagePopup934">Usage of <b>Rvalues::from_rulebook</b>:<br>The Creator - <a href="9-tc.html#SP5_4_2_4">&#167;5.4.2.4</a><br>Rulebooks - <a href="21-rl2.html#SP10">&#167;10</a></span></button></span><span class="plain">(</span><span class="reserved">rulebook</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">rulebook</span><span class="plain">, </span><span class="functiontext"><a href="21-rl2.html#SP10">Rulebooks::to_kind</a></span><span class="plain">(</span><span class="identifier">val</span><span class="plain">)) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_table<button class="popup" onclick="togglePopup('usagePopup935')">...<span class="popuptext" id="usagePopup935">Usage of <b>Rvalues::from_table</b>:<br>Tables - <a href="19-tb.html#SP20_7">&#167;20.7</a></span></button></span><span class="plain">(</span><span class="reserved">table</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">table</span><span class="plain">, </span><span class="identifier">K_table</span><span class="plain">) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_table_column<button class="popup" onclick="togglePopup('usagePopup936')">...<span class="popuptext" id="usagePopup936">Usage of <b>Rvalues::from_table_column</b>:<br>Table Columns - <a href="19-tc.html#SP4">&#167;4</a></span></button></span><span class="plain">(</span><span class="reserved">table_column</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">table_column</span><span class="plain">, </span><span class="functiontext"><a href="19-tc.html#SP6">Tables::Columns::to_kind</a></span><span class="plain">(</span><span class="identifier">val</span><span class="plain">)) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_use_option<button class="popup" onclick="togglePopup('usagePopup937')">...<span class="popuptext" id="usagePopup937">Usage of <b>Rvalues::from_use_option</b>:<br>Use Options - <a href="26-uo.html#SP5">&#167;5</a></span></button></span><span class="plain">(</span><span class="reserved">use_option</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="reserved">use_option</span><span class="plain">, </span><span class="identifier">K_use_option</span><span class="plain">) }</span>
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_verb_form<button class="popup" onclick="togglePopup('usagePopup938')">...<span class="popuptext" id="usagePopup938">Usage of <b>Rvalues::from_verb_form</b>:<br>Constants and Descriptions - <a href="10-cad.html#SP1_1">&#167;1.1</a></span></button></span><span class="plain">(</span><span class="identifier">verb_form</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain">) { </span><span class="identifier">CONV_FROM</span><span class="plain">(</span><span class="identifier">verb_form</span><span class="plain">, </span><span class="identifier">K_verb</span><span class="plain">) }</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP2"></a><b>&#167;2.  </b>Contrariwise, here's how to get back again:
</p>


<pre class="definitions">
    <span class="definitionkeyword">define</span> <span class="identifier">CONV_TO</span><span class="plain">(</span><span class="identifier">structure</span><span class="plain">)</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">spec</span><span class="plain"> == </span><span class="identifier">NULL</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">NULL</span><span class="plain">;</span>
        <span class="identifier">structure</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain"> = </span><span class="identifier">ParseTree::get_constant_</span><span class="plain">##</span><span class="identifier">structure</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">val</span><span class="plain">;</span>
</pre>

<pre class="display">
    <span class="plain">#</span><span class="identifier">ifdef</span><span class="plain"> </span><span class="identifier">IF_MODULE</span>
    <span class="identifier">action_name</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_action_name<button class="popup" onclick="togglePopup('usagePopup939')">...<span class="popuptext" id="usagePopup939">Usage of <b>Rvalues::to_action_name</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="identifier">action_name</span><span class="plain">) }</span>
    <span class="identifier">action_pattern</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_action_pattern<button class="popup" onclick="togglePopup('usagePopup940')">...<span class="popuptext" id="usagePopup940">Usage of <b>Rvalues::to_action_pattern</b>:<br>Conditions and Phrases - <a href="10-cap.html#SP3">&#167;3</a><br>Conditions - <a href="14-cn.html#SP10">&#167;10</a>, <a href="14-cn.html#SP16">&#167;16</a><br>Chronology - <a href="24-ch.html#SP4">&#167;4</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="identifier">action_pattern</span><span class="plain">) }</span>
    <span class="identifier">grammar_verb</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_grammar_verb<button class="popup" onclick="togglePopup('usagePopup941')">...<span class="popuptext" id="usagePopup941">Usage of <b>Rvalues::to_grammar_verb</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="identifier">grammar_verb</span><span class="plain">) }</span>
    <span class="identifier">named_action_pattern</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_named_action_pattern<button class="popup" onclick="togglePopup('usagePopup942')">...<span class="popuptext" id="usagePopup942">Usage of <b>Rvalues::to_named_action_pattern</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="identifier">named_action_pattern</span><span class="plain">) }</span>
    <span class="identifier">scene</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_scene<button class="popup" onclick="togglePopup('usagePopup943')">...<span class="popuptext" id="usagePopup943">Usage of <b>Rvalues::to_scene</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="identifier">scene</span><span class="plain">) }</span>
    <span class="plain">#</span><span class="identifier">endif</span>
    <span class="reserved">activity</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_activity<button class="popup" onclick="togglePopup('usagePopup944')">...<span class="popuptext" id="usagePopup944">Usage of <b>Rvalues::to_activity</b>:<br><a href="#SP20">&#167;20</a>, <a href="#SP24_3">&#167;24.3</a>, Make Assertions - <a href="9-ma.html#SP3_3_25_1">&#167;3.3.25.1</a><br>Activities - <a href="21-ac.html#SP11">&#167;11</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">activity</span><span class="plain">) }</span>
    <span class="reserved">binary_predicate</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_binary_predicate<button class="popup" onclick="togglePopup('usagePopup945')">...<span class="popuptext" id="usagePopup945">Usage of <b>Rvalues::to_binary_predicate</b>:<br><a href="#SP20">&#167;20</a>, <a href="#SP23_2">&#167;23.2</a>, <a href="#SP24_3">&#167;24.3</a>, Type Check Propositions - <a href="11-tcp.html#SP11_3">&#167;11.3</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">binary_predicate</span><span class="plain">) }</span>
    <span class="reserved">constant_phrase</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_constant_phrase<button class="popup" onclick="togglePopup('usagePopup946')">...<span class="popuptext" id="usagePopup946">Usage of <b>Rvalues::to_constant_phrase</b>:<br><a href="#SP20">&#167;20</a>, <a href="#SP23_6">&#167;23.6</a>, <a href="#SP24_3">&#167;24.3</a>, Phrases as Values - <a href="22-pav.html#SP4">&#167;4</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">constant_phrase</span><span class="plain">) }</span>
    <span class="reserved">equation</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_equation<button class="popup" onclick="togglePopup('usagePopup947')">...<span class="popuptext" id="usagePopup947">Usage of <b>Rvalues::to_equation</b>:<br><a href="#SP24_3">&#167;24.3</a>, Type Expressions and Values - <a href="10-teav.html#SP12_2">&#167;12.2</a><br>Compile Invocations Inline - <a href="25-cii.html#SP3_7_3">&#167;3.7.3</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">equation</span><span class="plain">) }</span>
    <span class="reserved">named_rulebook_outcome</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_named_rulebook_outcome<button class="popup" onclick="togglePopup('usagePopup948')">...<span class="popuptext" id="usagePopup948">Usage of <b>Rvalues::to_named_rulebook_outcome</b>:<br><a href="#SP24_3">&#167;24.3</a>, Focus and Outcome - <a href="21-fao.html#SP9">&#167;9</a>, <a href="21-fao.html#SP10">&#167;10</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">named_rulebook_outcome</span><span class="plain">) }</span>
    <span class="reserved">property</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_property<button class="popup" onclick="togglePopup('usagePopup949')">...<span class="popuptext" id="usagePopup949">Usage of <b>Rvalues::to_property</b>:<br><a href="#SP20">&#167;20</a>, <a href="#SP23_3">&#167;23.3</a>, <a href="#SP24_3_1">&#167;24.3.1</a>, The Creator - <a href="9-tc.html#SP4_5">&#167;4.5</a><br>Make Assertions - <a href="9-ma.html#SP3_3_8_2">&#167;3.3.8.2</a>, <a href="9-ma.html#SP3_3_41_4">&#167;3.3.41.4</a>, <a href="9-ma.html#SP3_3_41_7">&#167;3.3.41.7</a><br>Propositions - <a href="11-pr.html#SP35_2">&#167;35.2</a><br>Sentence Conversions - <a href="11-sc.html#SP3_3">&#167;3.3</a><br>Simplifications - <a href="11-sm.html#SP17_1">&#167;17.1</a>, <a href="11-sm.html#SP18">&#167;18</a><br>Lvalues - <a href="14-lv.html#SP10">&#167;10</a>, <a href="14-lv.html#SP12_5">&#167;12.5</a>, <a href="14-lv.html#SP14_3">&#167;14.3</a><br>Dash - <a href="14-ds2.html#SP11_9_1_1_2_1">&#167;11.9.1.1.2.1</a>, <a href="14-ds2.html#SP11_9_1_1_5_1_2">&#167;11.9.1.1.5.1.2</a>, <a href="14-ds2.html#SP11_9_1_2_3">&#167;11.9.1.2.3</a>, <a href="14-ds2.html#SP13">&#167;13</a>, <a href="14-ds2.html#SP19_3">&#167;19.3</a><br>Properties - <a href="15-pr.html#SP4">&#167;4</a><br>The Provision Relation - <a href="15-tpr.html#SP6">&#167;6</a>, <a href="15-tpr.html#SP7">&#167;7</a><br>Compile Invocations Inline - <a href="25-cii.html#SP3_1_1_4_11">&#167;3.1.1.4.11</a>, <a href="25-cii.html#SP3_7">&#167;3.7</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">property</span><span class="plain">) }</span>
    <span class="reserved">rule</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_rule<button class="popup" onclick="togglePopup('usagePopup950')">...<span class="popuptext" id="usagePopup950">Usage of <b>Rvalues::to_rule</b>:<br><a href="#SP20">&#167;20</a>, <a href="#SP24_3">&#167;24.3</a>, Make Assertions - <a href="9-ma.html#SP3_3_41_6">&#167;3.3.41.6</a><br>I6 Schemas - <a href="12-is.html#SP7_1">&#167;7.1</a><br>Rules - <a href="21-rl.html#SP6">&#167;6</a><br>Compile Invocations Inline - <a href="25-cii.html#SP3_1_1_4_12">&#167;3.1.1.4.12</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">rule</span><span class="plain">) }</span>
    <span class="reserved">rulebook</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_rulebook<button class="popup" onclick="togglePopup('usagePopup951')">...<span class="popuptext" id="usagePopup951">Usage of <b>Rvalues::to_rulebook</b>:<br><a href="#SP20">&#167;20</a>, <a href="#SP24_3">&#167;24.3</a>, Make Assertions - <a href="9-ma.html#SP3_3_18">&#167;3.3.18</a>, <a href="9-ma.html#SP3_3_25_2">&#167;3.3.25.2</a><br>Rule Placement Sentences - <a href="21-rps.html#SP2">&#167;2</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">rulebook</span><span class="plain">) }</span>
    <span class="reserved">table</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_table<button class="popup" onclick="togglePopup('usagePopup952')">...<span class="popuptext" id="usagePopup952">Usage of <b>Rvalues::to_table</b>:<br><a href="#SP24_3">&#167;24.3</a>, Tables of Definitions - <a href="19-tod.html#SP6">&#167;6</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">table</span><span class="plain">) }</span>
    <span class="reserved">table_column</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_table_column<button class="popup" onclick="togglePopup('usagePopup953')">...<span class="popuptext" id="usagePopup953">Usage of <b>Rvalues::to_table_column</b>:<br><a href="#SP20">&#167;20</a>, <a href="#SP23_5">&#167;23.5</a>, <a href="#SP24_3">&#167;24.3</a>, Simplifications - <a href="11-sm.html#SP4">&#167;4</a><br>Lvalues - <a href="14-lv.html#SP12_3">&#167;12.3</a><br>Table Columns - <a href="19-tc.html#SP13">&#167;13</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">table_column</span><span class="plain">) }</span>
    <span class="reserved">use_option</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_use_option<button class="popup" onclick="togglePopup('usagePopup954')">...<span class="popuptext" id="usagePopup954">Usage of <b>Rvalues::to_use_option</b>:<br><a href="#SP24_3">&#167;24.3</a>, Use Options - <a href="26-uo.html#SP7">&#167;7</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">use_option</span><span class="plain">) }</span>
    <span class="identifier">verb_form</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_verb_form<button class="popup" onclick="togglePopup('usagePopup955')">...<span class="popuptext" id="usagePopup955">Usage of <b>Rvalues::to_verb_form</b>:<br><a href="#SP24_3">&#167;24.3</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="identifier">verb_form</span><span class="plain">) }</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP3"></a><b>&#167;3.  </b>With enumerated kinds, the possible values are in general stored as instance
objects.
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_instance<button class="popup" onclick="togglePopup('usagePopup956')">...<span class="popuptext" id="usagePopup956">Usage of <b>Rvalues::from_instance</b>:<br>Adjective Meanings - <a href="4-am.html#SP24_6">&#167;24.6</a><br>Instances - <a href="5-ins.html#SP6_3">&#167;6.3</a>, <a href="5-ins.html#SP36">&#167;36</a><br>Refine Parse Tree - <a href="9-rpt.html#SP6">&#167;6</a><br>The Creator - <a href="9-tc.html#SP5_4_1_1">&#167;5.4.1.1</a>, <a href="9-tc.html#SP5_4_2_3">&#167;5.4.2.3</a><br>Constants and Descriptions - <a href="10-cad.html#SP17">&#167;17</a><br>Terms - <a href="11-tr.html#SP8">&#167;8</a><br>Tree Conversions - <a href="11-tc.html#SP3">&#167;3</a><br>Assert Propositions - <a href="12-ap.html#SP9_5_2">&#167;9.5.2</a><br>Lvalues - <a href="14-lv.html#SP14_3_1">&#167;14.3.1</a><br>Descriptions - <a href="14-ds.html#SP5">&#167;5</a><br>Inference Subjects - <a href="16-is.html#SP18">&#167;18</a><br>Instance Counting - <a href="16-ic.html#SP9">&#167;9</a><br>Tables - <a href="19-tb.html#SP24">&#167;24</a></span></button></span><span class="plain">(</span><span class="reserved">instance</span><span class="plain"> *</span><span class="identifier">I</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">val</span><span class="plain"> = </span><span class="identifier">ParseTree::new</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">val</span><span class="plain">, </span><span class="functiontext"><a href="5-ins.html#SP18">Instances::to_kind</a></span><span class="plain">(</span><span class="identifier">I</span><span class="plain">));</span>
        <span class="identifier">ParseTree::set_constant_instance</span><span class="plain">(</span><span class="identifier">val</span><span class="plain">, </span><span class="identifier">I</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">val</span><span class="plain">, </span><span class="constant">constant_enumeration_ANNOT</span><span class="plain">, </span><span class="functiontext"><a href="5-ins.html#SP13">Instances::get_numerical_value</a></span><span class="plain">(</span><span class="identifier">I</span><span class="plain">));</span>
        <span class="identifier">ParseTree::set_text</span><span class="plain">(</span><span class="identifier">val</span><span class="plain">, </span><span class="functiontext"><a href="5-ins.html#SP14">Instances::get_name</a></span><span class="plain">(</span><span class="identifier">I</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">));</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">val</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">instance</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_instance<button class="popup" onclick="togglePopup('usagePopup957')">...<span class="popuptext" id="usagePopup957">Usage of <b>Rvalues::to_instance</b>:<br><a href="#SP4">&#167;4</a>, <a href="#SP20">&#167;20</a>, <a href="#SP22">&#167;22</a>, <a href="#SP23_1">&#167;23.1</a>, <a href="#SP24_3">&#167;24.3</a>, Supplementary Quotes - <a href="2-sq.html#SP4">&#167;4</a><br>Adjective Meanings - <a href="4-am.html#SP24_4">&#167;24.4</a><br>Instances - <a href="5-ins.html#SP17">&#167;17</a><br>Make Assertions - <a href="9-ma.html#SP3_3_39">&#167;3.3.39</a>, <a href="9-ma.html#SP3_3_40_1">&#167;3.3.40.1</a>, <a href="9-ma.html#SP3_3_41_5">&#167;3.3.41.5</a><br>Verbal and Relative Clauses - <a href="10-varc.html#SP9_1">&#167;9.1</a><br>Propositions - <a href="11-pr.html#SP35_1">&#167;35.1</a><br>The Equality Relation - <a href="12-ter.html#SP8_5">&#167;8.5</a><br>Specifications - <a href="14-sp.html#SP4">&#167;4</a><br>Descriptions - <a href="14-ds.html#SP5">&#167;5</a><br>Dash - <a href="14-ds2.html#SP11_9_1_1_5_1_1">&#167;11.9.1.1.5.1.1</a><br>Inference Subjects - <a href="16-is.html#SP17">&#167;17</a><br>Phrase Runtime Context Data - <a href="22-prcd.html#SP6">&#167;6</a><br>Local Variables - <a href="24-lv.html#SP34">&#167;34</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) { </span><span class="identifier">CONV_TO</span><span class="plain">(</span><span class="reserved">instance</span><span class="plain">) }</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP4"></a><b>&#167;4.  </b>An instance of a subkind of <code class="display"><span class="extract">K_object</span></code> is called an "object":
</p>

<pre class="display">
    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::is_object<button class="popup" onclick="togglePopup('usagePopup958')">...<span class="popuptext" id="usagePopup958">Usage of <b>Rvalues::is_object</b>:<br><a href="#SP22">&#167;22</a>, <a href="#SP23">&#167;23</a>, Supplementary Quotes - <a href="2-sq.html#SP4">&#167;4</a><br>Make Assertions - <a href="9-ma.html#SP3_3_41">&#167;3.3.41</a>, <a href="9-ma.html#SP3_3_41_2">&#167;3.3.41.2</a><br>Relation Knowledge - <a href="9-rk.html#SP1_3">&#167;1.3</a><br>Specifications - <a href="14-sp.html#SP3">&#167;3</a>, <a href="14-sp.html#SP4">&#167;4</a><br>Dash - <a href="14-ds2.html#SP11_9_1_2_3">&#167;11.9.1.2.3</a><br>Local Variables - <a href="24-lv.html#SP34">&#167;34</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ParseTree::is</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">CONSTANT_NT</span><span class="plain">)) &amp;&amp;</span>
            <span class="plain">(</span><span class="identifier">Kinds::Compare::le</span><span class="plain">(</span><span class="identifier">ParseTree::get_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">), </span><span class="identifier">K_object</span><span class="plain">)))</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">instance</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_object_instance<button class="popup" onclick="togglePopup('usagePopup959')">...<span class="popuptext" id="usagePopup959">Usage of <b>Rvalues::to_object_instance</b>:<br><a href="#SP20">&#167;20</a>, Adjective Meanings - <a href="4-am.html#SP24_6">&#167;24.6</a><br>Constants and Descriptions - <a href="10-cad.html#SP12">&#167;12</a>, <a href="10-cad.html#SP17">&#167;17</a><br>Terms - <a href="11-tr.html#SP11">&#167;11</a><br>Dash - <a href="14-ds2.html#SP11_9_1_1_5_1">&#167;11.9.1.1.5.1</a><br>Inference Subjects - <a href="16-is.html#SP12">&#167;12</a>, <a href="16-is.html#SP17">&#167;17</a><br>Compile Phrases - <a href="25-cp.html#SP5_3_5">&#167;5.3.5</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP4">Rvalues::is_object</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="functiontext"><a href="#SP3">Rvalues::to_instance</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">NULL</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP5"></a><b>&#167;5.  </b>There are two pseudo-objects for which no pointers to <code class="display"><span class="extract">instance</span></code> can exist:
"self" and "nothing". These cause nothing but trouble and are marked out with
special annotations.
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::new_self_object_constant<button class="popup" onclick="togglePopup('usagePopup960')">...<span class="popuptext" id="usagePopup960">Usage of <b>Rvalues::new_self_object_constant</b>:<br>Sentence Conversions - <a href="11-sc.html#SP3_5">&#167;3.5</a><br>I6 Schemas - <a href="12-is.html#SP8">&#167;8</a><br>Dash - <a href="14-ds2.html#SP19_3_1_1">&#167;19.3.1.1</a></span></button></span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_object</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">self_object_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::new_nothing_object_constant<button class="popup" onclick="togglePopup('usagePopup961')">...<span class="popuptext" id="usagePopup961">Usage of <b>Rvalues::new_nothing_object_constant</b>:<br>Constants and Descriptions - <a href="10-cad.html#SP1">&#167;1</a><br>Tree Conversions - <a href="11-tc.html#SP3">&#167;3</a><br>Instance Counting - <a href="16-ic.html#SP9">&#167;9</a><br>Compile Invocations - <a href="25-ci.html#SP3_1_1_1">&#167;3.1.1.1</a><br>Compile Phrases - <a href="25-cp.html#SP5_3_5">&#167;5.3.5</a></span></button></span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_object</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">nothing_object_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP6"></a><b>&#167;6.  </b>To test for the self/nothing anomalies (that really could be an episode
title from "The Big Bang Theory"),
</p>

<pre class="display">
    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::is_nothing_object_constant<button class="popup" onclick="togglePopup('usagePopup962')">...<span class="popuptext" id="usagePopup962">Usage of <b>Rvalues::is_nothing_object_constant</b>:<br>Property Knowledge - <a href="9-pk.html#SP2_1">&#167;2.1</a><br>Relation Knowledge - <a href="9-rk.html#SP1_3">&#167;1.3</a><br>Binding and Substitution - <a href="11-bas.html#SP13">&#167;13</a><br>Simplifications - <a href="11-sm.html#SP3">&#167;3</a><br>Assert Propositions - <a href="12-ap.html#SP9_11_1">&#167;9.11.1</a><br>Specifications - <a href="14-sp.html#SP3">&#167;3</a>, <a href="14-sp.html#SP4">&#167;4</a><br>Dash - <a href="14-ds2.html#SP19">&#167;19</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">nothing_object_ANNOT</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::is_self_object_constant<button class="popup" onclick="togglePopup('usagePopup963')">...<span class="popuptext" id="usagePopup963">Usage of <b>Rvalues::is_self_object_constant</b>:<br>Lvalues - <a href="14-lv.html#SP6">&#167;6</a>, <a href="14-lv.html#SP14_3_1">&#167;14.3.1</a><br>Dash - <a href="14-ds2.html#SP11_9_1_2_3">&#167;11.9.1.2.3</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">self_object_ANNOT</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP7"></a><b>&#167;7. Literals as rvalues. </b>Notation such as "24 kg" is converted inside Inform into a suitable integer,
perhaps 24000, and the following turns that into an rvalue:
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_encoded_notation<button class="popup" onclick="togglePopup('usagePopup964')">...<span class="popuptext" id="usagePopup964">Usage of <b>Rvalues::from_encoded_notation</b>:<br>Parse Literals - <a href="10-pl.html#SP1">&#167;1</a></span></button></span><span class="plain">(</span><span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">K</span><span class="plain">, </span><span class="reserved">int</span><span class="plain"> </span><span class="identifier">encoded_value</span><span class="plain">, </span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">, </span><span class="identifier">encoded_value</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::to_encoded_notation<button class="popup" onclick="togglePopup('usagePopup965')">...<span class="popuptext" id="usagePopup965">Usage of <b>Rvalues::to_encoded_notation</b>:<br><a href="#SP20">&#167;20</a>, Literal Patterns - <a href="5-lp.html#SP34_4">&#167;34.4</a><br>Measurement Adjectives - <a href="15-ma.html#SP8_2">&#167;8.2</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">))</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="constant">0</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP8"></a><b>&#167;8.  </b>We can also convert to and from integers, but there we use an integer
annotation, not a pointer one.
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_int<button class="popup" onclick="togglePopup('usagePopup966')">...<span class="popuptext" id="usagePopup966">Usage of <b>Rvalues::from_int</b>:<br>Relations - <a href="6-rlt.html#SP26_1">&#167;26.1</a><br>Parse Literals - <a href="10-pl.html#SP1">&#167;1</a><br>Instance Counting - <a href="16-ic.html#SP12_1">&#167;12.1</a>, <a href="16-ic.html#SP12_3_1">&#167;12.3.1</a>, <a href="16-ic.html#SP12_3_2">&#167;12.3.2</a><br>Equations - <a href="20-eq.html#SP50_3_1">&#167;50.3.1</a><br>Compile Invocations Inline - <a href="25-cii.html#SP3_5_4_1">&#167;3.5.4.1</a>, <a href="25-cii.html#SP3_7_2">&#167;3.7.2</a></span></button></span><span class="plain">(</span><span class="reserved">int</span><span class="plain"> </span><span class="identifier">n</span><span class="plain">, </span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_number</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">, </span><span class="identifier">n</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::to_int<button class="popup" onclick="togglePopup('usagePopup967')">...<span class="popuptext" id="usagePopup967">Usage of <b>Rvalues::to_int</b>:<br><a href="#SP24_1">&#167;24.1</a>, Compile Arithmetic - <a href="13-ca.html#SP1_12">&#167;1.12</a><br>Tables - <a href="19-tb.html#SP26_2">&#167;26.2</a><br>Equations - <a href="20-eq.html#SP41_2_1">&#167;41.2.1</a>, <a href="20-eq.html#SP50_3_1">&#167;50.3.1</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">spec</span><span class="plain"> == </span><span class="identifier">NULL</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">0</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">))</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="constant">0</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP9"></a><b>&#167;9.  </b>Internally we represent parsed reals as unsigned integers holding their
IEEE-754 representations; I just don't sufficiently trust C's implementation
of <code class="display"><span class="extract">float</span></code> to be consistent across all Inform's platforms to use it.
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_IEEE_754<button class="popup" onclick="togglePopup('usagePopup968')">...<span class="popuptext" id="usagePopup968">Usage of <b>Rvalues::from_IEEE_754</b>:<br>Parse Literals - <a href="10-pl.html#SP5">&#167;5</a></span></button></span><span class="plain">(</span><span class="reserved">unsigned</span><span class="plain"> </span><span class="reserved">int</span><span class="plain"> </span><span class="identifier">n</span><span class="plain">, </span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_real_number</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">, (</span><span class="reserved">int</span><span class="plain">) </span><span class="identifier">n</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">unsigned</span><span class="plain"> </span><span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::to_IEEE_754<button class="popup" onclick="togglePopup('usagePopup969')">...<span class="popuptext" id="usagePopup969">Usage of <b>Rvalues::to_IEEE_754</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_of_kind</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_real_number</span><span class="plain">))</span>
            <span class="reserved">return</span><span class="plain"> (</span><span class="reserved">unsigned</span><span class="plain"> </span><span class="reserved">int</span><span class="plain">) </span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="constant">0x7F800001</span><span class="plain">; </span><span class="comment"> which is a NaN value</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP10"></a><b>&#167;10.  </b>And exactly similarly, truth states:
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_boolean<button class="popup" onclick="togglePopup('usagePopup970')">...<span class="popuptext" id="usagePopup970">Usage of <b>Rvalues::from_boolean</b>:<br>Parse Literals - <a href="10-pl.html#SP3">&#167;3</a></span></button></span><span class="plain">(</span><span class="reserved">int</span><span class="plain"> </span><span class="identifier">flag</span><span class="plain">, </span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_truth_state</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">, </span><span class="identifier">flag</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::to_boolean<button class="popup" onclick="togglePopup('usagePopup971')">...<span class="popuptext" id="usagePopup971">Usage of <b>Rvalues::to_boolean</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_of_kind</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_truth_state</span><span class="plain">))</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP11"></a><b>&#167;11.  </b>And Unicode character values.
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_Unicode_point<button class="popup" onclick="togglePopup('usagePopup972')">...<span class="popuptext" id="usagePopup972">Usage of <b>Rvalues::from_Unicode_point</b>:<br>Unicode Translations - <a href="5-ut.html#SP4">&#167;4</a></span></button></span><span class="plain">(</span><span class="reserved">int</span><span class="plain"> </span><span class="identifier">code_point</span><span class="plain">, </span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_unicode_character</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">, </span><span class="identifier">code_point</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::to_Unicode_point<button class="popup" onclick="togglePopup('usagePopup973')">...<span class="popuptext" id="usagePopup973">Usage of <b>Rvalues::to_Unicode_point</b>:<br>Compiled Text - <a href="26-ct.html#SP4">&#167;4</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_of_kind</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_unicode_character</span><span class="plain">))</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="constant">0</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP12"></a><b>&#167;12.  </b>In the traditional Inform world model, time is measured in minutes,
reduced modulo 1440, the number of minutes in a day.
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_time<button class="popup" onclick="togglePopup('usagePopup974')">...<span class="popuptext" id="usagePopup974">Usage of <b>Rvalues::from_time</b>:<br>Times of Day - <a href="5-tod.html#SP6">&#167;6</a></span></button></span><span class="plain">(</span><span class="reserved">int</span><span class="plain"> </span><span class="identifier">minutes_since_midnight</span><span class="plain">, </span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="functiontext"><a href="5-tod.html#SP5">PL::TimesOfDay::kind</a></span><span class="plain">());</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">, </span><span class="identifier">minutes_since_midnight</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::to_time<button class="popup" onclick="togglePopup('usagePopup975')">...<span class="popuptext" id="usagePopup975">Usage of <b>Rvalues::to_time</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_of_kind</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="functiontext"><a href="5-tod.html#SP5">PL::TimesOfDay::kind</a></span><span class="plain">()))</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">constant_number_ANNOT</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="constant">0</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP13"></a><b>&#167;13.  </b>For obscure timing reasons, we store literal lists as just their wordings
together with their kinds:
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_wording_of_list<button class="popup" onclick="togglePopup('usagePopup976')">...<span class="popuptext" id="usagePopup976">Usage of <b>Rvalues::from_wording_of_list</b>:<br>List Constants - <a href="18-lc.html#SP4">&#167;4</a></span></button></span><span class="plain">(</span><span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">K</span><span class="plain">, </span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP14"></a><b>&#167;14.  </b>Text mostly comes from wordings:
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_wording<button class="popup" onclick="togglePopup('usagePopup977')">...<span class="popuptext" id="usagePopup977">Usage of <b>Rvalues::from_wording</b>:<br><a href="#SP15">&#167;15</a>, Traverse for Assertions - <a href="9-tfa.html#SP11">&#167;11</a><br>Parse Literals - <a href="10-pl.html#SP1">&#167;1</a></span></button></span><span class="plain">(</span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_text</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP15"></a><b>&#167;15.  </b>It's convenient to have a version for text where square brackets should
be interpreted literally, not as escapes for a text substitution:
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_unescaped_wording<button class="popup" onclick="togglePopup('usagePopup978')">...<span class="popuptext" id="usagePopup978">Usage of <b>Rvalues::from_unescaped_wording</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="functiontext"><a href="#SP14">Rvalues::from_wording</a></span><span class="plain">(</span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">text_unescaped_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP16"></a><b>&#167;16.  </b></p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_iname<button class="popup" onclick="togglePopup('usagePopup979')">...<span class="popuptext" id="usagePopup979">Usage of <b>Rvalues::from_iname</b>:<br>none</span></button></span><span class="plain">(</span><span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">I</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K_text</span><span class="plain">);</span>
        <span class="identifier">ParseTree::annotate_int</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">explicit_literal_ANNOT</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_explicit_iname</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">I</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP17"></a><b>&#167;17. Pairs. </b>We can also form an r-value by combining two existing values; note that in
Inform, unlike in (say) Perl, a tuple of l-values is only an r-value, not
an l-value.
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::from_pair<button class="popup" onclick="togglePopup('usagePopup980')">...<span class="popuptext" id="usagePopup980">Usage of <b>Rvalues::from_pair</b>:<br>Verbal and Relative Clauses - <a href="10-varc.html#SP7">&#167;7</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">X</span><span class="plain">, </span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">Y</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">X</span><span class="plain"> == </span><span class="identifier">NULL</span><span class="plain">) </span><span class="identifier">X</span><span class="plain"> = </span><span class="functiontext"><a href="14-sp.html#SP8">Specifications::new_UNKNOWN</a></span><span class="plain">(</span><span class="identifier">EMPTY_WORDING</span><span class="plain">);</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Y</span><span class="plain"> == </span><span class="identifier">NULL</span><span class="plain">) </span><span class="identifier">Y</span><span class="plain"> = </span><span class="functiontext"><a href="14-sp.html#SP8">Specifications::new_UNKNOWN</a></span><span class="plain">(</span><span class="identifier">EMPTY_WORDING</span><span class="plain">);</span>
        <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">kX</span><span class="plain"> = </span><span class="functiontext"><a href="14-sp.html#SP1">Specifications::to_true_kind_disambiguated</a></span><span class="plain">(</span><span class="identifier">X</span><span class="plain">);</span>
        <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">kY</span><span class="plain"> = </span><span class="functiontext"><a href="14-sp.html#SP1">Specifications::to_true_kind_disambiguated</a></span><span class="plain">(</span><span class="identifier">Y</span><span class="plain">);</span>
        <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">K</span><span class="plain"> = </span><span class="identifier">Kinds::pair_kind</span><span class="plain">(</span><span class="identifier">kX</span><span class="plain">, </span><span class="identifier">kY</span><span class="plain">);</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain"> = </span><span class="identifier">ParseTree::new</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">K</span><span class="plain">);</span>
        <span class="identifier">spec</span><span class="plain">-&gt;</span><span class="element">down</span><span class="plain"> = </span><span class="identifier">X</span><span class="plain">; </span><span class="identifier">spec</span><span class="plain">-&gt;</span><span class="element">down</span><span class="plain">-&gt;</span><span class="element">next</span><span class="plain"> = </span><span class="identifier">Y</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">spec</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Rvalues::to_pair<button class="popup" onclick="togglePopup('usagePopup981')">...<span class="popuptext" id="usagePopup981">Usage of <b>Rvalues::to_pair</b>:<br>I6 Schemas - <a href="12-is.html#SP7_3">&#167;7.3</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">pair</span><span class="plain">, </span><span class="identifier">parse_node</span><span class="plain"> **</span><span class="identifier">X</span><span class="plain">, </span><span class="identifier">parse_node</span><span class="plain"> **</span><span class="identifier">Y</span><span class="plain">) {</span>
        <span class="plain">*</span><span class="identifier">X</span><span class="plain"> = </span><span class="identifier">pair</span><span class="plain">-&gt;</span><span class="identifier">down</span><span class="plain">;</span>
        <span class="plain">*</span><span class="identifier">Y</span><span class="plain"> = </span><span class="identifier">pair</span><span class="plain">-&gt;</span><span class="identifier">down</span><span class="plain">-&gt;</span><span class="element">next</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP18"></a><b>&#167;18. Constant descriptions. </b>Note that whenever we change the proposition, the kind of the constant
may in principle change, since that depends on the free variable's kind
in the proposition.
</p>

<pre class="display">
    <span class="identifier">parse_node</span><span class="plain"> *</span><span class="functiontext">Rvalues::constant_description<button class="popup" onclick="togglePopup('usagePopup982')">...<span class="popuptext" id="usagePopup982">Usage of <b>Rvalues::constant_description</b>:<br>Descriptions - <a href="14-ds.html#SP1">&#167;1</a></span></button></span><span class="plain">(</span><span class="reserved">pcalc_prop</span><span class="plain"> *</span><span class="identifier">prop</span><span class="plain">, </span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">con</span><span class="plain"> = </span><span class="identifier">ParseTree::new_with_words</span><span class="plain">(</span><span class="constant">CONSTANT_NT</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
        <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">con</span><span class="plain">,</span>
            <span class="identifier">Kinds::unary_construction</span><span class="plain">(</span><span class="identifier">CON_description</span><span class="plain">, </span><span class="identifier">K_object</span><span class="plain">));</span>
        <span class="functiontext"><a href="#SP18">Rvalues::set_constant_description_proposition</a></span><span class="plain">(</span><span class="identifier">con</span><span class="plain">, </span><span class="identifier">prop</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">con</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Rvalues::set_constant_description_proposition<button class="popup" onclick="togglePopup('usagePopup983')">...<span class="popuptext" id="usagePopup983">Usage of <b>Rvalues::set_constant_description_proposition</b>:<br>Descriptions - <a href="14-ds.html#SP2">&#167;2</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">, </span><span class="reserved">pcalc_prop</span><span class="plain"> *</span><span class="identifier">prop</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_construction</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">CON_description</span><span class="plain">)) {</span>
            <span class="identifier">ParseTree::set_proposition</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">prop</span><span class="plain">);</span>
            <span class="identifier">ParseTree::set_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">,</span>
                <span class="identifier">Kinds::unary_construction</span><span class="plain">(</span><span class="identifier">CON_description</span><span class="plain">,</span>
                    <span class="functiontext"><a href="11-bas.html#SP18">Calculus::Variables::infer_kind_of_variable_0</a></span><span class="plain">(</span><span class="identifier">prop</span><span class="plain">)));</span>
        <span class="plain">} </span><span class="reserved">else</span><span class="plain"> </span><span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"set constant description proposition wrongly"</span><span class="plain">);</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP19"></a><b>&#167;19. Testing. </b></p>

<pre class="display">
    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::is_CONSTANT_construction<button class="popup" onclick="togglePopup('usagePopup984')">...<span class="popuptext" id="usagePopup984">Usage of <b>Rvalues::is_CONSTANT_construction</b>:<br><a href="#SP18">&#167;18</a>, <a href="#SP21">&#167;21</a>, <a href="#SP23">&#167;23</a>, The Creator - <a href="9-tc.html#SP4_5">&#167;4.5</a><br>Make Assertions - <a href="9-ma.html#SP3_2">&#167;3.2</a>, <a href="9-ma.html#SP3_3_18">&#167;3.3.18</a>, <a href="9-ma.html#SP3_3_25">&#167;3.3.25</a>, <a href="9-ma.html#SP3_3_41">&#167;3.3.41</a>, <a href="9-ma.html#SP3_3_41_4">&#167;3.3.41.4</a>, <a href="9-ma.html#SP3_3_41_7">&#167;3.3.41.7</a><br>Property Declarations - <a href="9-pd.html#SP5_11_1">&#167;5.11.1</a><br>Constants and Descriptions - <a href="10-cad.html#SP3">&#167;3</a>, <a href="10-cad.html#SP5">&#167;5</a><br>Propositions - <a href="11-pr.html#SP35_2">&#167;35.2</a><br>Sentence Conversions - <a href="11-sc.html#SP3_3">&#167;3.3</a>, <a href="11-sc.html#SP3_6">&#167;3.6</a><br>Simplifications - <a href="11-sm.html#SP17">&#167;17</a>, <a href="11-sm.html#SP18">&#167;18</a><br>Deciding to Defer - <a href="12-dtd.html#SP18">&#167;18</a><br>Specifications - <a href="14-sp.html#SP3">&#167;3</a><br>Lvalues - <a href="14-lv.html#SP10">&#167;10</a><br>Descriptions - <a href="14-ds.html#SP1">&#167;1</a>, <a href="14-ds.html#SP2">&#167;2</a><br>Dash - <a href="14-ds2.html#SP10_1_1_3_1_3">&#167;10.1.1.3.1.3</a>, <a href="14-ds2.html#SP11_9_1_1_2_1">&#167;11.9.1.1.2.1</a>, <a href="14-ds2.html#SP11_9_1_1_3_1_1">&#167;11.9.1.1.3.1.1</a>, <a href="14-ds2.html#SP11_9_1_1_5_1">&#167;11.9.1.1.5.1</a>, <a href="14-ds2.html#SP11_9_1_1_5_1_2">&#167;11.9.1.1.5.1.2</a>, <a href="14-ds2.html#SP13">&#167;13</a>, <a href="14-ds2.html#SP19_3">&#167;19.3</a><br>Properties - <a href="15-pr.html#SP5_2">&#167;5.2</a><br>Rules - <a href="21-rl.html#SP6">&#167;6</a><br>Rule Placement Sentences - <a href="21-rps.html#SP2">&#167;2</a><br>Activities - <a href="21-ac.html#SP11">&#167;11</a><br>Phrases as Values - <a href="22-pav.html#SP4">&#167;4</a><br>Local Variables - <a href="24-lv.html#SP34">&#167;34</a><br>Compile Invocations Inline - <a href="25-cii.html#SP3_1_1_4_12">&#167;3.1.1.4.12</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">kind_constructor</span><span class="plain"> *</span><span class="identifier">con</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ParseTree::is</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">CONSTANT_NT</span><span class="plain">)) &amp;&amp;</span>
            <span class="plain">(</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">ParseTree::get_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">)) == </span><span class="identifier">con</span><span class="plain">))</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::is_CONSTANT_of_kind<button class="popup" onclick="togglePopup('usagePopup985')">...<span class="popuptext" id="usagePopup985">Usage of <b>Rvalues::is_CONSTANT_of_kind</b>:<br><a href="#SP9">&#167;9</a>, <a href="#SP10">&#167;10</a>, <a href="#SP11">&#167;11</a>, <a href="#SP12">&#167;12</a>, Literal Patterns - <a href="5-lp.html#SP34_4">&#167;34.4</a><br>Traverse for Assertions - <a href="9-tfa.html#SP7_2_1">&#167;7.2.1</a><br>The Creator - <a href="9-tc.html#SP2">&#167;2</a><br>Make Assertions - <a href="9-ma.html#SP3_3_26_1_1">&#167;3.3.26.1.1</a>, <a href="9-ma.html#SP3_3_41_6">&#167;3.3.41.6</a><br>Architecture of the S-Parser - <a href="10-aots.html#SP10">&#167;10</a><br>Constants and Descriptions - <a href="10-cad.html#SP3">&#167;3</a>, <a href="10-cad.html#SP5">&#167;5</a><br>Type Expressions and Values - <a href="10-teav.html#SP12_2">&#167;12.2</a><br>Conditions and Phrases - <a href="10-cap.html#SP12_1">&#167;12.1</a><br>I6 Schemas - <a href="12-is.html#SP7_1">&#167;7.1</a><br>Dash - <a href="14-ds2.html#SP17">&#167;17</a>, <a href="14-ds2.html#SP19_5_2">&#167;19.5.2</a><br>Responses - <a href="17-rs.html#SP11">&#167;11</a><br>Tables of Definitions - <a href="19-tod.html#SP2_1">&#167;2.1</a><br>Focus and Outcome - <a href="21-fao.html#SP9">&#167;9</a>, <a href="21-fao.html#SP10">&#167;10</a><br>Compile Invocations - <a href="25-ci.html#SP4_2">&#167;4.2</a><br>Compile Invocations Inline - <a href="25-cii.html#SP3_1_1_4_6">&#167;3.1.1.4.6</a>, <a href="25-cii.html#SP3_1_1_4_9">&#167;3.1.1.4.9</a>, <a href="25-cii.html#SP3_1_1_4_10">&#167;3.1.1.4.10</a>, <a href="25-cii.html#SP3_5_8_1">&#167;3.5.8.1</a>, <a href="25-cii.html#SP3_7_3">&#167;3.7.3</a><br>Use Options - <a href="26-uo.html#SP7">&#167;7</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">K</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ParseTree::is</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">CONSTANT_NT</span><span class="plain">)) &amp;&amp;</span>
            <span class="plain">(</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">ParseTree::get_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">), </span><span class="identifier">K</span><span class="plain">)))</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP20"></a><b>&#167;20.  </b>Our most elaborate test is a finicky one, checking if two constant values
are equal at compile time &mdash; which is needed when seeing how to mesh table
continuations together, and in rare cases to help the typechecker. This
doesn't need to be especially rapid.
</p>


<pre class="definitions">
    <span class="definitionkeyword">define</span> <span class="identifier">COMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">DATA</span><span class="plain">, </span><span class="identifier">STRUCTURE</span><span class="plain">, </span><span class="identifier">FETCH</span><span class="plain">)</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">K1</span><span class="plain">) == </span><span class="identifier">DATA</span><span class="plain">) {</span>
            <span class="identifier">STRUCTURE</span><span class="plain"> *</span><span class="identifier">x1</span><span class="plain"> = </span><span class="identifier">FETCH</span><span class="plain">(</span><span class="identifier">spec1</span><span class="plain">);</span>
            <span class="identifier">STRUCTURE</span><span class="plain"> *</span><span class="identifier">x2</span><span class="plain"> = </span><span class="identifier">FETCH</span><span class="plain">(</span><span class="identifier">spec2</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">x1</span><span class="plain"> == </span><span class="identifier">x2</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="plain">}</span>
    <span class="definitionkeyword">define</span> <span class="identifier">KCOMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">DATA</span><span class="plain">, </span><span class="identifier">STRUCTURE</span><span class="plain">, </span><span class="identifier">FETCH</span><span class="plain">)</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">K1</span><span class="plain">, </span><span class="identifier">K_</span><span class="plain">##</span><span class="identifier">DATA</span><span class="plain">)) {</span>
            <span class="identifier">STRUCTURE</span><span class="plain"> *</span><span class="identifier">x1</span><span class="plain"> = </span><span class="identifier">FETCH</span><span class="plain">(</span><span class="identifier">spec1</span><span class="plain">);</span>
            <span class="identifier">STRUCTURE</span><span class="plain"> *</span><span class="identifier">x2</span><span class="plain"> = </span><span class="identifier">FETCH</span><span class="plain">(</span><span class="identifier">spec2</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">x1</span><span class="plain"> == </span><span class="identifier">x2</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="plain">}</span>
    <span class="definitionkeyword">define</span> <span class="identifier">KKCOMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">DATA</span><span class="plain">, </span><span class="identifier">STRUCTURE</span><span class="plain">, </span><span class="identifier">FETCH</span><span class="plain">)</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::le</span><span class="plain">(</span><span class="identifier">K1</span><span class="plain">, </span><span class="identifier">K_</span><span class="plain">##</span><span class="identifier">DATA</span><span class="plain">)) {</span>
            <span class="identifier">STRUCTURE</span><span class="plain"> *</span><span class="identifier">x1</span><span class="plain"> = </span><span class="identifier">FETCH</span><span class="plain">(</span><span class="identifier">spec1</span><span class="plain">);</span>
            <span class="identifier">STRUCTURE</span><span class="plain"> *</span><span class="identifier">x2</span><span class="plain"> = </span><span class="identifier">FETCH</span><span class="plain">(</span><span class="identifier">spec2</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">x1</span><span class="plain"> == </span><span class="identifier">x2</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="plain">}</span>
    <span class="definitionkeyword">define</span> <span class="identifier">KCOMPARE_CONSTANTS</span><span class="plain">(</span><span class="identifier">DATA</span><span class="plain">, </span><span class="identifier">STRUCTURE</span><span class="plain">)</span>
        <span class="identifier">KCOMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">DATA</span><span class="plain">, </span><span class="identifier">STRUCTURE</span><span class="plain">, </span><span class="identifier">Rvalues::to_</span><span class="plain">##</span><span class="identifier">STRUCTURE</span><span class="plain">)</span>
</pre>

<pre class="display">
    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Rvalues::compare_CONSTANT<button class="popup" onclick="togglePopup('usagePopup986')">...<span class="popuptext" id="usagePopup986">Usage of <b>Rvalues::compare_CONSTANT</b>:<br>Dash - <a href="14-ds2.html#SP11_6">&#167;11.6</a><br>Inferences - <a href="16-in.html#SP19">&#167;19</a><br>Complete Model World - <a href="16-cmw.html#SP1_2_2_1_1">&#167;1.2.2.1.1</a><br>Tables - <a href="19-tb.html#SP27_1_3_1_1">&#167;27.1.3.1.1</a><br>Compile Phrases - <a href="25-cp.html#SP5_3_5">&#167;5.3.5</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec1</span><span class="plain">, </span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec2</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::is</span><span class="plain">(</span><span class="identifier">spec1</span><span class="plain">, </span><span class="constant">CONSTANT_NT</span><span class="plain">) == </span><span class="identifier">FALSE</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::is</span><span class="plain">(</span><span class="identifier">spec2</span><span class="plain">, </span><span class="constant">CONSTANT_NT</span><span class="plain">) == </span><span class="identifier">FALSE</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">K1</span><span class="plain"> = </span><span class="identifier">ParseTree::get_kind_of_value</span><span class="plain">(</span><span class="identifier">spec1</span><span class="plain">);</span>
        <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">K2</span><span class="plain"> = </span><span class="identifier">ParseTree::get_kind_of_value</span><span class="plain">(</span><span class="identifier">spec2</span><span class="plain">);</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">Kinds::Compare::le</span><span class="plain">(</span><span class="identifier">K1</span><span class="plain">, </span><span class="identifier">K2</span><span class="plain">) == </span><span class="identifier">FALSE</span><span class="plain">) &amp;&amp;</span>
            <span class="plain">(</span><span class="identifier">Kinds::Compare::le</span><span class="plain">(</span><span class="identifier">K2</span><span class="plain">, </span><span class="identifier">K1</span><span class="plain">) == </span><span class="identifier">FALSE</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">K1</span><span class="plain">, </span><span class="identifier">K_text</span><span class="plain">)) {</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Wordings::match_perhaps_quoted</span><span class="plain">(</span>
                <span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec1</span><span class="plain">), </span><span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec2</span><span class="plain">))) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
            <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">switch</span><span class="plain"> (</span><span class="identifier">Kinds::Behaviour::get_constant_compilation_method</span><span class="plain">(</span><span class="identifier">K1</span><span class="plain">)) {</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">LITERAL_CCM:</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP7">Rvalues::to_encoded_notation</a></span><span class="plain">(</span><span class="identifier">spec1</span><span class="plain">) == </span><span class="functiontext"><a href="#SP7">Rvalues::to_encoded_notation</a></span><span class="plain">(</span><span class="identifier">spec2</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
                <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">NAMED_CONSTANT_CCM:</span><span class="plain"> {</span>
                <span class="reserved">instance</span><span class="plain"> *</span><span class="identifier">I1</span><span class="plain"> = </span><span class="functiontext"><a href="#SP3">Rvalues::to_instance</a></span><span class="plain">(</span><span class="identifier">spec1</span><span class="plain">);</span>
                <span class="reserved">instance</span><span class="plain"> *</span><span class="identifier">I2</span><span class="plain"> = </span><span class="functiontext"><a href="#SP3">Rvalues::to_instance</a></span><span class="plain">(</span><span class="identifier">spec2</span><span class="plain">);</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">I1</span><span class="plain"> == </span><span class="identifier">I2</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">TRUE</span><span class="plain">;</span>
                <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
            <span class="plain">}</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">SPECIAL_CCM:</span><span class="plain"> {</span>
                <span class="identifier">COMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">CON_activity</span><span class="plain">, </span><span class="reserved">activity</span><span class="plain">, </span><span class="functiontext"><a href="#SP2">Rvalues::to_activity</a></span><span class="plain">)</span>
                <span class="identifier">KKCOMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">object</span><span class="plain">, </span><span class="reserved">instance</span><span class="plain">, </span><span class="functiontext"><a href="#SP4">Rvalues::to_object_instance</a></span><span class="plain">)</span>
                <span class="identifier">COMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">CON_phrase</span><span class="plain">, </span><span class="reserved">constant_phrase</span><span class="plain">, </span><span class="functiontext"><a href="#SP2">Rvalues::to_constant_phrase</a></span><span class="plain">)</span>
                <span class="identifier">COMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">CON_property</span><span class="plain">, </span><span class="reserved">property</span><span class="plain">, </span><span class="functiontext"><a href="#SP2">Rvalues::to_property</a></span><span class="plain">)</span>
                <span class="identifier">COMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">CON_rule</span><span class="plain">, </span><span class="reserved">rule</span><span class="plain">, </span><span class="functiontext"><a href="#SP2">Rvalues::to_rule</a></span><span class="plain">)</span>
                <span class="identifier">COMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">CON_rulebook</span><span class="plain">, </span><span class="reserved">rulebook</span><span class="plain">, </span><span class="functiontext"><a href="#SP2">Rvalues::to_rulebook</a></span><span class="plain">)</span>
                <span class="identifier">COMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">CON_table_column</span><span class="plain">, </span><span class="reserved">table_column</span><span class="plain">, </span><span class="functiontext"><a href="#SP2">Rvalues::to_table_column</a></span><span class="plain">)</span>
                <span class="identifier">KCOMPARE_CONSTANTS</span><span class="plain">(</span><span class="reserved">equation</span><span class="plain">, </span><span class="reserved">equation</span><span class="plain">)</span>
                <span class="identifier">COMPARE_CONSTANTS_USING</span><span class="plain">(</span><span class="identifier">CON_relation</span><span class="plain">, </span><span class="reserved">binary_predicate</span><span class="plain">, </span><span class="functiontext"><a href="#SP2">Rvalues::to_binary_predicate</a></span><span class="plain">)</span>
                <span class="identifier">KCOMPARE_CONSTANTS</span><span class="plain">(</span><span class="reserved">rulebook_outcome</span><span class="plain">, </span><span class="reserved">named_rulebook_outcome</span><span class="plain">)</span>
                <span class="identifier">KCOMPARE_CONSTANTS</span><span class="plain">(</span><span class="reserved">table</span><span class="plain">, </span><span class="reserved">table</span><span class="plain">)</span>
                <span class="identifier">KCOMPARE_CONSTANTS</span><span class="plain">(</span><span class="reserved">use_option</span><span class="plain">, </span><span class="reserved">use_option</span><span class="plain">)</span>
                <span class="plain">#</span><span class="identifier">ifdef</span><span class="plain"> </span><span class="identifier">IF_MODULE</span>
                <span class="identifier">KCOMPARE_CONSTANTS</span><span class="plain">(</span><span class="identifier">action_name</span><span class="plain">, </span><span class="identifier">action_name</span><span class="plain">)</span>
                <span class="identifier">KCOMPARE_CONSTANTS</span><span class="plain">(</span><span class="identifier">scene</span><span class="plain">, </span><span class="identifier">scene</span><span class="plain">)</span>
                <span class="identifier">KCOMPARE_CONSTANTS</span><span class="plain">(</span><span class="identifier">understanding</span><span class="plain">, </span><span class="identifier">grammar_verb</span><span class="plain">)</span>
                <span class="plain">#</span><span class="identifier">endif</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">FALSE</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP21"></a><b>&#167;21. Pretty-printing. </b></p>

<pre class="display">
    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Rvalues::write_out_in_English<button class="popup" onclick="togglePopup('usagePopup987')">...<span class="popuptext" id="usagePopup987">Usage of <b>Rvalues::write_out_in_English</b>:<br>Specifications - <a href="14-sp.html#SP6">&#167;6</a></span></button></span><span class="plain">(</span><span class="identifier">OUTPUT_STREAM</span><span class="plain">, </span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">switch</span><span class="plain"> (</span><span class="identifier">ParseTree::get_type</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">)) {</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">PHRASE_TO_DECIDE_VALUE_NT:</span><span class="plain"> {</span>
                <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">dtr</span><span class="plain"> = </span><span class="functiontext"><a href="14-sp.html#SP1">Specifications::to_kind</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">dtr</span><span class="plain"> == </span><span class="identifier">NULL</span><span class="plain">) </span><span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"a phrase"</span><span class="plain">);</span>
                <span class="reserved">else</span><span class="plain"> {</span>
                    <span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"an instruction to work out "</span><span class="plain">);</span>
                    <span class="identifier">Kinds::Textual::write_articled</span><span class="plain">(</span><span class="identifier">OUT</span><span class="plain">, </span><span class="identifier">dtr</span><span class="plain">);</span>
                <span class="plain">}</span>
                <span class="reserved">break</span><span class="plain">;</span>
            <span class="plain">}</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">CONSTANT_NT:</span><span class="plain"> {</span>
                <span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain"> = </span><span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_construction</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">CON_property</span><span class="plain">)) {</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Wordings::nonempty</span><span class="plain">(</span><span class="identifier">W</span><span class="plain">)) </span><span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"%+W"</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
                    <span class="reserved">else</span><span class="plain"> </span><span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"the name of a property"</span><span class="plain">);</span>
                    <span class="reserved">return</span><span class="plain">;</span>
                <span class="plain">}</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Wordings::nonempty</span><span class="plain">(</span><span class="identifier">W</span><span class="plain">)) </span><span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"%+W"</span><span class="plain">, </span><span class="identifier">W</span><span class="plain">);</span>
                <span class="reserved">else</span><span class="plain"> {</span>
                    <span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"a nameless "</span><span class="plain">);</span>
                    <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">dtr</span><span class="plain"> = </span><span class="functiontext"><a href="14-sp.html#SP1">Specifications::to_kind</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
                    <span class="identifier">Kinds::Textual::write</span><span class="plain">(</span><span class="identifier">OUT</span><span class="plain">, </span><span class="identifier">dtr</span><span class="plain">);</span>
                <span class="plain">}</span>
                <span class="reserved">break</span><span class="plain">;</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP22"></a><b>&#167;22.  </b>And for the log:
</p>

<pre class="display">
    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Rvalues::log<button class="popup" onclick="togglePopup('usagePopup988')">...<span class="popuptext" id="usagePopup988">Usage of <b>Rvalues::log</b>:<br>Parse Tree Usage - <a href="7-ptu.html#SP14_1">&#167;14.1</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">switch</span><span class="plain"> (</span><span class="identifier">ParseTree::get_type</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">)) {</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">CONSTANT_NT:</span><span class="plain"> {</span>
                <span class="reserved">instance</span><span class="plain"> *</span><span class="identifier">I</span><span class="plain"> = </span><span class="functiontext"><a href="#SP3">Rvalues::to_instance</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">I</span><span class="plain">) </span><span class="identifier">LOG</span><span class="plain">(</span><span class="string">"(%~I)"</span><span class="plain">, </span><span class="identifier">I</span><span class="plain">);</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP4">Rvalues::is_object</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">)) {</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">self_object_ANNOT</span><span class="plain">)) </span><span class="identifier">LOG</span><span class="plain">(</span><span class="string">"(-self-)"</span><span class="plain">);</span>
                    <span class="reserved">else</span><span class="plain"> </span><span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">nothing_object_ANNOT</span><span class="plain">)) </span><span class="identifier">LOG</span><span class="plain">(</span><span class="string">"(-nothing-)"</span><span class="plain">);</span>
                    <span class="reserved">else</span><span class="plain"> </span><span class="identifier">LOG</span><span class="plain">(</span><span class="string">"($O)"</span><span class="plain">, </span><span class="functiontext"><a href="#SP3">Rvalues::to_instance</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">));</span>
                <span class="plain">}</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP23"></a><b>&#167;23. Compilation. </b>First: clearly everything in this family evaluates, but what kind does the
result have?
</p>

<pre class="display">
    <span class="identifier">kind</span><span class="plain"> *</span><span class="functiontext">Rvalues::to_kind<button class="popup" onclick="togglePopup('usagePopup989')">...<span class="popuptext" id="usagePopup989">Usage of <b>Rvalues::to_kind</b>:<br>Adjective Meanings - <a href="4-am.html#SP24">&#167;24</a><br>Literal Patterns - <a href="5-lp.html#SP34_5">&#167;34.5</a><br>Simplifications - <a href="11-sm.html#SP10_4">&#167;10.4</a><br>Specifications - <a href="14-sp.html#SP1">&#167;1</a><br>Lvalues - <a href="14-lv.html#SP12">&#167;12</a><br>Measurement Adjectives - <a href="15-ma.html#SP8_2">&#167;8.2</a></span></button></span><span class="plain">(</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">spec</span><span class="plain"> == </span><span class="identifier">NULL</span><span class="plain">) </span><span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"Rvalues::to_kind on NULL"</span><span class="plain">);</span>
        <span class="reserved">switch</span><span class="plain"> (</span><span class="identifier">ParseTree::get_type</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">)) {</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">CONSTANT_NT:</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP4">Rvalues::is_object</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">))</span>
                    &lt;<span class="cwebmacro">Work out the kind for a constant object</span> <span class="cwebmacronumber">23.1</span>&gt;<span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_construction</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">CON_relation</span><span class="plain">))</span>
                    &lt;<span class="cwebmacro">Work out the kind for a constant relation</span> <span class="cwebmacronumber">23.2</span>&gt;<span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_construction</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">CON_property</span><span class="plain">))</span>
                    &lt;<span class="cwebmacro">Work out the kind for a constant property name</span> <span class="cwebmacronumber">23.3</span>&gt;<span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_construction</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">CON_phrase</span><span class="plain">))</span>
                    &lt;<span class="cwebmacro">Work out the kind for a constant phrase</span> <span class="cwebmacronumber">23.6</span>&gt;<span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_construction</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">CON_list_of</span><span class="plain">))</span>
                    &lt;<span class="cwebmacro">Work out the kind for a constant list</span> <span class="cwebmacronumber">23.4</span>&gt;<span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="#SP19">Rvalues::is_CONSTANT_construction</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="identifier">CON_table_column</span><span class="plain">))</span>
                    &lt;<span class="cwebmacro">Work out the kind for a table column</span> <span class="cwebmacronumber">23.5</span>&gt;<span class="plain">;</span>
                <span class="reserved">return</span><span class="plain"> </span><span class="identifier">ParseTree::get_kind_of_value</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">PHRASE_TO_DECIDE_VALUE_NT:</span>
                &lt;<span class="cwebmacro">Work out the kind returned by a phrase</span> <span class="cwebmacronumber">23.7</span>&gt;<span class="plain">;</span>
        <span class="plain">}</span>
        <span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"unknown evaluating VALUE type"</span><span class="plain">); </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">NULL</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP23_1"></a><b>&#167;23.1.  </b>This is trickier than it looks. What kind shall we say that the constants
"nothing", "Cobbled Crawl", or "animal" have? The answer is the
narrowest we can: "nothing" comes out as "object", "Cobbled Crawl"
as "room" (a kind of object), "animal" as itself (ditto).
</p>


<p class="macrodefinition"><code class="display">
&lt;<span class="cwebmacrodefn">Work out the kind for a constant object</span> <span class="cwebmacronumber">23.1</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">self_object_ANNOT</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">K_object</span><span class="plain">;</span>
        <span class="reserved">else</span><span class="plain"> </span><span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">, </span><span class="constant">nothing_object_ANNOT</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">K_object</span><span class="plain">;</span>
        <span class="reserved">else</span><span class="plain"> {</span>
            <span class="reserved">instance</span><span class="plain"> *</span><span class="identifier">I</span><span class="plain"> = </span><span class="functiontext"><a href="#SP3">Rvalues::to_instance</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">I</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="functiontext"><a href="5-ins.html#SP18">Instances::to_kind</a></span><span class="plain">(</span><span class="identifier">I</span><span class="plain">);</span>
        <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP23">&#167;23</a>.</p>

<p class="inwebparagraph"><a id="SP23_2"></a><b>&#167;23.2.  </b>Not a base kind:
</p>


<p class="macrodefinition"><code class="display">
&lt;<span class="cwebmacrodefn">Work out the kind for a constant relation</span> <span class="cwebmacronumber">23.2</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">binary_predicate</span><span class="plain"> *</span><span class="identifier">bp</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_binary_predicate</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="functiontext"><a href="6-bp.html#SP22">BinaryPredicates::kind</a></span><span class="plain">(</span><span class="identifier">bp</span><span class="plain">);</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP23">&#167;23</a>.</p>

<p class="inwebparagraph"><a id="SP23_3"></a><b>&#167;23.3.  </b><code class="display">
&lt;<span class="cwebmacrodefn">Work out the kind for a constant property name</span> <span class="cwebmacronumber">23.3</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">property</span><span class="plain"> *</span><span class="identifier">prn</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_property</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">);</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">prn</span><span class="plain">-&gt;</span><span class="element">either_or</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">Kinds::unary_construction</span><span class="plain">(</span><span class="identifier">CON_property</span><span class="plain">, </span><span class="identifier">K_truth_state</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">Kinds::unary_construction</span><span class="plain">(</span><span class="identifier">CON_property</span><span class="plain">, </span><span class="functiontext"><a href="15-vp.html#SP5">Properties::Valued::kind</a></span><span class="plain">(</span><span class="identifier">prn</span><span class="plain">));</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP23">&#167;23</a>.</p>

<p class="inwebparagraph"><a id="SP23_4"></a><b>&#167;23.4.  </b><code class="display">
&lt;<span class="cwebmacrodefn">Work out the kind for a constant list</span> <span class="cwebmacronumber">23.4</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">return</span><span class="plain"> </span><span class="functiontext"><a href="18-lc.html#SP9">Lists::kind_of_list_at</a></span><span class="plain">(</span><span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">));</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP23">&#167;23</a>.</p>

<p class="inwebparagraph"><a id="SP23_5"></a><b>&#167;23.5.  </b><code class="display">
&lt;<span class="cwebmacrodefn">Work out the kind for a table column</span> <span class="cwebmacronumber">23.5</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">Kinds::unary_construction</span><span class="plain">(</span><span class="identifier">CON_table_column</span><span class="plain">,</span>
            <span class="functiontext"><a href="19-tc.html#SP6">Tables::Columns::get_kind</a></span><span class="plain">(</span><span class="functiontext"><a href="#SP2">Rvalues::to_table_column</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">)));</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP23">&#167;23</a>.</p>

<p class="inwebparagraph"><a id="SP23_6"></a><b>&#167;23.6.  </b>A timing issue here means that the kind will be vague until the second
assertion traverse:
</p>


<p class="macrodefinition"><code class="display">
&lt;<span class="cwebmacrodefn">Work out the kind for a constant phrase</span> <span class="cwebmacronumber">23.6</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">return</span><span class="plain"> </span><span class="functiontext"><a href="22-pav.html#SP5">Phrases::Constants::kind</a></span><span class="plain">(</span><span class="functiontext"><a href="#SP2">Rvalues::to_constant_phrase</a></span><span class="plain">(</span><span class="identifier">spec</span><span class="plain">));</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP23">&#167;23</a>.</p>

<p class="inwebparagraph"><a id="SP23_7"></a><b>&#167;23.7.  </b>This too is tricky. Some phrases to decide values are unambiguous. If
they say they are "To decide a rule: ...", then clearly the return value
will be a rule. But others are "polymorphic" &mdash; Greek for many-shaped,
but in this context, it means that the return value's kind depends on the
kinds of its arguments; addition is like this, for instance.
</p>

<p class="inwebparagraph">Compounding the problem is that we don't actually know which phrase will be
invoked &mdash; we only have a list of possibilities. All of them return values,
but those may have different kinds, and some may be polymorphic.
</p>

<p class="inwebparagraph">So what are we to do? First, we find the "deciding invocation": the first
entry in the list which has been passed by the type-checker, or if none of
them has, then the first entry of all. If the deciding invocation is of a
phrase with an unambiguous kind, then that's of course the answer. If it is
polymorphic, then we look to see if typechecking has already resolved the
difficulty by showing the result, and if so, then that's the answer. The
worst case, then, is when we have a polymorphic phrase and typechecking
hasn't yet sorted matters out &mdash; in that event we return simply "value"
as the kind, an extremely weak if certainly true answer.
</p>

<p class="inwebparagraph">We resort to returning <code class="display"><span class="extract">NULL</span></code>, an unknown kind, only when the invocation list
is empty. This should never happen except possibly after recovering from
some problem message.
</p>


<p class="macrodefinition"><code class="display">
&lt;<span class="cwebmacrodefn">Work out the kind returned by a phrase</span> <span class="cwebmacronumber">23.7</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">deciding_inv</span><span class="plain"> = </span><span class="identifier">spec</span><span class="plain">-&gt;</span><span class="identifier">down</span><span class="plain">-&gt;</span><span class="element">down</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">deciding_inv</span><span class="plain">) {</span>
            <span class="reserved">phrase</span><span class="plain"> *</span><span class="identifier">ph</span><span class="plain"> = </span><span class="identifier">ParseTree::get_phrase_invoked</span><span class="plain">(</span><span class="identifier">deciding_inv</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ph</span><span class="plain">) &amp;&amp; (</span><span class="functiontext"><a href="22-ptd.html#SP11">Phrases::TypeData::get_mor</a></span><span class="plain">(&amp;(</span><span class="identifier">ph</span><span class="plain">-&gt;</span><span class="element">type_data</span><span class="plain">)) == </span><span class="constant">DECIDES_VALUE_MOR</span><span class="plain">)) {</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="22-ptd.html#SP28">Phrases::TypeData::return_decided_dimensionally</a></span><span class="plain">(&amp;(</span><span class="identifier">ph</span><span class="plain">-&gt;</span><span class="element">type_data</span><span class="plain">))) {</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::get_kind_resulting</span><span class="plain">(</span><span class="identifier">deciding_inv</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ParseTree::get_kind_resulting</span><span class="plain">(</span><span class="identifier">deciding_inv</span><span class="plain">);</span>
                    <span class="reserved">return</span><span class="plain"> </span><span class="identifier">K_value</span><span class="plain">;</span>
                <span class="plain">} </span><span class="reserved">else</span><span class="plain"> {</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::get_kind_resulting</span><span class="plain">(</span><span class="identifier">deciding_inv</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ParseTree::get_kind_resulting</span><span class="plain">(</span><span class="identifier">deciding_inv</span><span class="plain">);</span>
                    <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">K</span><span class="plain"> = </span><span class="functiontext"><a href="22-ptd.html#SP11">Phrases::TypeData::get_return_kind</a></span><span class="plain">(&amp;(</span><span class="identifier">ph</span><span class="plain">-&gt;</span><span class="element">type_data</span><span class="plain">));</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Behaviour::definite</span><span class="plain">(</span><span class="identifier">K</span><span class="plain">) == </span><span class="identifier">FALSE</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">K_value</span><span class="plain">;</span>
                    <span class="reserved">return</span><span class="plain"> </span><span class="identifier">K</span><span class="plain">;</span>
                <span class="plain">}</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">NULL</span><span class="plain">;</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP23">&#167;23</a>.</p>

<p class="inwebparagraph"><a id="SP24"></a><b>&#167;24.  </b>And so to the code for compiling constants.
</p>

<pre class="display">
    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Rvalues::compile<button class="popup" onclick="togglePopup('usagePopup990')">...<span class="popuptext" id="usagePopup990">Usage of <b>Rvalues::compile</b>:<br>Compiling from Specifications - <a href="14-cfs.html#SP7">&#167;7</a></span></button></span><span class="plain">(</span><span class="identifier">value_holster</span><span class="plain"> *</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">spec_found</span><span class="plain">) {</span>
        <span class="reserved">switch</span><span class="plain">(</span><span class="identifier">ParseTree::get_type</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">)) {</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">PHRASE_TO_DECIDE_VALUE_NT:</span>
                <span class="functiontext"><a href="25-ci.html#SP3">Invocations::Compiler::compile_invocation_list</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">,</span>
                    <span class="identifier">spec_found</span><span class="plain">-&gt;</span><span class="element">down</span><span class="plain">-&gt;</span><span class="element">down</span><span class="plain">, </span><span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">));</span>
                <span class="reserved">break</span><span class="plain">;</span>
            <span class="reserved">case</span><span class="plain"> </span><span class="identifier">CONSTANT_NT:</span><span class="plain"> {</span>
                <span class="identifier">kind</span><span class="plain"> *</span><span class="identifier">kind_of_constant</span><span class="plain"> = </span><span class="identifier">ParseTree::get_kind_of_value</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
                <span class="reserved">int</span><span class="plain"> </span><span class="identifier">ccm</span><span class="plain"> = </span><span class="identifier">Kinds::Behaviour::get_constant_compilation_method</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">);</span>
                <span class="reserved">switch</span><span class="plain">(</span><span class="identifier">ccm</span><span class="plain">) {</span>
                    <span class="reserved">case</span><span class="plain"> </span><span class="identifier">NONE_CCM:</span><span class="plain"> </span><span class="comment"> constant values of this kind cannot exist</span>
                        <span class="identifier">LOG</span><span class="plain">(</span><span class="string">"SP: $P; kind: $u\n"</span><span class="plain">, </span><span class="identifier">spec_found</span><span class="plain">, </span><span class="identifier">kind_of_constant</span><span class="plain">);</span>
                        <span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"Tried to compile CONSTANT SP for a disallowed kind"</span><span class="plain">);</span>
                        <span class="reserved">return</span><span class="plain">;</span>
                    <span class="reserved">case</span><span class="plain"> </span><span class="identifier">LITERAL_CCM:</span><span class="plain"> </span>&lt;<span class="cwebmacro">Compile a literal-compilation-mode constant</span> <span class="cwebmacronumber">24.1</span>&gt;<span class="plain">; </span><span class="reserved">return</span><span class="plain">;</span>
                    <span class="reserved">case</span><span class="plain"> </span><span class="identifier">NAMED_CONSTANT_CCM:</span><span class="plain"> </span>&lt;<span class="cwebmacro">Compile a quantitative-compilation-mode constant</span> <span class="cwebmacronumber">24.2</span>&gt;<span class="plain">; </span><span class="reserved">return</span><span class="plain">;</span>
                    <span class="reserved">case</span><span class="plain"> </span><span class="identifier">SPECIAL_CCM:</span><span class="plain"> </span>&lt;<span class="cwebmacro">Compile a special-compilation-mode constant</span> <span class="cwebmacronumber">24.3</span>&gt;<span class="plain">; </span><span class="reserved">return</span><span class="plain">;</span>
                <span class="plain">}</span>
                <span class="reserved">break</span><span class="plain">;</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP24_1"></a><b>&#167;24.1.  </b>There are three basic compilation modes.
</p>

<p class="inwebparagraph">Here, the literal-parser is used to resolve the text of the SP to an integer.
I6 is typeless, of course, so it doesn't matter that this is not necessarily
a number: all that matters is that the correct integer value is compiled.
</p>


<p class="macrodefinition"><code class="display">
&lt;<span class="cwebmacrodefn">Compile a literal-compilation-mode constant</span> <span class="cwebmacronumber">24.1</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">N</span><span class="plain"> = </span><span class="functiontext"><a href="#SP8">Rvalues::to_int</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">))</span>
            <span class="identifier">Holsters::holster_pair</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">LITERAL_IVAL</span><span class="plain">, (</span><span class="identifier">inter_t</span><span class="plain">) </span><span class="identifier">N</span><span class="plain">);</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP24">&#167;24</a>.</p>

<p class="inwebparagraph"><a id="SP24_2"></a><b>&#167;24.2.  </b>Whereas here, an instance is attached.
</p>


<p class="macrodefinition"><code class="display">
&lt;<span class="cwebmacrodefn">Compile a quantitative-compilation-mode constant</span> <span class="cwebmacronumber">24.2</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">instance</span><span class="plain"> *</span><span class="identifier">I</span><span class="plain"> = </span><span class="identifier">ParseTree::get_constant_instance</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">I</span><span class="plain">) {</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">)) {</span>
                <span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">N</span><span class="plain"> = </span><span class="functiontext"><a href="5-ins.html#SP34">Instances::emitted_iname</a></span><span class="plain">(</span><span class="identifier">I</span><span class="plain">);</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">) </span><span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">N</span><span class="plain">);</span>
                <span class="reserved">else</span><span class="plain"> </span><span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"no iname for instance"</span><span class="plain">);</span>
            <span class="plain">}</span>
        <span class="plain">} </span><span class="reserved">else</span><span class="plain"> </span><span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"no instance"</span><span class="plain">);</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP24">&#167;24</a>.</p>

<p class="inwebparagraph"><a id="SP24_3"></a><b>&#167;24.3.  </b>Otherwise there are just miscellaneous different things to do in different
kinds of value:
</p>


<p class="macrodefinition"><code class="display">
&lt;<span class="cwebmacrodefn">Compile a special-compilation-mode constant</span> <span class="cwebmacronumber">24.3</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="26-pc.html#SP6">Plugins::Call::compile_constant</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">spec_found</span><span class="plain">))</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_activity</span><span class="plain">) {</span>
            <span class="reserved">activity</span><span class="plain"> *</span><span class="identifier">act</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_activity</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">N</span><span class="plain"> = </span><span class="functiontext"><a href="21-ac.html#SP9">Activities::iname</a></span><span class="plain">(</span><span class="identifier">act</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">) </span><span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">N</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_combination</span><span class="plain">) {</span>
            <span class="reserved">int</span><span class="plain"> </span><span class="identifier">NC</span><span class="plain"> = </span><span class="constant">0</span><span class="plain">;</span>
            <span class="reserved">for</span><span class="plain"> (</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">term</span><span class="plain"> = </span><span class="identifier">spec_found</span><span class="plain">-&gt;</span><span class="element">down</span><span class="plain">; </span><span class="identifier">term</span><span class="plain">; </span><span class="identifier">term</span><span class="plain"> = </span><span class="identifier">term</span><span class="plain">-&gt;</span><span class="element">next</span><span class="plain">) </span><span class="identifier">NC</span><span class="plain">++;</span>
            <span class="reserved">int</span><span class="plain"> </span><span class="identifier">NT</span><span class="plain"> = </span><span class="constant">0</span><span class="plain">, </span><span class="identifier">downs</span><span class="plain"> = </span><span class="constant">0</span><span class="plain">;</span>
            <span class="reserved">for</span><span class="plain"> (</span><span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">term</span><span class="plain"> = </span><span class="identifier">spec_found</span><span class="plain">-&gt;</span><span class="element">down</span><span class="plain">; </span><span class="identifier">term</span><span class="plain">; </span><span class="identifier">term</span><span class="plain"> = </span><span class="identifier">term</span><span class="plain">-&gt;</span><span class="element">next</span><span class="plain">) {</span>
                <span class="identifier">NT</span><span class="plain">++;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">NT</span><span class="plain"> &lt; </span><span class="identifier">NC</span><span class="plain">) {</span>
                    <span class="identifier">Produce::inv_primitive</span><span class="plain">(</span><span class="functiontext"><a href="27-em.html#SP2">Emit::tree</a></span><span class="plain">(), </span><span class="identifier">SEQUENTIAL_BIP</span><span class="plain">);</span>
                    <span class="identifier">Produce::down</span><span class="plain">(</span><span class="functiontext"><a href="27-em.html#SP2">Emit::tree</a></span><span class="plain">()); </span><span class="identifier">downs</span><span class="plain">++;</span>
                <span class="plain">}</span>
                <span class="functiontext"><a href="14-cfs.html#SP9">Specifications::Compiler::emit_as_val</a></span><span class="plain">(</span><span class="identifier">K_value</span><span class="plain">, </span><span class="identifier">term</span><span class="plain">);</span>
            <span class="plain">}</span>
            <span class="reserved">while</span><span class="plain"> (</span><span class="identifier">downs</span><span class="plain"> &gt; </span><span class="constant">0</span><span class="plain">) { </span><span class="identifier">Produce::up</span><span class="plain">(</span><span class="functiontext"><a href="27-em.html#SP2">Emit::tree</a></span><span class="plain">()); </span><span class="identifier">downs</span><span class="plain">--; }</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_equation</span><span class="plain">)) {</span>
            <span class="reserved">equation</span><span class="plain"> *</span><span class="identifier">eqn</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_equation</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">N</span><span class="plain"> = </span><span class="functiontext"><a href="20-eq.html#SP44">Equations::identifier</a></span><span class="plain">(</span><span class="identifier">eqn</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">) </span><span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">N</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_description</span><span class="plain">) {</span>
            <span class="functiontext"><a href="12-dtd.html#SP13">Calculus::Deferrals::compile_multiple_use_proposition</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">,</span>
                <span class="identifier">spec_found</span><span class="plain">, </span><span class="identifier">Kinds::unary_construction_material</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">));</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_list_of</span><span class="plain">) {</span>
            <span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">N</span><span class="plain"> = </span><span class="functiontext"><a href="18-lc.html#SP11">Lists::compile_literal_list</a></span><span class="plain">(</span><span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">));</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">) </span><span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">N</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_phrase</span><span class="plain">) {</span>
            <span class="reserved">constant_phrase</span><span class="plain"> *</span><span class="identifier">cphr</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_constant_phrase</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">N</span><span class="plain"> = </span><span class="functiontext"><a href="22-pav.html#SP7">Phrases::Constants::compile</a></span><span class="plain">(</span><span class="identifier">cphr</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">) </span><span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">N</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::le</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_object</span><span class="plain">)) {</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">, </span><span class="constant">self_object_ANNOT</span><span class="plain">)) {</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">)) {</span>
                    <span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="functiontext"><a href="27-hr.html#SP4">Hierarchy::find</a></span><span class="plain">(</span><span class="constant">SELF_HL</span><span class="plain">));</span>
                <span class="plain">}</span>
            <span class="plain">} </span><span class="reserved">else</span><span class="plain"> </span><span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">, </span><span class="constant">nothing_object_ANNOT</span><span class="plain">)) {</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">))</span>
                    <span class="identifier">Holsters::holster_pair</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">LITERAL_IVAL</span><span class="plain">, </span><span class="constant">0</span><span class="plain">);</span>
            <span class="plain">} </span><span class="reserved">else</span><span class="plain"> {</span>
                <span class="reserved">instance</span><span class="plain"> *</span><span class="identifier">I</span><span class="plain"> = </span><span class="functiontext"><a href="#SP3">Rvalues::to_instance</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">I</span><span class="plain">) {</span>
                    <span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">N</span><span class="plain"> = </span><span class="functiontext"><a href="5-ins.html#SP34">Instances::emitted_iname</a></span><span class="plain">(</span><span class="identifier">I</span><span class="plain">);</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">) </span><span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">N</span><span class="plain">);</span>
                <span class="plain">}</span>
                <span class="identifier">parse_node</span><span class="plain"> *</span><span class="identifier">NB</span><span class="plain"> = </span><span class="functiontext"><a href="25-cp.html#SP7">Routines::Compile::line_being_compiled</a></span><span class="plain">();</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">NB</span><span class="plain">) </span><span class="functiontext"><a href="5-ins.html#SP26">Instances::note_usage</a></span><span class="plain">(</span><span class="identifier">I</span><span class="plain">, </span><span class="identifier">NB</span><span class="plain">);</span>
            <span class="plain">}</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_property</span><span class="plain">) {</span>
            &lt;<span class="cwebmacro">Compile property constants</span> <span class="cwebmacronumber">24.3.1</span>&gt;<span class="plain">;</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_relation</span><span class="plain">) {</span>
            <span class="reserved">binary_predicate</span><span class="plain"> *</span><span class="identifier">bp</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_binary_predicate</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="functiontext"><a href="6-bp.html#SP42">BinaryPredicates::mark_as_needed</a></span><span class="plain">(</span><span class="identifier">bp</span><span class="plain">);</span>
            <span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">N</span><span class="plain"> = </span><span class="functiontext"><a href="6-bp.html#SP42">BinaryPredicates::iname</a></span><span class="plain">(</span><span class="identifier">bp</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">) </span><span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">N</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_rule</span><span class="plain">) {</span>
            <span class="reserved">rule</span><span class="plain"> *</span><span class="identifier">R</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_rule</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="functiontext"><a href="21-rl.html#SP19">Rules::iname</a></span><span class="plain">(</span><span class="identifier">R</span><span class="plain">));</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_rulebook</span><span class="plain">) {</span>
            <span class="reserved">rulebook</span><span class="plain"> *</span><span class="identifier">rb</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_rulebook</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">))</span>
                <span class="identifier">Holsters::holster_pair</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">LITERAL_IVAL</span><span class="plain">, (</span><span class="identifier">inter_t</span><span class="plain">) </span><span class="identifier">rb</span><span class="plain">-&gt;</span><span class="identifier">allocation_id</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_rulebook_outcome</span><span class="plain">)) {</span>
            <span class="reserved">named_rulebook_outcome</span><span class="plain"> *</span><span class="identifier">rbno</span><span class="plain"> =</span>
                <span class="functiontext"><a href="#SP2">Rvalues::to_named_rulebook_outcome</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">rbno</span><span class="plain">-&gt;</span><span class="element">nro_iname</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_table</span><span class="plain">)) {</span>
            <span class="reserved">table</span><span class="plain"> *</span><span class="identifier">t</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_table</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="functiontext"><a href="19-tb.html#SP14">Tables::identifier</a></span><span class="plain">(</span><span class="identifier">t</span><span class="plain">));</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::get_construct</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">) == </span><span class="identifier">CON_table_column</span><span class="plain">) {</span>
            <span class="reserved">table_column</span><span class="plain"> *</span><span class="identifier">tc</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_table_column</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">))</span>
                <span class="identifier">Holsters::holster_pair</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">LITERAL_IVAL</span><span class="plain">, (</span><span class="identifier">inter_t</span><span class="plain">) </span><span class="functiontext"><a href="19-tc.html#SP8">Tables::Columns::get_id</a></span><span class="plain">(</span><span class="identifier">tc</span><span class="plain">));</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_text</span><span class="plain">)) {</span>
            <span class="functiontext"><a href="17-rs.html#SP12">Strings::compile_general</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="plain">#</span><span class="identifier">ifdef</span><span class="plain"> </span><span class="identifier">IF_MODULE</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">K_understanding</span><span class="plain">) &amp;&amp; (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_understanding</span><span class="plain">))) {</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Wordings::empty</span><span class="plain">(</span><span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">)))</span>
                <span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"Text no longer available for CONSTANT/UNDERSTANDING"</span><span class="plain">);</span>
            <span class="identifier">inter_t</span><span class="plain"> </span><span class="identifier">v1</span><span class="plain"> = </span><span class="constant">0</span><span class="plain">, </span><span class="identifier">v2</span><span class="plain"> = </span><span class="constant">0</span><span class="plain">;</span>
            <span class="identifier">PL::Parsing::compile_understanding</span><span class="plain">(&amp;</span><span class="identifier">v1</span><span class="plain">, &amp;</span><span class="identifier">v2</span><span class="plain">, </span><span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">), </span><span class="identifier">FALSE</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">)) {</span>
                <span class="identifier">Holsters::holster_pair</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">v1</span><span class="plain">, </span><span class="identifier">v2</span><span class="plain">);</span>
            <span class="plain">}</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="plain">#</span><span class="identifier">endif</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_use_option</span><span class="plain">)) {</span>
            <span class="reserved">use_option</span><span class="plain"> *</span><span class="identifier">uo</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_use_option</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">))</span>
                <span class="identifier">Holsters::holster_pair</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">LITERAL_IVAL</span><span class="plain">, (</span><span class="identifier">inter_t</span><span class="plain">) </span><span class="identifier">uo</span><span class="plain">-&gt;</span><span class="identifier">allocation_id</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_verb</span><span class="plain">)) {</span>
            <span class="identifier">verb_form</span><span class="plain"> *</span><span class="identifier">vf</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_verb_form</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">Verbs::form_iname</span><span class="plain">(</span><span class="identifier">vf</span><span class="plain">));</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Kinds::Compare::eq</span><span class="plain">(</span><span class="identifier">kind_of_constant</span><span class="plain">, </span><span class="identifier">K_response</span><span class="plain">)) {</span>
            <span class="reserved">rule</span><span class="plain"> *</span><span class="identifier">R</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_rule</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
            <span class="reserved">int</span><span class="plain"> </span><span class="identifier">c</span><span class="plain"> = </span><span class="identifier">ParseTree::int_annotation</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">, </span><span class="constant">response_code_ANNOT</span><span class="plain">);</span>
            <span class="identifier">inter_name</span><span class="plain"> *</span><span class="identifier">iname</span><span class="plain"> = </span><span class="functiontext"><a href="17-rs.html#SP4">Strings::response_constant_iname</a></span><span class="plain">(</span><span class="identifier">R</span><span class="plain">, </span><span class="identifier">c</span><span class="plain">);</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">iname</span><span class="plain">) </span><span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">iname</span><span class="plain">);</span>
            <span class="reserved">else</span><span class="plain"> </span><span class="identifier">Holsters::holster_pair</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="identifier">LITERAL_IVAL</span><span class="plain">, </span><span class="constant">0</span><span class="plain">);</span>
            <span class="functiontext"><a href="21-rl.html#SP26">Rules::now_rule_needs_response</a></span><span class="plain">(</span><span class="identifier">R</span><span class="plain">, </span><span class="identifier">c</span><span class="plain">, </span><span class="identifier">EMPTY_WORDING</span><span class="plain">);</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>

        <span class="identifier">LOG</span><span class="plain">(</span><span class="string">"Kov is $u\n"</span><span class="plain">, </span><span class="identifier">kind_of_constant</span><span class="plain">);</span>
        <span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"no special ccm provided"</span><span class="plain">);</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP24">&#167;24</a>.</p>

<p class="inwebparagraph"><a id="SP24_3_1"></a><b>&#167;24.3.1.  </b>The interesting, read "unfortunate", case is that of constant property
names. The curiosity here is that it's legal to store the nameless negation
of an either/or property in a "property" constant. This is purely so that
the following ungainly syntax works:
</p>

<blockquote>
    <p>change X to not P;</p>

</blockquote>

<p class="inwebparagraph">Recall that in Inform 6 syntax, an attribute <code class="display"><span class="extract">attr</span></code> can be negated in sense
in several contexts by using a tilde: <code class="display"><span class="extract">~attr</span></code>.
</p>


<p class="macrodefinition"><code class="display">
&lt;<span class="cwebmacrodefn">Compile property constants</span> <span class="cwebmacronumber">24.3.1</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="reserved">property</span><span class="plain"> *</span><span class="identifier">prn</span><span class="plain"> = </span><span class="functiontext"><a href="#SP2">Rvalues::to_property</a></span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">);</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">prn</span><span class="plain"> == </span><span class="identifier">NULL</span><span class="plain">) </span><span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"PROPERTY SP with null property"</span><span class="plain">);</span>

        <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="15-pr.html#SP16">Properties::is_either_or</a></span><span class="plain">(</span><span class="identifier">prn</span><span class="plain">)) {</span>
            <span class="reserved">int</span><span class="plain"> </span><span class="identifier">parity</span><span class="plain"> = </span><span class="constant">1</span><span class="plain">;</span>
            <span class="reserved">property</span><span class="plain"> *</span><span class="identifier">prn_to_eval</span><span class="plain"> = </span><span class="identifier">prn</span><span class="plain">;</span>
            <span class="reserved">if</span><span class="plain"> (&lt;</span><span class="identifier">negated</span><span class="plain">-</span><span class="identifier">clause</span><span class="plain">&gt;(</span><span class="identifier">ParseTree::get_text</span><span class="plain">(</span><span class="identifier">spec_found</span><span class="plain">))) </span><span class="identifier">parity</span><span class="plain"> = -1;</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="functiontext"><a href="15-ep.html#SP7">Properties::EitherOr::stored_in_negation</a></span><span class="plain">(</span><span class="identifier">prn</span><span class="plain">)) {</span>
                <span class="identifier">parity</span><span class="plain"> = -</span><span class="identifier">parity</span><span class="plain">;</span>
                <span class="identifier">prn_to_eval</span><span class="plain"> = </span><span class="functiontext"><a href="15-ep.html#SP6">Properties::EitherOr::get_negation</a></span><span class="plain">(</span><span class="identifier">prn_to_eval</span><span class="plain">);</span>
            <span class="plain">}</span>

            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">)) {</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">parity</span><span class="plain"> == </span><span class="constant">1</span><span class="plain">) {</span>
                    <span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="functiontext"><a href="15-pr.html#SP27">Properties::iname</a></span><span class="plain">(</span><span class="identifier">prn_to_eval</span><span class="plain">));</span>
                <span class="plain">} </span><span class="reserved">else</span><span class="plain"> {</span>
                    <span class="identifier">Problems::Issue::sentence_problem</span><span class="plain">(</span><span class="functiontext"><a href="1-wtc.html#SP5">Task::syntax_tree</a></span><span class="plain">(), </span><span class="identifier">_p_</span><span class="plain">(</span><span class="identifier">Untestable</span><span class="plain">),</span>
                        <span class="string">"this refers to an either-or property with a negative "</span>
                        <span class="string">"that I can't unravel'"</span><span class="plain">,</span>
                        <span class="string">"which normally never happens. (Are you using 'change' "</span>
                        <span class="string">"instead of 'now'?"</span><span class="plain">);</span>
                <span class="plain">}</span>
            <span class="plain">}</span>
        <span class="plain">} </span><span class="reserved">else</span><span class="plain"> {</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Holsters::data_acceptable</span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">)) {</span>
                <span class="functiontext"><a href="27-em.html#SP4">Emit::holster</a></span><span class="plain">(</span><span class="identifier">VH</span><span class="plain">, </span><span class="functiontext"><a href="15-pr.html#SP27">Properties::iname</a></span><span class="plain">(</span><span class="identifier">prn</span><span class="plain">));</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP24_3">&#167;24.3</a>.</p>

<hr class="tocbar">
<ul class="toc"><li><a href="14-sp.html">Back to 'Specifications'</a></li><li><a href="14-lv.html">Continue with 'Lvalues'</a></li></ul><hr class="tocbar">
<!--End of weave-->
<script>
function togglePopup(material_id) {
  var popup = document.getElementById(material_id);
  popup.classList.toggle("show");
}
</script>

<link href="Popups.css" rel="stylesheet" rev="stylesheet" type="text/css">
		</main>
	</body>
</html>


<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>26/iti</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">
		<link href="inweb.css" rel="stylesheet" rev="stylesheet" type="text/css">
	</head>
	<body>

<!--Weave of '26/pl' generated by 7-->
<ul class="crumbs"><li><a href="../webs.html">&#9733;</a></li><li><a href="index.html">core</a></li><li><a href="index.html#26">Chapter 26: Compilation Utilities</a></li><li><b>Plugins</b></li></ul><p class="purpose">To manage the interface between core Inform and some of its outlying or domain-specific components.</p>

<ul class="toc"><li><a href="#SP1">&#167;1. Definitions</a></li><li><a href="#SP4">&#167;4. Names of the great plugins</a></li><li><a href="#SP7">&#167;7. Plugins</a></li></ul><hr class="tocbar">

<p class="inwebparagraph"><a id="SP1"></a><b>&#167;1. Definitions. </b></p>

<p class="inwebparagraph"><a id="SP2"></a><b>&#167;2.  </b></p>


<pre class="definitions">
    <span class="definitionkeyword">define</span> <span class="constant">MAX_PLUGINS</span><span class="plain"> 20</span>
</pre>

<pre class="display">
    <span class="reserved">typedef</span><span class="plain"> </span><span class="reserved">struct</span><span class="plain"> </span><span class="reserved">plugin</span><span class="plain"> {</span>
        <span class="reserved">struct</span><span class="plain"> </span><span class="identifier">word_assemblage</span><span class="plain"> </span><span class="identifier">plugin_name</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">plugin_number</span><span class="plain">;</span>
        <span class="reserved">struct</span><span class="plain"> </span><span class="identifier">word_assemblage</span><span class="plain"> </span><span class="identifier">set_name</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">set_number</span><span class="plain">;</span>
        <span class="reserved">void</span><span class="plain"> *</span><span class="identifier">starter_routine</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">now_plugged_in</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">stores_data</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">has_been_set_explicitly</span><span class="plain">;</span>
        <span class="reserved">char</span><span class="plain"> *</span><span class="identifier">has_template_file</span><span class="plain">;</span>
        <span class="reserved">struct</span><span class="plain"> </span><span class="reserved">inter_name</span><span class="plain"> *</span><span class="identifier">IFDEF_iname</span><span class="plain">;</span>
        <span class="identifier">MEMORY_MANAGEMENT</span>
    <span class="plain">} </span><span class="reserved">plugin</span><span class="plain">;</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">The structure plugin is private to this section.</p>

<p class="inwebparagraph"><a id="SP3"></a><b>&#167;3.  </b></p>


<pre class="display">
    <span class="reserved">plugin</span><span class="plain"> *</span><span class="identifier">core_plugin</span><span class="plain">, *</span><span class="identifier">IF_plugin</span><span class="plain">, *</span><span class="identifier">counting_plugin</span><span class="plain">, *</span><span class="identifier">multimedia_plugin</span><span class="plain">,</span>
        <span class="plain">*</span><span class="identifier">naming_plugin</span><span class="plain">, *</span><span class="identifier">parsing_plugin</span><span class="plain">, *</span><span class="identifier">actions_plugin</span><span class="plain">,</span>
        <span class="plain">*</span><span class="identifier">spatial_plugin</span><span class="plain">, *</span><span class="identifier">map_plugin</span><span class="plain">, *</span><span class="identifier">player_plugin</span><span class="plain">, *</span><span class="identifier">regions_plugin</span><span class="plain">, *</span><span class="identifier">backdrops_plugin</span><span class="plain">,</span>
        <span class="plain">*</span><span class="identifier">showme_plugin</span><span class="plain">,</span>
        <span class="plain">*</span><span class="identifier">times_plugin</span><span class="plain">, *</span><span class="identifier">scenes_plugin</span><span class="plain">, *</span><span class="identifier">scoring_plugin</span><span class="plain">,</span>
        <span class="plain">*</span><span class="identifier">figures_plugin</span><span class="plain">, *</span><span class="identifier">sounds_plugin</span><span class="plain">, *</span><span class="identifier">files_plugin</span><span class="plain">,</span>
        <span class="plain">*</span><span class="identifier">bibliographic_plugin</span><span class="plain">;</span>

    <span class="reserved">plugin</span><span class="plain"> *</span><span class="identifier">registered_plugins</span><span class="plain">[</span><span class="constant">MAX_PLUGINS</span><span class="plain">];</span>

    <span class="plain">#</span><span class="identifier">ifdef</span><span class="plain"> </span><span class="identifier">IF_MODULE</span>
    <span class="reserved">sentence_handler</span><span class="plain"> </span><span class="identifier">BIBLIOGRAPHIC_SH_handler</span><span class="plain"> =</span>
        <span class="plain">{ </span><span class="constant">BIBLIOGRAPHIC_NT</span><span class="plain">, -1, 2, </span><span class="identifier">PL::Bibliographic::bibliographic_data</span><span class="plain"> };</span>
    <span class="plain">#</span><span class="identifier">endif</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP4"></a><b>&#167;4. Names of the great plugins. </b>Although Inform was specifically written to create programs within a complex
and unusual domain (interactive fiction), almost all of its code is quite
general, and could be used for any natural-language programming.
</p>

<p class="inwebparagraph">We want to facilitate possible future uses of Inform in domains other than
IF, and in any case it seems good design to isolate generic linguistic
assumptions from those which are based on contextual knowledge of a given
domain.
</p>

<p class="inwebparagraph">"Core" is the core of the Inform language, the largest part, which is
compulsorily included. "Interactive fiction" is an anthology of all of
the rest &mdash; using it uses all of them.
</p>

<p class="inwebparagraph">For now, at least, these names should not be translated out of English.
</p>


<pre class="display">
    <span class="plain">&lt;</span><span class="reserved">plugin</span><span class="plain">-</span><span class="identifier">name</span><span class="plain">&gt; ::=</span>
        <span class="identifier">core</span><span class="plain"> |</span>
        <span class="reserved">instance</span><span class="plain"> </span><span class="identifier">counting</span><span class="plain"> |</span>
        <span class="identifier">interactive</span><span class="plain"> </span><span class="identifier">fiction</span><span class="plain"> |</span>
        <span class="identifier">multimedia</span><span class="plain"> |</span>
        <span class="identifier">naming</span><span class="plain"> |</span>
        <span class="identifier">command</span><span class="plain"> |</span>
        <span class="identifier">actions</span><span class="plain"> |</span>
        <span class="identifier">spatial</span><span class="plain"> </span><span class="identifier">model</span><span class="plain"> |</span>
        <span class="identifier">mapping</span><span class="plain"> |</span>
        <span class="identifier">player</span><span class="plain"> |</span>
        <span class="identifier">regions</span><span class="plain"> |</span>
        <span class="identifier">backdrops</span><span class="plain"> |</span>
        <span class="identifier">showme</span><span class="plain"> |</span>
        <span class="identifier">times</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">day</span><span class="plain"> |</span>
        <span class="identifier">scenes</span><span class="plain"> |</span>
        <span class="identifier">figures</span><span class="plain"> |</span>
        <span class="identifier">sounds</span><span class="plain"> |</span>
        <span class="identifier">glulx</span><span class="plain"> </span><span class="identifier">external</span><span class="plain"> </span><span class="identifier">files</span><span class="plain"> |</span>
        <span class="identifier">bibliographic</span><span class="plain"> </span><span class="identifier">data</span><span class="plain"> |</span>
        <span class="identifier">scoring</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP5"></a><b>&#167;5.  </b>And the following matches if and only if the text in question is (a) a
valid plugin name, and (b) the name of a plugin which is being used at
present.
</p>


<pre class="display">
    <span class="plain">&lt;</span><span class="identifier">language</span><span class="plain">-</span><span class="identifier">element</span><span class="plain">&gt; ::=</span>
        <span class="plain">&lt;</span><span class="reserved">plugin</span><span class="plain">-</span><span class="identifier">name</span><span class="plain">&gt;	==&gt; </span><span class="identifier">TRUE</span><span class="plain">; </span><span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">registered_plugins</span><span class="plain">[</span><span class="identifier">R</span><span class="plain">[1]] == </span><span class="identifier">NULL</span><span class="plain">) || (</span><span class="identifier">registered_plugins</span><span class="plain">[</span><span class="identifier">R</span><span class="plain">[1]]-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> == </span><span class="identifier">FALSE</span><span class="plain">)) *</span><span class="identifier">X</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP6"></a><b>&#167;6.  </b></p>


<pre class="display">
    <span class="identifier">word_assemblage</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::wording</span><span class="plain">(</span><span class="reserved">int</span><span class="plain"> </span><span class="identifier">N</span><span class="plain">) {</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">Preform::Nonparsing::wording</span><span class="plain">(&lt;</span><span class="reserved">plugin</span><span class="plain">-</span><span class="identifier">name</span><span class="plain">&gt;, </span><span class="identifier">N</span><span class="plain">);</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">The function Plugins::Manage::wording is used in <a href="#SP7">&#167;7</a>.</p>

<p class="inwebparagraph"><a id="SP7"></a><b>&#167;7. Plugins. </b></p>


<pre class="definitions">
    <span class="definitionkeyword">define</span> <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">P</span><span class="plain">, </span><span class="identifier">starter</span><span class="plain">, </span><span class="identifier">mem</span><span class="plain">, </span><span class="identifier">NA</span><span class="plain">, </span><span class="identifier">NA2</span><span class="plain">)</span>
        <span class="identifier">P</span><span class="plain"> = </span><span class="identifier">CREATE</span><span class="plain">(</span><span class="reserved">plugin</span><span class="plain">);</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;starter_routine</span><span class="plain"> = (</span><span class="reserved">void</span><span class="plain"> *) (&amp;</span><span class="identifier">starter</span><span class="plain">);</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;stores_data</span><span class="plain"> = </span><span class="identifier">mem</span><span class="plain">;</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;plugin_name</span><span class="plain"> = </span><span class="functiontext">Plugins::Manage::wording</span><span class="plain">(</span><span class="identifier">NA</span><span class="plain">);</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;plugin_number</span><span class="plain"> = </span><span class="identifier">NA</span><span class="plain">;</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;set_name</span><span class="plain"> = </span><span class="functiontext">Plugins::Manage::wording</span><span class="plain">(</span><span class="identifier">NA2</span><span class="plain">);</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;set_number</span><span class="plain"> = </span><span class="identifier">NA2</span><span class="plain">;</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain"> = </span><span class="identifier">NULL</span><span class="plain">;</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;IFDEF_iname</span><span class="plain"> = </span><span class="identifier">NULL</span><span class="plain">;</span>
        <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;has_been_set_explicitly</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="identifier">registered_plugins</span><span class="plain">[</span><span class="identifier">NA</span><span class="plain">] = </span><span class="identifier">P</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">-&gt;</span><span class="identifier">allocation_id</span><span class="plain"> &gt;= </span><span class="constant">MAX_PLUGINS</span><span class="plain">) </span><span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"Too many plugins"</span><span class="plain">);</span>
</pre>
<p class="inwebparagraph"><a id="SP8"></a><b>&#167;8.  </b></p>


<pre class="definitions">
    <span class="definitionkeyword">define</span> <span class="constant">CORE_PLUGIN_NAME</span><span class="plain"> 0</span>
    <span class="definitionkeyword">define</span> <span class="constant">INSTANCE_COUNTING_PLUGIN_NAME</span><span class="plain"> 1</span>
    <span class="definitionkeyword">define</span> <span class="constant">IF_PLUGIN_NAME</span><span class="plain"> 2</span>
    <span class="definitionkeyword">define</span> <span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain"> 3</span>
    <span class="definitionkeyword">define</span> <span class="constant">NAMING_PLUGIN_NAME</span><span class="plain"> 4</span>
    <span class="definitionkeyword">define</span> <span class="constant">COMMAND_PLUGIN_NAME</span><span class="plain"> 5</span>
    <span class="definitionkeyword">define</span> <span class="constant">ACTIONS_PLUGIN_NAME</span><span class="plain"> 6</span>
    <span class="definitionkeyword">define</span> <span class="constant">SPATIAL_MODEL_PLUGIN_NAME</span><span class="plain"> 7</span>
    <span class="definitionkeyword">define</span> <span class="constant">MAPPING_PLUGIN_NAME</span><span class="plain"> 8</span>
    <span class="definitionkeyword">define</span> <span class="constant">PLAYER_PLUGIN_NAME</span><span class="plain"> 9</span>
    <span class="definitionkeyword">define</span> <span class="constant">REGIONS_PLUGIN_NAME</span><span class="plain"> 10</span>
    <span class="definitionkeyword">define</span> <span class="constant">BACKDROPS_PLUGIN_NAME</span><span class="plain"> 11</span>
    <span class="definitionkeyword">define</span> <span class="constant">SHOWME_PLUGIN_NAME</span><span class="plain"> 12</span>
    <span class="definitionkeyword">define</span> <span class="constant">TIMES_OF_DAY_PLUGIN_NAME</span><span class="plain"> 13</span>
    <span class="definitionkeyword">define</span> <span class="constant">SCENES_PLUGIN_NAME</span><span class="plain"> 14</span>
    <span class="definitionkeyword">define</span> <span class="constant">FIGURES_PLUGIN_NAME</span><span class="plain"> 15</span>
    <span class="definitionkeyword">define</span> <span class="constant">SOUNDS_PLUGIN_NAME</span><span class="plain"> 16</span>
    <span class="definitionkeyword">define</span> <span class="constant">GLULX_EXTERNAL_FILES_PLUGIN_NAME</span><span class="plain"> 17</span>
    <span class="definitionkeyword">define</span> <span class="constant">BIBLIOGRAPHIC_DATA_PLUGIN_NAME</span><span class="plain"> 18</span>
    <span class="definitionkeyword">define</span> <span class="constant">SCORE_PLUGIN_NAME</span><span class="plain"> 19</span>
</pre>

<pre class="display">
    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::start</span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
        <span class="functiontext">Plugins::Call::initialise_calls</span><span class="plain">();</span>

        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">core_plugin</span><span class="plain">, </span><span class="functiontext">Plugins::Manage::start_core</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">CORE_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">CORE_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">core_plugin</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="identifier">core_plugin</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain"> = </span><span class="string">"Core"</span><span class="plain">;</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">counting_plugin</span><span class="plain">, </span><span class="functiontext">PL::Counting::start</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">, </span><span class="constant">INSTANCE_COUNTING_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">CORE_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">counting_plugin</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>

        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">IF_plugin</span><span class="plain">, </span><span class="functiontext">Plugins::Manage::deactivated_start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>

        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">multimedia_plugin</span><span class="plain">, </span><span class="functiontext">Plugins::Manage::deactivated_start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">);</span>

        <span class="plain">#</span><span class="identifier">ifndef</span><span class="plain"> </span><span class="identifier">IF_MODULE</span>
        <span class="identifier">IF_plugin</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="plain">#</span><span class="identifier">endif</span>

        <span class="plain">#</span><span class="identifier">ifdef</span><span class="plain"> </span><span class="identifier">IF_MODULE</span>
        <span class="identifier">IF_plugin</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">naming_plugin</span><span class="plain">, </span><span class="identifier">PL::Naming::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">NAMING_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">parsing_plugin</span><span class="plain">, </span><span class="identifier">PL::Parsing::Visibility::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">COMMAND_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">actions_plugin</span><span class="plain">, </span><span class="identifier">PL::Actions::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">ACTIONS_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">actions_plugin</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain"> = </span><span class="string">"Actions"</span><span class="plain">;</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">spatial_plugin</span><span class="plain">, </span><span class="identifier">PL::Spatial::start</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">, </span><span class="constant">SPATIAL_MODEL_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">map_plugin</span><span class="plain">, </span><span class="identifier">PL::Map::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">MAPPING_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">player_plugin</span><span class="plain">, </span><span class="identifier">PL::Player::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">PLAYER_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">scoring_plugin</span><span class="plain">, </span><span class="identifier">PL::Score::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">SCORE_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">regions_plugin</span><span class="plain">, </span><span class="identifier">PL::Regions::start</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">, </span><span class="constant">REGIONS_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">backdrops_plugin</span><span class="plain">, </span><span class="identifier">PL::Backdrops::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">BACKDROPS_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">showme_plugin</span><span class="plain">, </span><span class="identifier">PL::Showme::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">SHOWME_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>

        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">times_plugin</span><span class="plain">, </span><span class="functiontext">PL::TimesOfDay::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">TIMES_OF_DAY_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">times_plugin</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain"> = </span><span class="string">"Times"</span><span class="plain">;</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">scenes_plugin</span><span class="plain">, </span><span class="identifier">PL::Scenes::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">SCENES_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">scenes_plugin</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain"> = </span><span class="string">"Scenes"</span><span class="plain">;</span>

        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">bibliographic_plugin</span><span class="plain">, </span><span class="identifier">PL::Bibliographic::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">BIBLIOGRAPHIC_DATA_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="plain">#</span><span class="identifier">endif</span>

        <span class="plain">#</span><span class="identifier">ifdef</span><span class="plain"> </span><span class="identifier">MULTIMEDIA_MODULE</span>
        <span class="identifier">multimedia_plugin</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>

        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">figures_plugin</span><span class="plain">, </span><span class="identifier">PL::Figures::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">FIGURES_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">figures_plugin</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain"> = </span><span class="string">"Figures"</span><span class="plain">;</span>

        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">sounds_plugin</span><span class="plain">, </span><span class="identifier">PL::Sounds::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">SOUNDS_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">sounds_plugin</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain"> = </span><span class="string">"Sounds"</span><span class="plain">;</span>

        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">files_plugin</span><span class="plain">, </span><span class="identifier">PL::Files::start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">GLULX_EXTERNAL_FILES_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">files_plugin</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain"> = </span><span class="string">"Files"</span><span class="plain">;</span>
        <span class="identifier">files_plugin</span><span class="plain">-</span><span class="element">&gt;IFDEF_iname</span><span class="plain"> = </span><span class="functiontext">InterNames::iname</span><span class="plain">(</span><span class="constant">PLUGIN_FILES_INAME</span><span class="plain">);</span>
        <span class="plain">#</span><span class="identifier">endif</span>

        <span class="plain">#</span><span class="identifier">ifndef</span><span class="plain"> </span><span class="identifier">MULTIMEDIA_MODULE</span>
        <span class="identifier">multimedia_plugin</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">figures_plugin</span><span class="plain">, </span><span class="functiontext">Plugins::Manage::deactivated_start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">FIGURES_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">sounds_plugin</span><span class="plain">, </span><span class="functiontext">Plugins::Manage::deactivated_start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">SOUNDS_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="identifier">CREATE_PLUGIN</span><span class="plain">(</span><span class="identifier">files_plugin</span><span class="plain">, </span><span class="functiontext">Plugins::Manage::deactivated_start</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">, </span><span class="constant">GLULX_EXTERNAL_FILES_PLUGIN_NAME</span><span class="plain">, </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">);</span>
        <span class="plain">#</span><span class="identifier">endif</span>
    <span class="plain">}</span>

    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::deactivated_start</span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
    <span class="plain">}</span>

    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::start_core</span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">The function Plugins::Manage::start is used in 1/mr (<a href="1-mr.html#SP4_7">&#167;4.7</a>).</p>

<p class="endnote">The function Plugins::Manage::deactivated_start appears nowhere else.</p>

<p class="endnote">The function Plugins::Manage::start_core appears nowhere else.</p>

<p class="inwebparagraph"><a id="SP9"></a><b>&#167;9.  </b>Although most of Inform's brain remains the same, the outermost part can
be put together from whatever skills are required: our modular oblongata,
if you will. So, in principle, sentences like:
</p>

<blockquote>
    <p>Use regions language element.</p>

</blockquote>

<blockquote>
    <p>Use no figures language element.</p>

</blockquote>

<p class="inwebparagraph">can change the current setup. (In practice, these aren't very useful at
present, at least, because the I6 template won't compile under most
combinations; so this is really a provisional feature for now.)
</p>

<p class="inwebparagraph">"Core" is a special case. It can't be removed; explicitly writing
</p>

<blockquote>
    <p>Use core language element.</p>

</blockquote>

<p class="inwebparagraph">unplugs all other plugins, reducing Inform to a non-IF language entirely.
</p>

<p class="inwebparagraph">The subject noun phrase is an articled list, and each entry is parsed
with the following.
</p>


<pre class="display">
    <span class="plain">&lt;</span><span class="identifier">use</span><span class="plain">-</span><span class="identifier">language</span><span class="plain">-</span><span class="identifier">element</span><span class="plain">-</span><span class="identifier">sentence</span><span class="plain">-</span><span class="identifier">subject</span><span class="plain">&gt; ::=</span>
        <span class="identifier">no</span><span class="plain"> &lt;</span><span class="reserved">plugin</span><span class="plain">-</span><span class="identifier">name</span><span class="plain">&gt; |		==&gt; </span><span class="constant">PLUGIN_REMOVAL_OFFSET</span><span class="plain"> + </span><span class="identifier">R</span><span class="plain">[1]</span>
        <span class="plain">&lt;</span><span class="reserved">plugin</span><span class="plain">-</span><span class="identifier">name</span><span class="plain">&gt; |			==&gt; </span><span class="identifier">R</span><span class="plain">[1]</span>
        <span class="plain">...						==&gt; </span>&lt;<span class="cwebmacro">Issue PM_NoSuchLanguageElement problem</span> <span class="cwebmacronumber">9.1</span>&gt;
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP9_1"></a><b>&#167;9.1.  </b><code class="display">
&lt;<span class="cwebmacrodefn">Issue PM_NoSuchLanguageElement problem</span> <span class="cwebmacronumber">9.1</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="plain">*</span><span class="identifier">X</span><span class="plain"> = -1;</span>
        <span class="identifier">Problems::Issue::sentence_problem</span><span class="plain">(</span><span class="identifier">_p_</span><span class="plain">(</span><span class="identifier">PM_NoSuchLanguageElement</span><span class="plain">),</span>
            <span class="string">"this seems to ask to include or exclude a language feature which "</span>
            <span class="string">"I don't recognise the name of"</span><span class="plain">,</span>
            <span class="string">"possibly because you've borrowed it from a different version of "</span>
            <span class="string">"Inform, or forgotten what these are called? You can see the current "</span>
            <span class="string">"configuration at the bottom of the Contents index."</span><span class="plain">);</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP9">&#167;9</a>.</p>

<p class="inwebparagraph"><a id="SP10"></a><b>&#167;10.  </b></p>


<pre class="definitions">
    <span class="definitionkeyword">define</span> <span class="constant">PLUGIN_REMOVAL_OFFSET</span><span class="plain"> </span><span class="constant">MAX_PLUGINS</span><span class="plain">+1</span>
</pre>

<pre class="display">
    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::plug_in</span><span class="plain">(</span><span class="identifier">wording</span><span class="plain"> </span><span class="identifier">W</span><span class="plain">) {</span>
        <span class="reserved">plugin</span><span class="plain"> *</span><span class="identifier">P</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (&lt;</span><span class="identifier">use</span><span class="plain">-</span><span class="identifier">language</span><span class="plain">-</span><span class="identifier">element</span><span class="plain">-</span><span class="identifier">sentence</span><span class="plain">-</span><span class="identifier">subject</span><span class="plain">&gt;(</span><span class="identifier">W</span><span class="plain">)) {</span>
            <span class="reserved">int</span><span class="plain"> </span><span class="identifier">plugin_number</span><span class="plain"> = &lt;&lt;</span><span class="identifier">r</span><span class="plain">&gt;&gt;;</span>
            <span class="reserved">int</span><span class="plain"> </span><span class="identifier">new_state</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">plugin_number</span><span class="plain"> &gt;= </span><span class="constant">PLUGIN_REMOVAL_OFFSET</span><span class="plain">) {</span>
                <span class="identifier">new_state</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
                <span class="identifier">plugin_number</span><span class="plain"> -= </span><span class="constant">PLUGIN_REMOVAL_OFFSET</span><span class="plain">;</span>
            <span class="plain">}</span>
            <span class="identifier">LOOP_OVER</span><span class="plain">(</span><span class="identifier">P</span><span class="plain">, </span><span class="reserved">plugin</span><span class="plain">) {</span>
                <span class="reserved">int</span><span class="plain"> </span><span class="identifier">definiteness</span><span class="plain"> = </span><span class="identifier">UNKNOWN_CE</span><span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;plugin_number</span><span class="plain"> == </span><span class="identifier">plugin_number</span><span class="plain">) </span><span class="identifier">definiteness</span><span class="plain"> = </span><span class="identifier">CERTAIN_CE</span><span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;set_number</span><span class="plain"> == </span><span class="identifier">plugin_number</span><span class="plain">) </span><span class="identifier">definiteness</span><span class="plain"> = </span><span class="identifier">LIKELY_CE</span><span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">definiteness</span><span class="plain"> != </span><span class="identifier">UNKNOWN_CE</span><span class="plain">) {</span>
                    <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">definiteness</span><span class="plain"> == </span><span class="identifier">LIKELY_CE</span><span class="plain">) &amp;&amp; (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;has_been_set_explicitly</span><span class="plain">)) </span><span class="reserved">continue</span><span class="plain">;</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain"> == </span><span class="identifier">core_plugin</span><span class="plain">) {</span>
                        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">new_state</span><span class="plain"> == </span><span class="identifier">FALSE</span><span class="plain">) </span>&lt;<span class="cwebmacro">Issue problem for trying to remove the core</span> <span class="cwebmacronumber">10.1</span>&gt;<span class="plain">;</span>
                        <span class="reserved">plugin</span><span class="plain"> *</span><span class="identifier">Q</span><span class="plain">;</span>
                        <span class="identifier">LOOP_OVER</span><span class="plain">(</span><span class="identifier">Q</span><span class="plain">, </span><span class="reserved">plugin</span><span class="plain">) </span><span class="identifier">Q</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
                    <span class="plain">}</span>
                    <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">new_state</span><span class="plain">;</span>
                    <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;has_been_set_explicitly</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
                <span class="plain">}</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
        <span class="plain">#</span><span class="identifier">ifndef</span><span class="plain"> </span><span class="identifier">IF_MODULE</span>
        <span class="identifier">LOOP_OVER</span><span class="plain">(</span><span class="identifier">P</span><span class="plain">, </span><span class="reserved">plugin</span><span class="plain">)</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;set_number</span><span class="plain"> == </span><span class="constant">IF_PLUGIN_NAME</span><span class="plain">)</span>
                <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="plain">#</span><span class="identifier">endif</span>
        <span class="plain">#</span><span class="identifier">ifndef</span><span class="plain"> </span><span class="identifier">MULTIMEDIA_MODULE</span>
        <span class="identifier">LOOP_OVER</span><span class="plain">(</span><span class="identifier">P</span><span class="plain">, </span><span class="reserved">plugin</span><span class="plain">)</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;set_number</span><span class="plain"> == </span><span class="constant">MULTIMEDIA_PLUGIN_NAME</span><span class="plain">)</span>
                <span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="plain">#</span><span class="identifier">endif</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">The function Plugins::Manage::plug_in is used in 7/ss (<a href="7-ss.html#SP5">&#167;5</a>).</p>

<p class="inwebparagraph"><a id="SP10_1"></a><b>&#167;10.1.  </b><code class="display">
&lt;<span class="cwebmacrodefn">Issue problem for trying to remove the core</span> <span class="cwebmacronumber">10.1</span>&gt; =
</code></p>


<pre class="displaydefn">
        <span class="identifier">Problems::Issue::sentence_problem</span><span class="plain">(</span><span class="identifier">_p_</span><span class="plain">(</span><span class="identifier">PM_DontRemoveTheCore</span><span class="plain">),</span>
            <span class="string">"the core of the Inform language cannot be removed"</span><span class="plain">,</span>
            <span class="string">"because then what should we do? What should we ever do?"</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain">;</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">This code is used in <a href="#SP10">&#167;10</a>.</p>

<p class="inwebparagraph"><a id="SP11"></a><b>&#167;11.  </b>And, we're as good as our word because &mdash;
</p>


<pre class="display">
    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::show_configuration</span><span class="plain">(</span><span class="identifier">OUTPUT_STREAM</span><span class="plain">) {</span>
        <span class="identifier">HTML_OPEN</span><span class="plain">(</span><span class="string">"p"</span><span class="plain">);</span>
        <span class="identifier">Index::anchor</span><span class="plain">(</span><span class="identifier">OUT</span><span class="plain">, </span><span class="identifier">I</span><span class="string">"CONFIG"</span><span class="plain">);</span>
        <span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"Inform language definition:\</span><span class="plain">n</span><span class="string">"</span><span class="plain">);</span>
        <span class="functiontext">Plugins::Manage::show</span><span class="plain">(</span><span class="identifier">OUT</span><span class="plain">, </span><span class="string">"Included"</span><span class="plain">, </span><span class="identifier">TRUE</span><span class="plain">);</span>
        <span class="functiontext">Plugins::Manage::show</span><span class="plain">(</span><span class="identifier">OUT</span><span class="plain">, </span><span class="string">"Excluded"</span><span class="plain">, </span><span class="identifier">FALSE</span><span class="plain">);</span>
        <span class="identifier">HTML_CLOSE</span><span class="plain">(</span><span class="string">"p"</span><span class="plain">);</span>
    <span class="plain">}</span>

    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::show</span><span class="plain">(</span><span class="identifier">OUTPUT_STREAM</span><span class="plain">, </span><span class="reserved">char</span><span class="plain"> *</span><span class="identifier">label</span><span class="plain">, </span><span class="reserved">int</span><span class="plain"> </span><span class="identifier">state</span><span class="plain">) {</span>
        <span class="reserved">plugin</span><span class="plain"> *</span><span class="identifier">P</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">c</span><span class="plain"> = 0;</span>
        <span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"%s: "</span><span class="plain">, </span><span class="identifier">label</span><span class="plain">);</span>
        <span class="identifier">LOOP_OVER</span><span class="plain">(</span><span class="identifier">P</span><span class="plain">, </span><span class="reserved">plugin</span><span class="plain">) </span><span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain"> == </span><span class="identifier">state</span><span class="plain">) {</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain"> &gt; 0) </span><span class="identifier">WRITE</span><span class="plain">(</span><span class="string">", "</span><span class="plain">);</span>
            <span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"%A"</span><span class="plain">, &amp;(</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;plugin_name</span><span class="plain">));</span>
            <span class="identifier">c</span><span class="plain">++;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain"> == 0) </span><span class="identifier">WRITE</span><span class="plain">(</span><span class="string">"&lt;i&gt;none&lt;/i&gt;"</span><span class="plain">);</span>
        <span class="identifier">WRITE</span><span class="plain">(</span><span class="string">".\</span><span class="plain">n</span><span class="string">"</span><span class="plain">);</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">The function Plugins::Manage::show_configuration is used in 26/vm (<a href="26-vm.html#SP18">&#167;18</a>).</p>

<p class="endnote">The function Plugins::Manage::show appears nowhere else.</p>

<p class="inwebparagraph"><a id="SP12"></a><b>&#167;12.  </b>Similarly:
</p>


<pre class="display">
    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::define_IFDEF_symbols</span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
        <span class="reserved">plugin</span><span class="plain"> *</span><span class="identifier">P</span><span class="plain">;</span>
        <span class="identifier">LOOP_OVER</span><span class="plain">(</span><span class="identifier">P</span><span class="plain">, </span><span class="reserved">plugin</span><span class="plain">)</span>
            <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain">) &amp;&amp; (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;IFDEF_iname</span><span class="plain">))</span>
                <span class="functiontext">Emit::named_numeric_constant</span><span class="plain">(</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;IFDEF_iname</span><span class="plain">, 0);</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">The function Plugins::Manage::define_IFDEF_symbols is used in 1/mr (<a href="1-mr.html#SP4_14">&#167;4.14</a>).</p>

<p class="inwebparagraph"><a id="SP13"></a><b>&#167;13.  </b></p>


<pre class="display">
    <span class="reserved">void</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::command</span><span class="plain">(</span><span class="identifier">text_stream</span><span class="plain"> *</span><span class="identifier">command</span><span class="plain">) {</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">Str::eq_wide_string</span><span class="plain">(</span><span class="identifier">command</span><span class="plain">, </span><span class="identifier">L</span><span class="string">"load"</span><span class="plain">)) {</span>
            <span class="reserved">plugin</span><span class="plain"> *</span><span class="identifier">P</span><span class="plain">;</span>
            <span class="identifier">LOOP_OVER</span><span class="plain">(</span><span class="identifier">P</span><span class="plain">, </span><span class="reserved">plugin</span><span class="plain">)</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain">) {</span>
                    <span class="reserved">void</span><span class="plain"> (*</span><span class="identifier">start</span><span class="plain">)() = (</span><span class="reserved">void</span><span class="plain"> (*)()) </span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;starter_routine</span><span class="plain">;</span>
                    <span class="plain">(*</span><span class="identifier">start</span><span class="plain">)();</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain">) {</span>
                        <span class="identifier">TEMPORARY_TEXT</span><span class="plain">(</span><span class="identifier">segment_name</span><span class="plain">);</span>
                        <span class="identifier">WRITE_TO</span><span class="plain">(</span><span class="identifier">segment_name</span><span class="plain">, </span><span class="string">"Load-%s.i6t"</span><span class="plain">, </span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;has_template_file</span><span class="plain">);</span>
                        <span class="functiontext">TemplateFiles::interpret</span><span class="plain">(</span><span class="identifier">NULL</span><span class="plain">, </span><span class="identifier">NULL</span><span class="plain">, </span><span class="identifier">segment_name</span><span class="plain">, -1);</span>
                        <span class="identifier">DISCARD_TEXT</span><span class="plain">(</span><span class="identifier">segment_name</span><span class="plain">);</span>
                    <span class="plain">}</span>
                <span class="plain">}</span>
            <span class="reserved">return</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="identifier">internal_error</span><span class="plain">(</span><span class="string">"No such plugin command"</span><span class="plain">);</span>
    <span class="plain">}</span>

    <span class="reserved">int</span><span class="plain"> </span><span class="functiontext">Plugins::Manage::plugged_in</span><span class="plain">(</span><span class="reserved">plugin</span><span class="plain"> *</span><span class="identifier">P</span><span class="plain">) {</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">P</span><span class="plain">-</span><span class="element">&gt;now_plugged_in</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">The function Plugins::Manage::command is used in 1/mr (<a href="1-mr.html#SP4_9">&#167;4.9</a>), 26/iti (<a href="26-iti.html#SP7_8">&#167;7.8</a>).</p>

<p class="endnote">The function Plugins::Manage::plugged_in is used in 16/ic (<a href="16-ic.html#SP15">&#167;15</a>).</p>

<hr class="tocbar">
<ul class="toc"><li><a href="26-iti.html">Back to 'I6 Template Interpreter'</a></li><li><a href="26-pc.html">Continue with 'Plugin Calls'</a></li></ul><hr class="tocbar">
<!--End of weave: 350 lines from a web of 93246-->
	</body>
</html>


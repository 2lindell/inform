<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>3/hl</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">
		<link href="inweb.css" rel="stylesheet" rev="stylesheet" type="text/css">
	</head>
	<body>

<!--Weave of '3/trn' generated by 7-->
<ul class="crumbs"><li><a href="../webs.html">&#9733;</a></li><li><a href="index.html">codegen</a></li><li><a href="index.html#3">Chapter 3: Inform 6 to Inter</a></li><li><b>Translation</b></li></ul><p class="purpose">A way to express rules for how to translate names from the Inter namespace into the target language's namespace.</p>

<p class="inwebparagraph"><a id="SP1"></a><b>&#167;1.  </b>This section of code is pleasingly simple: it has no functionality, and exists as
a stand-alone section just to give these functions legible names.
</p>


<pre class="display">
    <span class="reserved">typedef</span><span class="plain"> </span><span class="reserved">struct</span><span class="plain"> </span><span class="reserved">name_translation</span><span class="plain"> {</span>
        <span class="reserved">struct</span><span class="plain"> </span><span class="identifier">text_stream</span><span class="plain"> *</span><span class="identifier">translate_to</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">then_make_unique</span><span class="plain">;</span>
        <span class="reserved">struct</span><span class="plain"> </span><span class="reserved">inter_name_generator</span><span class="plain"> *</span><span class="identifier">name_generator</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">derive</span><span class="plain">;</span>
        <span class="reserved">int</span><span class="plain"> </span><span class="identifier">by_imposition</span><span class="plain">;</span>
    <span class="plain">} </span><span class="reserved">name_translation</span><span class="plain">;</span>

    <span class="reserved">name_translation</span><span class="plain"> </span><span class="functiontext">Translation::same</span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
        <span class="reserved">name_translation</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
        <span class="identifier">nt</span><span class="element">.translate_to</span><span class="plain"> = </span><span class="identifier">NULL</span><span class="plain">;</span>
        <span class="identifier">nt</span><span class="element">.then_make_unique</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="identifier">nt</span><span class="element">.name_generator</span><span class="plain"> = </span><span class="identifier">NULL</span><span class="plain">;</span>
        <span class="identifier">nt</span><span class="element">.derive</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="identifier">nt</span><span class="element">.by_imposition</span><span class="plain"> = </span><span class="identifier">FALSE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">name_translation</span><span class="plain"> </span><span class="functiontext">Translation::uniqued</span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
        <span class="reserved">name_translation</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain"> = </span><span class="functiontext">Translation::same</span><span class="plain">();</span>
        <span class="identifier">nt</span><span class="element">.then_make_unique</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">name_translation</span><span class="plain"> </span><span class="functiontext">Translation::imposed</span><span class="plain">(</span><span class="reserved">void</span><span class="plain">) {</span>
        <span class="reserved">name_translation</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain"> = </span><span class="functiontext">Translation::same</span><span class="plain">();</span>
        <span class="identifier">nt</span><span class="element">.by_imposition</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">name_translation</span><span class="plain"> </span><span class="functiontext">Translation::to</span><span class="plain">(</span><span class="identifier">text_stream</span><span class="plain"> *</span><span class="identifier">S</span><span class="plain">) {</span>
        <span class="reserved">name_translation</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain"> = </span><span class="functiontext">Translation::same</span><span class="plain">();</span>
        <span class="identifier">nt</span><span class="element">.translate_to</span><span class="plain"> = </span><span class="identifier">S</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">name_translation</span><span class="plain"> </span><span class="functiontext">Translation::to_uniqued</span><span class="plain">(</span><span class="identifier">text_stream</span><span class="plain"> *</span><span class="identifier">S</span><span class="plain">) {</span>
        <span class="reserved">name_translation</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain"> = </span><span class="functiontext">Translation::same</span><span class="plain">();</span>
        <span class="identifier">nt</span><span class="element">.translate_to</span><span class="plain"> = </span><span class="identifier">S</span><span class="plain">;</span>
        <span class="identifier">nt</span><span class="element">.then_make_unique</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">name_translation</span><span class="plain"> </span><span class="functiontext">Translation::prefix</span><span class="plain">(</span><span class="identifier">text_stream</span><span class="plain"> *</span><span class="identifier">S</span><span class="plain">) {</span>
        <span class="reserved">name_translation</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain"> = </span><span class="functiontext">Translation::same</span><span class="plain">();</span>
        <span class="identifier">nt</span><span class="element">.name_generator</span><span class="plain"> = </span><span class="functiontext">InterNames::multiple_use_generator</span><span class="plain">(</span><span class="identifier">S</span><span class="plain">, </span><span class="identifier">NULL</span><span class="plain">, </span><span class="identifier">NULL</span><span class="plain">);</span>
        <span class="identifier">nt</span><span class="element">.derive</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">name_translation</span><span class="plain"> </span><span class="functiontext">Translation::suffix</span><span class="plain">(</span><span class="identifier">text_stream</span><span class="plain"> *</span><span class="identifier">S</span><span class="plain">) {</span>
        <span class="reserved">name_translation</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain"> = </span><span class="functiontext">Translation::same</span><span class="plain">();</span>
        <span class="identifier">nt</span><span class="element">.name_generator</span><span class="plain"> = </span><span class="functiontext">InterNames::multiple_use_generator</span><span class="plain">(</span><span class="identifier">NULL</span><span class="plain">, </span><span class="identifier">NULL</span><span class="plain">, </span><span class="identifier">S</span><span class="plain">);</span>
        <span class="identifier">nt</span><span class="element">.derive</span><span class="plain"> = </span><span class="identifier">TRUE</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
    <span class="plain">}</span>

    <span class="reserved">name_translation</span><span class="plain"> </span><span class="functiontext">Translation::generate</span><span class="plain">(</span><span class="identifier">text_stream</span><span class="plain"> *</span><span class="identifier">S</span><span class="plain">) {</span>
        <span class="reserved">name_translation</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain"> = </span><span class="functiontext">Translation::same</span><span class="plain">();</span>
        <span class="identifier">nt</span><span class="element">.name_generator</span><span class="plain"> = </span><span class="functiontext">InterNames::multiple_use_generator</span><span class="plain">(</span><span class="identifier">NULL</span><span class="plain">, </span><span class="identifier">S</span><span class="plain">, </span><span class="identifier">NULL</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">nt</span><span class="plain">;</span>
    <span class="plain">}</span>
</pre>

<p class="inwebparagraph"></p>

<p class="endnote">The function Translation::same is used in 3/hl (<a href="3-hl.html#SP3">&#167;3</a>), 3/pi (<a href="3-pi.html#SP3">&#167;3</a>).</p>

<p class="endnote">The function Translation::uniqued appears nowhere else.</p>

<p class="endnote">The function Translation::imposed appears nowhere else.</p>

<p class="endnote">The function Translation::to appears nowhere else.</p>

<p class="endnote">The function Translation::to_uniqued appears nowhere else.</p>

<p class="endnote">The function Translation::prefix appears nowhere else.</p>

<p class="endnote">The function Translation::suffix appears nowhere else.</p>

<p class="endnote">The function Translation::generate appears nowhere else.</p>

<p class="endnote">The structure name_translation is accessed in 3/hl and here.</p>

<hr class="tocbar">
<ul class="toc"><li><a href="3-hl.html">Back to 'Hierarchy Locations'</a></li><li><a href="3-pck.html">Continue with 'Packaging'</a></li></ul><hr class="tocbar">
<!--End of weave-->
	</body>
</html>


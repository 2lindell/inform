<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>S/pwm</title>
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">
		<link href="../inweb.css" rel="stylesheet" rev="stylesheet" type="text/css">
	</head>
	<body>
		<nav role="navigation">
		<h1><a href="../webs.html">Sources</a></h1>
<ul>
<li><a href="../compiler.html">compiler tools</a></li>
<li><a href="../other.html">other tools</a></li>
<li><a href="../extensions.html"><b>extensions and kits</b></a></li>
<li><a href="../units.html">unit test tools</a></li>
</ul>
<h2>Extensions</h2>
<ul>
<li><a href="../basic_inform/index.html">Basic Inform</a></li>
<li><a href="../standard_rules/index.html">Standard Rules</a></li>
</ul>
<h2>Kits</h2>
<ul>
<li><a href="../BasicInformKit/index.html">BasicInformKit</a></li>
<li><a href="../BasicInformExtrasKit/index.html">BasicInformExtrasKit</a></li>
<li><a href="../CommandParserKit/index.html">CommandParserKit</a></li>
<li><a href="../EnglishLanguageKit/index.html">EnglishLanguageKit</a></li>
<li><a href="../WorldModelKit/index.html">WorldModelKit</a></li>
</ul>


		</nav>
		<main role="main">
		
<!--Weave of 'S/var' generated by 7-->
<ul class="crumbs"><li><a href="../webs.html">Source</a></li><li><a href="../extensions.html">Extensions</a></li><li><a href="index.html">srules</a></li><li><b>Variables and Rulebooks</b></li></ul><p class="purpose">The global variables and those built-in rulebooks which do not belong either to specific actions or to specific activities.</p>

<ul class="toc"><li><a href="#SP1">&#167;1. The player's situation</a></li><li><a href="#SP11">&#167;11. Rulebooks</a></li><li><a href="#SP21">&#167;21. Rules</a></li><li><a href="#SP22">&#167;22. Startup</a></li><li><a href="#SP24">&#167;24. The turn sequence</a></li><li><a href="#SP29">&#167;29. Shutdown</a></li><li><a href="#SP30">&#167;30. Scene changing</a></li><li><a href="#SP32">&#167;32. Action-processing</a></li><li><a href="#SP37">&#167;37. Specific action-processing</a></li><li><a href="#SP41">&#167;41. Player's action awareness</a></li><li><a href="#SP42">&#167;42. Accessibility</a></li><li><a href="#SP43">&#167;43. Reaching inside</a></li><li><a href="#SP44">&#167;44. Reaching outside</a></li><li><a href="#SP45">&#167;45. Visibility</a></li><li><a href="#SP46">&#167;46. Does the player mean</a></li><li><a href="#SP48">&#167;48. Adjectives applied to values</a></li><li><a href="#SP49">&#167;49. Scene descriptions</a></li><li><a href="#SP50">&#167;50. Command parser errors</a></li><li><a href="#SP51">&#167;51. Internal rules</a></li></ul><hr class="tocbar">

<p class="inwebparagraph"><a id="SP1"></a><b>&#167;1. The player's situation. </b>A set of global variables defines the player's current situation in
space and time.
</p>

<p class="inwebparagraph">Although users often think of the protagonist object as a fixed object
whose name is "player", this is a variable, and it is possible to change
perspective during play and become somebody else &mdash; at which point the
"player" variable will point to a different object.
</p>

<p class="inwebparagraph">Note that "player" is a name given to a variable explicitly defined in
the <code class="display"><span class="extract">srules</span></code> template with a given name (in this case <code class="display"><span class="extract">player</span></code>), so it
has a "translates into I6" sentence.
</p>

<pre class="display">

    <span class="identifier">Part</span><span class="plain"> </span><span class="identifier">Three</span><span class="plain"> - </span><span class="identifier">Variables</span><span class="plain"> </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">Rulebooks</span>

    <span class="identifier">Chapter</span><span class="plain"> </span><span class="constant">1</span><span class="plain"> - </span><span class="identifier">Variables</span>

    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">1</span><span class="plain"> - </span><span class="identifier">Situation</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">person</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"player"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP2"></a><b>&#167;2.  </b>The I7 variable "location" corresponds to I6's <code class="display"><span class="extract">real_location</span></code>, not
<code class="display"><span class="extract">location</span></code>. Its value is never equal to a pseudo-room representing darkness:
it is always an actual room, and I7 has nothing corresponding to I6's
<code class="display"><span class="extract">thedark</span></code> "room". Similarly, we use an I7 variable "darkness witnessed" for a
flag which the I6 library would have stored as the <code class="display"><span class="extract">visited</span></code> attribute for the
<code class="display"><span class="extract">thedark</span></code> object.
</p>

<p class="inwebparagraph">The "maximum score" is, rather cheekily, translated to an I6 constant:
and this cannot be changed at run-time.
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">location</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_location</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_score</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">notified</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">maximum</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">count</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">time</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">day</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_time</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">time</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">darkness</span><span class="plain"> </span><span class="identifier">witnessed</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">truth</span><span class="plain"> </span><span class="identifier">state</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">location</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"real_location"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"score"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">notified</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"last_score"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">maximum</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"MAX_SCORE"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">count</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"turns"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">time</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">day</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"the_time"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP3"></a><b>&#167;3.  </b>It is arguable that "noun", "second noun" and "person asked" ought
to be rulebook variables belonging to the action-processing rules, so that
they essentially did not exist outside of the context of an ongoing action.
The reason this isn't done is partly historical (rulebook variables were a
fairly late development, implemented in April 2007, though they had long
been planned). But it is sometimes useful to get at the nouns in an action
after it has finished, and making them global variables also makes them a
little faster to look up (a good thing since they are used so much), and
causes them to be indexed more prominently.
</p>

<p class="inwebparagraph">"Item described" is simply an I7 name for <code class="display"><span class="extract">self</span></code>. (This is an Inter variable
which refers to the object currently under discussion.) In early drafts of I7,
it was called "this object", but somehow this raised expectations too high
about how often it would be meaningful: it looked like a pronoun running
meanings from sentence to sentence.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">2</span><span class="plain"> - </span><span class="identifier">Current</span><span class="plain"> </span><span class="identifier">action</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">noun</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_noun</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">second</span><span class="plain"> </span><span class="identifier">noun</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">person</span><span class="plain"> </span><span class="identifier">asked</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_person_asked</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">reason</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">failed</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_reason</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">name</span>
    <span class="identifier">based</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">producing</span><span class="plain"> </span><span class="identifier">nothing</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">described</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">noun</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"noun"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">second</span><span class="plain"> </span><span class="identifier">noun</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"second"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">person</span><span class="plain"> </span><span class="identifier">asked</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"actor"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">reason</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">failed</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"reason_the_action_failed"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">described</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"self"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP4"></a><b>&#167;4.  </b>"Person reaching" turns out to have exactly the same meaning as "person
asked" &mdash; they are both the <code class="display"><span class="extract">actor</span></code>, in Inter terms, but are used in different
situations.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">3</span><span class="plain"> - </span><span class="identifier">Used</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">ruling</span><span class="plain"> </span><span class="identifier">on</span><span class="plain"> </span><span class="identifier">accessibility</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">person</span><span class="plain"> </span><span class="identifier">reaching</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_person_reaching</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">container</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">question</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">supporter</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">question</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">particular</span><span class="plain"> </span><span class="identifier">possession</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_particular</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">thing</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">person</span><span class="plain"> </span><span class="identifier">reaching</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"actor"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">container</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">question</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"parameter_object"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">supporter</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">question</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"parameter_object"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">particular</span><span class="plain"> </span><span class="identifier">possession</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"particular_possession"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP5"></a><b>&#167;5.  </b>Parsing variables follow. The I6 parser tends to put any data read as part
of a command into the variable <code class="display"><span class="extract">parsed_number</span></code>, but then, Inter is typeless:
we can't have a single I7 variable for all these possibilities since it could
then have no legal type. We solve this as follows. Whenever a kind of value
K is created which can be parsed as part of a command, an I7 variable "the
K understood" is also created, as a K that varies. All of these variables
are translated into Inter's <code class="display"><span class="extract">parsed_number</span></code>, so in effect they provide aliases
of each possible type for the same underlying memory location. The four
exceptional kinds of value not parsed by the systematic approaches in Inform
for enumerated KOVs and units are "number", "time", "snippet" and "truth
state": because of their exceptional status, they don't get "the K
understood" variables created automatically for them, so we must construct
those by hand. Hence "the number understood", "the time understood", "the
topic understood" (for historical reasons this one is not called "the snippet
understood"), "the truth state understood" but no others.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">4</span><span class="plain"> - </span><span class="identifier">Used</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">understanding</span><span class="plain"> </span><span class="identifier">typed</span><span class="plain"> </span><span class="identifier">commands</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_command</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">snippet</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">matched</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">snippet</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">understood</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_understood</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">real</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">understood</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_understood</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">real</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">time</span><span class="plain"> </span><span class="identifier">understood</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">time</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">topic</span><span class="plain"> </span><span class="identifier">understood</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">snippet</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">truth</span><span class="plain"> </span><span class="identifier">state</span><span class="plain"> </span><span class="identifier">understood</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">truth</span><span class="plain"> </span><span class="identifier">state</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">current</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">list</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"players_command"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">matched</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"matched_text"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">topic</span><span class="plain"> </span><span class="identifier">understood</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"parsed_number"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">current</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">list</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"multiple_object_item"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP6"></a><b>&#167;6.  </b></p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">5</span><span class="plain"> - </span><span class="identifier">Presentation</span><span class="plain"> </span><span class="identifier">on</span><span class="plain"> </span><span class="identifier">screen</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">prompt</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_prompt</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">prompt</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="string">"&gt;"</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">left</span><span class="plain"> </span><span class="identifier">hand</span><span class="plain"> </span><span class="identifier">status</span><span class="plain"> </span><span class="identifier">line</span><span class="plain"> -- </span><span class="identifier">documented</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">var_sl</span><span class="plain"> -- </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">right</span><span class="plain"> </span><span class="identifier">hand</span><span class="plain"> </span><span class="identifier">status</span><span class="plain"> </span><span class="identifier">line</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">left</span><span class="plain"> </span><span class="identifier">hand</span><span class="plain"> </span><span class="identifier">status</span><span class="plain"> </span><span class="identifier">line</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"left_hand_status_line"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">right</span><span class="plain"> </span><span class="identifier">hand</span><span class="plain"> </span><span class="identifier">status</span><span class="plain"> </span><span class="identifier">line</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"right_hand_status_line"</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">listing</span><span class="plain"> </span><span class="identifier">group</span><span class="plain"> </span><span class="identifier">size</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">listing</span><span class="plain"> </span><span class="identifier">group</span><span class="plain"> </span><span class="identifier">size</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"listing_size"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP7"></a><b>&#167;7.  </b>Now some linguistic variables:
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">6</span><span class="plain"> - </span><span class="identifier">Language</span><span class="plain"> </span><span class="identifier">generation</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">prior</span><span class="plain"> </span><span class="identifier">named</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">prior</span><span class="plain"> </span><span class="identifier">named</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"prior_named_noun"</span><span class="plain">.</span>
    <span class="identifier">An</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">list</span><span class="plain"> </span><span class="identifier">grouping</span><span class="plain"> </span><span class="identifier">key</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP8"></a><b>&#167;8.  </b>...but they are not the last global variables created by the Standard Rules.
</p>

<p class="inwebparagraph">These bibliographic data variables are concealed because they are under a
heading which ends with the word "unindexed". There are two reasons why
these variables are unindexed: first, they appear in a different guise only
a little lower in the Contents index as part of the Library Card, and
second, we don't want users to think of them as manipulable during play.
</p>

<p class="inwebparagraph">Rather sneakily, we also define a Figure here. This is done in order to
make it legal to declare variables and properties of the kind of value
"figure name" (because it ensures that such variables can always be
initialised &mdash; there is always at least one Figure in the world). Of
course plenty of Inform projects have no artwork at all: so the cover art
figure is unique in that it might refer to nothing. That sounds a little
arbitrary but in fact follows a convention used by the Blorb format for
binding story files with their resources, which in turn follows Infocom
conventions of 1987-89: the cover art always has resource ID number 1,
whether it exists or not. Inform creates figures and sound effects counting
upwards from 1, giving them each unique resource ID numbers, so the first
to be created gets ID number 1: by defining "figure of cover" here, we
can be sure that we are first, so everything works.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">7</span><span class="plain"> - </span><span class="identifier">Unindexed</span><span class="plain"> </span><span class="identifier">Standard</span><span class="plain"> </span><span class="identifier">Rules</span><span class="plain"> </span><span class="identifier">variables</span><span class="plain"> - </span><span class="identifier">Unindexed</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">title</span><span class="plain">, </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">author</span><span class="plain">, </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">headline</span><span class="plain">, </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">genre</span>
    <span class="identifier">and</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">description</span><span class="plain"> </span><span class="identifier">are</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">variables</span><span class="plain">. </span><span class="comment">****</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">release</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">creation</span><span class="plain"> </span><span class="identifier">year</span><span class="plain"> </span><span class="identifier">are</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">variables</span><span class="plain">. </span><span class="comment">*</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">release</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">usually</span><span class="plain"> </span><span class="constant">1</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">headline</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">usually</span><span class="plain"> </span><span class="string">"An Interactive Fiction"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">genre</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">usually</span><span class="plain"> </span><span class="string">"Fiction"</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">title</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"Story"</span><span class="plain">.</span>

    <span class="identifier">Section</span><span class="plain"> </span><span class="identifier">SR2</span><span class="plain">/6</span><span class="identifier">b</span><span class="plain"> - </span><span class="identifier">Unindexed</span><span class="plain"> </span><span class="identifier">Standard</span><span class="plain"> </span><span class="identifier">Rules</span><span class="plain"> </span><span class="identifier">variables</span><span class="plain"> - </span><span class="identifier">Unindexed</span><span class="plain"> (</span><span class="identifier">for</span><span class="plain"> </span><span class="identifier">figures</span><span class="plain"> </span><span class="identifier">language</span><span class="plain"> </span><span class="identifier">element</span><span class="plain"> </span><span class="identifier">only</span><span class="plain">)</span>

    <span class="identifier">Figure</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">cover</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">file</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">cover</span><span class="plain"> </span><span class="identifier">art</span><span class="plain"> (</span><span class="string">"The cover art."</span><span class="plain">).</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP9"></a><b>&#167;9.  </b>And we finish out the set with some "secret" variables used only by the
Standard Rules or by Inform, and which are therefore also unindexed. Their
names are all hyphenated, to reduce the chance of anyone stumbling into
them in a namespace clash.
</p>

<p class="inwebparagraph">The first set of three secret variables is used by the predicate calculus
machinery in Inform. This is the code which handles logical sentences such as
"at least six doors are open" or descriptions such as "open doors", by
reducing them to a logical notation which sometimes makes use of variables.
For instance, "open doors" reduces to something like "all x such that
door(x) and open(x)", with x being a variable. When Inform works with
such logical propositions, it often needs to substitute x=c, that is, to
replace x with a given constant c. But it can only do this if c is an
Inform 7 value. This is a problem if what it wants is to substitute in
something which is only meaningful at the I6 level: say, it wants to
substitute a value c which will eventually translate to <code class="display"><span class="extract">whatever</span></code>, but
it can't find any I7 value c which will do this.
</p>

<p class="inwebparagraph">We solve this problem by constructing some unusual I7 variables whose only
purpose is that Inform can use them in substitutions. They should never be
referred to in I7 source text anywhere else at all, not even elsewhere in
the Standard Rules.
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(1) The sentence "The i6-nothing-constant is an object that varies." is
a rare example of a flat lie in the Standard Rules, as it is the I6 constant
<code class="display"><span class="extract">nothing</span></code> and never varies at all. It exists as a "variable" so that the
substitution x=~<code class="display"><span class="extract">nothing</span></code> can be made.
</li></ul>
<ul class="items"><li>(2) Well, once you start telling lies it's so hard to stop, and it's also a
lie that the "I6-varying-global" translates to <code class="display"><span class="extract">nothing</span></code>. It actually
translates to whatever the Inform machinery for compiling propositions happens
to want at the moment, so it has no permanent meaning at all. (It will
always translate to an I6 global variable storing a value whose I7 kind
is "object", so the type-checking machinery isn't endangered by this
chicanery. It will in fact never translate to <code class="display"><span class="extract">nothing</span></code>, but we make the
translation sentence below in order to avoid allocating any storage at
run-time for what is in the end only a label.)
</li></ul>
<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">8</span><span class="plain"> - </span><span class="identifier">Unindexed</span><span class="plain"> </span><span class="identifier">Standard</span><span class="plain"> </span><span class="identifier">Rules</span><span class="plain"> </span><span class="identifier">variables</span><span class="plain"> - </span><span class="identifier">Unindexed</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain">-</span><span class="identifier">nothing</span><span class="plain">-</span><span class="identifier">constant</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain">-</span><span class="identifier">nothing</span><span class="plain">-</span><span class="identifier">constant</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"nothing"</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain">-</span><span class="identifier">varying</span><span class="plain">-</span><span class="identifier">global</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain">-</span><span class="identifier">varying</span><span class="plain">-</span><span class="identifier">global</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"nothing"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP10"></a><b>&#167;10.  </b>The remaining secret variables are:
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(1) The "item-pushed-between-rooms" is needed to get the identity of
an object being pushed by a command like PUSH ARMCHAIR NORTH out of I6
and into the action variable "thing gone with" of the going action.
</li></ul>
<ul class="items"><li>(2) The "actor-location" is needed temporarily to store the room in
which the actor of the current action is standing, and it wants to be
an I6 global (rather than, say, a rulebook variable belonging to the
action-processing rulebook) so that Inform can use common code to handle
this alongside <code class="display"><span class="extract">noun</span></code>, <code class="display"><span class="extract">second</span></code> and <code class="display"><span class="extract">actor</span></code> when compiling preambles
to rules.
</li></ul>
<ul class="items"><li>(3) The "parameter-object" is likewise needed in order to compile
preambles to rules in object-based rulebooks.
</li></ul>
<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">item</span><span class="plain">-</span><span class="identifier">pushed</span><span class="plain">-</span><span class="identifier">between</span><span class="plain">-</span><span class="identifier">rooms</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">item</span><span class="plain">-</span><span class="identifier">pushed</span><span class="plain">-</span><span class="identifier">between</span><span class="plain">-</span><span class="identifier">rooms</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"move_pushing"</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">actor</span><span class="plain">-</span><span class="identifier">location</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">. </span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">actor</span><span class="plain">-</span><span class="identifier">location</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"actor_location"</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">being</span><span class="plain"> </span><span class="identifier">changed</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">. </span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">being</span><span class="plain"> </span><span class="identifier">changed</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"parameter_value"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP11"></a><b>&#167;11. Rulebooks. </b>Whereas Basic Inform equips the language with only a handful of rulebooks
to start out, the Standard Rules are replete with them.
</p>

<p class="inwebparagraph">Note, however, that many of these have explicit support in the <code class="display"><span class="extract">basicinform</span></code>
template and in the compiler itself, and that they must be created exactly
in the order below, unless matching changes are made to both other places.
In particular, these need to stay in sync:
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(a) The sequence of declaration of these rulebooks here, in the Standard Rules.
</li><li>(b) The inweb <code class="display"><span class="extract">@d</span></code> definitions in the form <code class="display"><span class="extract">TURN_SEQUENCE_RB</span></code> in the section
Rulebooks of the Inform source code.
</li><li>(c) The I6 <code class="display"><span class="extract">Constant</span></code> definitions in the form <code class="display"><span class="extract">TURN_SEQUENCE_RB</span></code> in the file
<code class="display"><span class="extract">Definitions.i6t</span></code> of the <code class="display"><span class="extract">basicinform</span></code> template.
</li></ul>
<p class="inwebparagraph"><a id="SP12"></a><b>&#167;12.  </b>When an interactive fiction project using the Standard Rules starts up,
it does the following:
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(1) Consider the startup rules.
</li><li>(2) Repeatedly follow the turn sequence rules until the Inter variable
<code class="display"><span class="extract">deadflag</span></code> is set, which is used to indicate that the game has ended in one
way or another (though not necessarily in "death").
</li><li>(3) Follow the shutdown rules.
</li></ul>
<p class="inwebparagraph">Briefly, the startup phase takes us to the end of the room description
after the banner is printed. The turn sequence covers a complete turn,
and runs through from prompting the player for a command to notifying
him of any change in score which occurred. The shutdown rules then go
from printing the obituary text, through final score, to the question
about quitting or restarting.
</p>

<pre class="display">
    <span class="identifier">Chapter</span><span class="plain"> </span><span class="constant">2</span><span class="plain"> - </span><span class="identifier">Rulebooks</span>

    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">1</span><span class="plain"> - </span><span class="identifier">The</span><span class="plain"> </span><span class="identifier">Standard</span><span class="plain"> </span><span class="identifier">Rulebooks</span>

    <span class="identifier">Turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP13"></a><b>&#167;13.  </b>Now a set of rulebooks to do with the passage of time.
</p>

<pre class="display">
    <span class="identifier">Scene</span><span class="plain"> </span><span class="identifier">changing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">When</span><span class="plain"> </span><span class="identifier">play</span><span class="plain"> </span><span class="identifier">begins</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">When</span><span class="plain"> </span><span class="identifier">play</span><span class="plain"> </span><span class="identifier">ends</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">When</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">begins</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">based</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">When</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">ends</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">based</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Every</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP14"></a><b>&#167;14.  </b>The action machinery requires some 16 rulebooks to work, though that is
the result of gradual simplification &mdash; in 2006 it required 25, for instance.
The "action-processing" rulebook, like the turn sequence rulebook, is a
master of ceremonies: it belongs to the Standard Rules and is only rarely if
at all referred to by users.
</p>

<p class="inwebparagraph">As remarked above, it's something of a historical accident that "actor" is
a rulebook variable belonging to the action-processing rules (and thus in
scope for every rulebook it employs) while "noun" and "second noun" are
global variables (and thus in scope everywhere).
</p>

<p class="inwebparagraph">The main action-processing rulebook delegates most of its detailed work to
a subsidiary, the "specific action-processing" rulebook, at the point where
what rulebooks we consult next depends on what the action is (hence "specific")
&mdash; see below for more on how check/carry out/report rules are filed.
</p>

<pre class="display">
    <span class="identifier">Action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">person</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">actor</span><span class="plain">.</span>
    <span class="identifier">Setting</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">variables</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">truth</span><span class="plain"> </span><span class="identifier">state</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">world</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">truth</span><span class="plain"> </span><span class="identifier">state</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">keeping</span><span class="plain"> </span><span class="identifier">silent</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">check</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">carry</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">report</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">truth</span><span class="plain"> </span><span class="identifier">state</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">within</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">sight</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP15"></a><b>&#167;15.  </b>The rules on accessibility and visibility, which control whether an action
is physically possible, have named outcomes as a taste of syntactic sugar.
</p>

<pre class="display">
    <span class="identifier">Accessibility</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Reaching</span><span class="plain"> </span><span class="identifier">inside</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain">-</span><span class="identifier">based</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Reaching</span><span class="plain"> </span><span class="identifier">inside</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">have</span><span class="plain"> </span><span class="identifier">outcomes</span><span class="plain"> </span><span class="identifier">allow</span><span class="plain"> </span><span class="identifier">access</span><span class="plain"> (</span><span class="identifier">success</span><span class="plain">) </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">deny</span><span class="plain"> </span><span class="identifier">access</span><span class="plain"> (</span><span class="identifier">failure</span><span class="plain">).</span>
    <span class="identifier">Reaching</span><span class="plain"> </span><span class="identifier">outside</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">an</span><span class="plain"> </span><span class="identifier">object</span><span class="plain">-</span><span class="identifier">based</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Reaching</span><span class="plain"> </span><span class="identifier">outside</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">have</span><span class="plain"> </span><span class="identifier">outcomes</span><span class="plain"> </span><span class="identifier">allow</span><span class="plain"> </span><span class="identifier">access</span><span class="plain"> (</span><span class="identifier">success</span><span class="plain">) </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">deny</span><span class="plain"> </span><span class="identifier">access</span><span class="plain"> (</span><span class="identifier">failure</span><span class="plain">).</span>
    <span class="identifier">Visibility</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Visibility</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">have</span><span class="plain"> </span><span class="identifier">outcomes</span><span class="plain"> </span><span class="identifier">there</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">sufficient</span><span class="plain"> </span><span class="identifier">light</span><span class="plain"> (</span><span class="identifier">failure</span><span class="plain">) </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">there</span><span class="plain"> </span><span class="identifier">is</span>
    <span class="identifier">insufficient</span><span class="plain"> </span><span class="identifier">light</span><span class="plain"> (</span><span class="identifier">success</span><span class="plain">).</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP16"></a><b>&#167;16.  </b>Two rulebooks govern the processing of asking other people to carry out actions:
</p>

<pre class="display">
    <span class="identifier">Persuasion</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Persuasion</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">have</span><span class="plain"> </span><span class="identifier">outcomes</span><span class="plain"> </span><span class="identifier">persuasion</span><span class="plain"> </span><span class="identifier">succeeds</span><span class="plain"> (</span><span class="identifier">success</span><span class="plain">) </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">persuasion</span><span class="plain"> </span><span class="identifier">fails</span><span class="plain"> (</span><span class="identifier">failure</span><span class="plain">).</span>
    <span class="identifier">Unsuccessful</span><span class="plain"> </span><span class="identifier">attempt</span><span class="plain"> </span><span class="identifier">by</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP17"></a><b>&#167;17.  </b>Next, the six classic rulebooks best known to users of Inform. It's
perhaps an unfortunate point of the design that there are so many as six:
that seems rather a lot of stages to go through, and indeed means that there
is sometimes some ambiguity about which rulebook to use if one wants to
achieve a given effect. There are really two reasons why things are done
this way:
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(a) To try to encourage a distinction between:
</li></ul>
<ul class="items"><ul class="items"><li>(i) the general implementation of an action, made with carry out, check
and report rules &mdash; say, a "photographing" action which could be used in
any situation and could be copied and pasted into another project; and
</li></ul>
</li></ul>
<p class="inwebparagraph"></p>

<ul class="items"><ul class="items"><li>(ii) the contingent rules applying in particular situations in play, made
with before, instead and after rules, such as that custodians at the
Metropolitan Museum of Art forbid flash photography.
</li></ul>
</li></ul>
<p class="inwebparagraph"></p>

<ul class="items"><li>(b) To improve the efficiency of action-processing by forcing control to
run only through those carry out, check and report rules which can possibly
be relevant to the current action. Whereas all before, instead and after
rules are all piled up together in their own rulebooks, check, carry out
and report rules are divided up into specialised rulebooks tied to the
particular action in progress. Thus on a taking action, the six stages
followed are before, instead, check taking, carry out taking, after and
report taking.
</li></ul>
<p class="inwebparagraph">During play, then, the three rulebooks "check", "after" and "report"
are completely empty. This is the result of a reform in April 2007 which
wasn't altogether popular. Before then, Inform rather cleverly filed rules like
"Check doing something with the haddock" in the generic "check"
rulebook and ran this rulebook as part of the action processing sequence.
But this clearly broke principle (i) above, and meant that the six-stage
process &mdash; already quite complicated enough &mdash; was actually a nine-stage
process only pretending, by deceitful syntax, to be a six-stage one. Check
rules sometimes appeared to be filed in the wrong order, breaking the
ordinary precedence conventions, and this was not due to a bug but because
they were only pretending all to be in the same rulebook. Still more clever
indexing and rule-ordering tricks ameliorated this a little, but in the end
it was just a bad design: withdrawing the ability to make check, carry out
and report rules apply to multiple actions resulted in much cleaner code,
and also a clearer conceptual definition of what these rulebooks were for.
(But users still didn't like the change: actual functionality was
withdrawn.)
</p>

<p class="inwebparagraph">So if they are always empty and never used, why are the three rulebooks
called simply "check", "after" and "report" created in the first
place? The answer is that this is a convenience for parsing rule preambles
in Inform: it provides a temporary home for such rules before they are divided up
into their specific rulebooks, and it also makes it easier for Inform to detect
and give a helpful Problem message in response to rules like "Check taking
or dropping the perch" which can't be filed anywhere in our scheme, and so
have to be forbidden.
</p>

<pre class="display">
    <span class="identifier">Before</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Instead</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Check</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Carry</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">After</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">Report</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP18"></a><b>&#167;18.  </b>The next rulebook in this roundup is one used for parsing ambiguous
commands during play. This looks like the job of an activity rather than a
rulebook, but (i) we want information in the form of a nicely-named five point
scale of responses, rather than wanting something to be done, and (ii) it
doesn't really make any sense to split that question into a before, for and
after stage. So this is a named rulebook instead.
</p>

<p class="inwebparagraph">"Does the player mean" is essentially a front end for the I6 parser's
<code class="display"><span class="extract">ChooseObjects</span></code> entry point, which relies on numerical scores to assess the
likelihood of possible choices. To facilitate that, the I7 compiler recognises
these five outcome names and translates them into the Inter constants
<code class="display"><span class="extract">RBNO4_OUTCOME</span></code>, <code class="display"><span class="extract">RBNO3_OUTCOME</span></code>, ..., <code class="display"><span class="extract">RBNO0_OUTCOME</span></code> respectively. So don't
change the names of these outcomes.
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">does</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">mean</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">does</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">mean</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">have</span><span class="plain"> </span><span class="identifier">outcomes</span><span class="plain"> </span><span class="identifier">it</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">very</span><span class="plain"> </span><span class="identifier">likely</span><span class="plain">, </span><span class="identifier">it</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">likely</span><span class="plain">, </span><span class="identifier">it</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">possible</span><span class="plain">,</span>
    <span class="identifier">it</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">unlikely</span><span class="plain"> </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">it</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">very</span><span class="plain"> </span><span class="identifier">unlikely</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP19"></a><b>&#167;19.  </b>The following rulebook was added at the (implied) suggestion of John
Clemens, whose Consolidated Multiple Actions extension made use of
something similar.
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP20"></a><b>&#167;20.  </b>And that's it: all of the named rulebooks now exist. There will, of
course, be hundreds more rulebooks soon, created automatically as activities
and actions are created &mdash; when we create the "dropping" action, for
instance, we also create the "check dropping", "carry out dropping" and
"report dropping" rulebooks &mdash; but there are no more stand-alone rulebooks.
</p>

<p class="inwebparagraph"><a id="SP21"></a><b>&#167;21. Rules. </b>At run-time, the value of a rule is the (packed) address of an I6 routine.
In the case of rules created in I7 source text, the body of the rule
definition is compiled by Inform to a new I6 routine which carries it out.
But there are also primitive rules which are implemented in the template
I6 layer, and these need no I7 source text definitions: instead we simply
tell Inform the name of the I6 routine which will be handling this rule, and
that it need not bother to create one for itself.
</p>

<p class="inwebparagraph">An example of this is provided by the first rule we shall create: the
"little-used do nothing rule". This is aptly named on both counts. We
never follow it, we never put it into any rulebook. It exists only so that
variables and properties with the kind of value "rule" can be initialised
automatically to a safely neutral default value. It makes no decision.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">2</span><span class="plain"> - </span><span class="identifier">The</span><span class="plain"> </span><span class="identifier">Standard</span><span class="plain"> </span><span class="identifier">Rules</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">little</span><span class="plain">-</span><span class="identifier">used</span><span class="plain"> </span><span class="identifier">do</span><span class="plain"> </span><span class="identifier">nothing</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"LITTLE_USED_DO_NOTHING_R"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP22"></a><b>&#167;22. Startup. </b>Every rulebook contains a (possibly empty) run of "first" rules, then
a (possibly empty) run of miscellaneous rules, then a (possibly empty)
run of "last" rules. It's unusual to have more than one rule anchored
to either end as "first" or "last", but entirely legal, and we make
use of that ability here.
</p>

<p class="inwebparagraph">The "first" rules here are the ones which get the basic machinery working
to the point where it is safe to run arbitrary I7 source text. They necessarily
do very low-level things, and it is not guaranteed that I7 phrases will behave
to specification if executed before these early rules have finished. So it
is hazardous to obstruct or alter them.
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(a) The "initialise memory rule" starts up the memory allocation heap,
if there is one, and sets some essential I6 variables. If there is any rule
not to meddle with, this is it.
</li></ul>
<ul class="items"><li>(b) The "virtual machine startup rule" carries out necessary steps to
begin execution on the virtual machine in use: this entails relatively little
on the Z-machine versions 5 or 8, but can involve extensive work to get the
screen display working on Glulx or Z6. Before anything else happens, however,
the "starting the virtual machine" activity (see below) is carried out.
</li></ul>
<ul class="items"><li>(c) The "seed random number generator rule" seeds the RNG to a fixed value
if Inform has requested this (which it does in response to the <code class="display"><span class="extract">-rng</span></code> command
line switch, which is in turn used by the <code class="display"><span class="extract">intest</span></code> testing utility: it's a
way to make deterministic tests of programs which use random values).
</li></ul>
<ul class="items"><li>(d) The "update chronological records rule" is described in further detail
below, since it appears both here and also in the turn sequence rulebook.
Here it's providing us with a baseline of initial truths from which we can
later assess conditions such as "the marble door has been open". A subtle
and questionable point of the design is that this rule is placed at a time
when the object representing the player is not present in the model world.
This is done to avoid regarding the initial situation as one of the turns
for purposes of a rule preamble like "... when the player has been in the
Dining Room for three turns". It's as if the player teleports into an
already-existing world, like some Star Trek crewman, just in time for the
first command.
</li></ul>
<ul class="items"><li>(e) All items begin unmentioned, as might be expected.
</li></ul>
<ul class="items"><li>(f) And the "position player in model world rule" completes the initial
construction of the spatial model world.
</li></ul>
<ul class="items"><li>(g) The "start in the correct scenes rule" ensures that we start out
in the correct scenes. (This can't wait, because it's just conceivable
that somebody has written a rule with a preamble like "When play
begins during the Hunting Season...": it's also where the scene
Entire Game begins.) That completes the necessary preliminaries before
ordinary I7 rules can be run.
</li></ul>
<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">start</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">correct</span><span class="plain"> </span><span class="identifier">scenes</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">th.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">position</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">model</span><span class="plain"> </span><span class="identifier">world</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">th.</span>
    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">declare</span><span class="plain"> </span><span class="identifier">everything</span><span class="plain"> </span><span class="identifier">initially</span><span class="plain"> </span><span class="identifier">unmentioned</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">:</span>
        <span class="identifier">repeat</span><span class="plain"> </span><span class="identifier">with</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">running</span><span class="plain"> </span><span class="identifier">through</span><span class="plain"> </span><span class="identifier">things</span><span class="plain">:</span>
            <span class="identifier">now</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="identifier">mentioned</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">declare</span><span class="plain"> </span><span class="identifier">everything</span><span class="plain"> </span><span class="identifier">initially</span><span class="plain"> </span><span class="identifier">unmentioned</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">th</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">update</span><span class="plain"> </span><span class="identifier">chronological</span><span class="plain"> </span><span class="identifier">records</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">th.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">seed</span><span class="plain"> </span><span class="identifier">random</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">generator</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">rd.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">virtual</span><span class="plain"> </span><span class="identifier">machine</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">nd.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">initialise</span><span class="plain"> </span><span class="identifier">memory</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">st.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">virtual</span><span class="plain"> </span><span class="identifier">machine</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"VIRTUAL_MACHINE_STARTUP_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">initialise</span><span class="plain"> </span><span class="identifier">memory</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"INITIALISE_MEMORY_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">seed</span><span class="plain"> </span><span class="identifier">random</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">generator</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"SEED_RANDOM_NUMBER_GENERATOR_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">update</span><span class="plain"> </span><span class="identifier">chronological</span><span class="plain"> </span><span class="identifier">records</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"UPDATE_CHRONOLOGICAL_RECORDS_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">position</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">model</span><span class="plain"> </span><span class="identifier">world</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"POSITION_PLAYER_IN_MODEL_R"</span><span class="plain">.</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">start</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">correct</span><span class="plain"> </span><span class="identifier">scenes</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">changing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP23"></a><b>&#167;23.  </b>The remaining rules, though, are fair game for alteration, and as if to
prove the point they are all written in standard I7 source text. Note that
the baseline score is set only after the when play begins rulebook has
finished, because games starting with a non-zero score normally do this
by changing the score in a when play begins rule: and we don't want such
a change to be notified to the player as if it has happened through some
action.
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">play</span><span class="plain"> </span><span class="identifier">begins</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">fix</span><span class="plain"> </span><span class="identifier">baseline</span><span class="plain"> </span><span class="identifier">scoring</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">display</span><span class="plain"> </span><span class="identifier">banner</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">initial</span><span class="plain"> </span><span class="identifier">room</span><span class="plain"> </span><span class="identifier">description</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">startup</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">play</span><span class="plain"> </span><span class="identifier">begins</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">play</span><span class="plain"> </span><span class="identifier">begins</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">fix</span><span class="plain"> </span><span class="identifier">baseline</span><span class="plain"> </span><span class="identifier">scoring</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">now</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">notified</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">score</span><span class="plain">.</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">display</span><span class="plain"> </span><span class="identifier">banner</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">say</span><span class="plain"> </span><span class="string">"[banner text]"</span><span class="plain">.</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">initial</span><span class="plain"> </span><span class="identifier">room</span><span class="plain"> </span><span class="identifier">description</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">try</span><span class="plain"> </span><span class="identifier">looking</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP24"></a><b>&#167;24. The turn sequence. </b>In each turn, a command is read and parsed from the keyboard, and any
action(s) that requested is or are processed. (And may in turn cause
other actions, which must also be processed.) There is then a fair
amount of business needed to end one turn and get ready for another.
</p>

<p class="inwebparagraph">The turn sequences rulebook terminates early if <code class="display"><span class="extract">deadflag</span></code> becomes set at
any point, so the last turn of play will be incomplete. Besides that
consideration, it can also end early if the command for the turn was
for an out-of-world action such as saving the game: in such cases, the
"generate action rule" stops the rulebook once the action has been
fully processed. All the same, play basically consists of running down
this list of rules over and over again.
</p>

<p class="inwebparagraph"><a id="SP25"></a><b>&#167;25.  </b>The "first" rules in the turn sequence cover us up to the end of the
events which take place in the model world during this turn's action(s).
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(a) The "parse command rule" prints up the prompt, reads a command from
the keyboard, parses it into dictionary words, deals with niceties such as
UNDO or OOPS, and then runs it through the traditional I6 parser to turn
it into a request for an action or list of actions. But see note below.
</li></ul>
<ul class="items"><li>(b) The "mentioned" property records whether something's name has been
printed since the last command.
</li></ul>
<ul class="items"><li>(c) The "generate action rule" then either sends a single action to the
action-processing rules, or else runs through the list, printing the noun
up with a colon each time and then sending the action to the action-processing
rules. But see note below.
</li></ul>
<ul class="items"><li>(d) We then run the scene changing rulebook, because people often write
every turn rules which are predicated on particular scenes ("Every turn
during the Grand Waltz: ..."), and such rules will fail if we haven't kept
up with possible scene changes arising from something done in the action(s)
just completed.
</li></ul>
<ul class="items"><li>(e) The "every turn stage rule" follows the every turn rulebook. This
earns its place among the "first" rules in order for it to have priority
over all the other book-keeping rules at the end of a turn &mdash; including any
which the user, or an extension included by the user, chooses to add to the
turn sequence rules.
</li></ul>
<p class="inwebparagraph">An unusual point here is that the "parse command rule" and the
"generate action rule" are written such that they do nothing unless
the turn sequence rulebook is being followed at the top level (by <code class="display"><span class="extract">Main</span></code>,
that is). This prevents them from being used recursively, which would not
work properly, and enables a popular trick from the time before the 2008
reform to keep working: we can simulate six turns going by in which the
player does nothing by running "follow the turn sequence rules" six
times in a row. Everything happens exactly as it should &mdash; the turn count,
the time of day, timed events, and so on &mdash; except that no commands are
read and no consequent actions generated.
</p>

<pre class="display">
    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> (</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">every</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">): </span><span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">every</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">th.</span>
    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">changing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">th.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">generate</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">rd.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">declare</span><span class="plain"> </span><span class="identifier">everything</span><span class="plain"> </span><span class="identifier">initially</span><span class="plain"> </span><span class="identifier">unmentioned</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">nd.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">parse</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">st.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP26"></a><b>&#167;26.  </b>Three miscellaneous things then happen, all implemented by primitives
in the template I6 layer:
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(e) The "timed events rule" is the one which causes other rules, keyed
to particular times of day, to fire.
</li></ul>
<ul class="items"><li>(f) The "advance time rule" then causes the "time of day" global variable
to advance by the duration of a single turn, which by default is 1 minute.
</li></ul>
<ul class="items"><li>(g) The "update chronological records rule" tells the chronology machine
that a slice of time has been completed. Inform can only decide past tense
conditions like "the black door has been open" by continuously measuring
the present to see if the black door is open now, and making a note for
future reference if it is. But of course it's impossible for any computer
to continuously do anything, and besides, Inform has other calls on it.
What in fact happens is the Inform performs these measurements at "chronology
points", which are strategic moments during play, and this is one of them.
</li></ul>
<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">timed</span><span class="plain"> </span><span class="identifier">events</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">advance</span><span class="plain"> </span><span class="identifier">time</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">update</span><span class="plain"> </span><span class="identifier">chronological</span><span class="plain"> </span><span class="identifier">records</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP27"></a><b>&#167;27.  </b>We now come to the rules anchored at the end, using "last". This part of
the rulebook is reserved for book-keeping which has to happen positively
at the end of the turn.
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(h) First, we check for scene changes again. We did this only a short while
ago, but scene changes might well have arisen as a result of rules which
fired during the every turn rulebook, or from timed events, or in some other
way, and it's important to start the next turn in the correct scene &mdash; so we
check again to make sure.
</li></ul>
<ul class="items"><li>(i) Then we run the "adjust light rule". Keeping track of light and darkness
is quite difficult, and potentially also quite slow: it's not unlike a sort
of discretised version of ray-tracing, with many light sources and barriers
to think about (some transparent, some opaque). So we do this as little as
possible: once per turn we calculate whether the player is in light or not,
and act accordingly if so.
</li></ul>
<ul class="items"><li>(j) The "note object acquisitions rule" does two things:
</li></ul>
<ul class="items"><ul class="items"><li>(i) Gives the "handled" property to everything carried or worn by the player.
</li><li>(ii) Changes the current player's holdall in use, if necessary. (That's to
say: if the player has dropped his previous player's holdall, we try to find a
new one to use from his remaining possessions.)
</li></ul>
</li></ul>
<p class="inwebparagraph"></p>

<ul class="items"><li>(k) The "notify score changes rule" tells the player if the score has changed
during the turn, or rather, since the last time either this rule or the startup
"fix baseline scoring rule" ran. (If the score were to change in the course
of an out-of-world action, it would be notified a turn late, but of course
out-of-world actions are not supposed to do that sort of thing.)
</li></ul>
<pre class="display">
    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">changing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">rd from last.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">adjust</span><span class="plain"> </span><span class="identifier">light</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">nd from last.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">note</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">acquisitions</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">enultimate.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">notify</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">changes</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">turn</span><span class="plain"> </span><span class="identifier">sequence</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">. </span><span class="comment">ast.</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">notify</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">changes</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">:</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">notified</span><span class="plain"> </span><span class="identifier">score</span><span class="plain">:</span>
            <span class="identifier">issue</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">notification</span><span class="plain"> </span><span class="identifier">message</span><span class="plain">;</span>
            <span class="identifier">now</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">notified</span><span class="plain"> </span><span class="identifier">score</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">score</span><span class="plain">;</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP28"></a><b>&#167;28.  </b>That's it, but we need to map these I7 rule names onto the names of their
I6 primitives in the template layer.
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">adjust</span><span class="plain"> </span><span class="identifier">light</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"ADJUST_LIGHT_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[It] [are] [if story tense is present tense]now [end if]pitch dark in</span>
        <span class="string">[if story tense is present tense]here[else]there[end if]!"</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">advance</span><span class="plain"> </span><span class="identifier">time</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"ADVANCE_TIME_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">generate</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"GENERATE_ACTION_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"(considering the first sixteen objects only)[command clarification break]"</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">),</span>
        <span class="string">"Nothing to do!"</span><span class="plain"> (</span><span class="identifier">B</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">note</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">acquisitions</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"NOTE_OBJECT_ACQUISITIONS_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">parse</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"PARSE_COMMAND_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">timed</span><span class="plain"> </span><span class="identifier">events</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"TIMED_EVENTS_R"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP29"></a><b>&#167;29. Shutdown. </b>Goodbye is not the hardest word to say, but it does involve a little bit of
work. It might not actually be goodbye, for one thing: if this rulebook ends
in success, then we go back to repeating the turn sequence rulebook just as
if nothing had happened.
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(a) The "when play ends stage rule" follows the rulebook of the same name.
</li></ul>
<ul class="items"><li>(b) The "resurrect player if asked rule" does nothing unless one of the
"when play ends" rules ran the "resume the game" phrase, in which case
it stops the rulebook with success (see above).
</li></ul>
<ul class="items"><li>(c) The "print player's obituary rule" carries out the activity of nearly
the same name (see below).
</li></ul>
<ul class="items"><li>(d) The "ask the final question rule" asks the celebrated "Would you like
to RESTART, RESTORE a saved game or QUIT?" question, and acts on the
consequences. It can also cause an UNDO, and on a victorious ending may
carry out the "amusing a victorious player" activity (see below). The rule
only actually ends in the event of a QUIT: an UNDO, RESTART or RESTORE is
performed at the hardware level by the virtual machine and destroys the
current execution context entirely.
</li></ul>
<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">play</span><span class="plain"> </span><span class="identifier">ends</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">shutdown</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">resurrect</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">if</span><span class="plain"> </span><span class="identifier">asked</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">shutdown</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">print</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">obituary</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">shutdown</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">ask</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">final</span><span class="plain"> </span><span class="identifier">question</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">shutdown</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">play</span><span class="plain"> </span><span class="identifier">ends</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">play</span><span class="plain"> </span><span class="identifier">ends</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>
    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">print</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">obituary</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">:</span>
        <span class="identifier">carry</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">printing</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">obituary</span><span class="plain"> </span><span class="identifier">activity</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">resurrect</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">if</span><span class="plain"> </span><span class="identifier">asked</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"RESURRECT_PLAYER_IF_ASKED_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">ask</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">final</span><span class="plain"> </span><span class="identifier">question</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"ASK_FINAL_QUESTION_R"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP30"></a><b>&#167;30. Scene changing. </b>Scene changing is handled by a routine called <code class="display"><span class="extract">DetectSceneChange</span></code> which is
compiled directly by Inform: this is so primitive that it can't even be handled
at the template layer. The rulebook is all a little elaborate given that
it contains only one rule, but it's possible to imagine extensions which
need to do book-keeping similar to scene changing and which want to make
use of this opportunity.
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">change</span><span class="plain"> </span><span class="identifier">machinery</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">changing</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">change</span><span class="plain"> </span><span class="identifier">machinery</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"SCENE_CHANGE_MACHINERY_R"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP31"></a><b>&#167;31.  </b>We couldn't do this earlier (because creating a scene automatically generates
two rulebooks, and that would have thrown the rulebook numbering), so let's
take this opportunity to define the "Entire Game" scene:
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">3</span><span class="plain"> - </span><span class="identifier">The</span><span class="plain"> </span><span class="identifier">Entire</span><span class="plain"> </span><span class="identifier">Game</span><span class="plain"> </span><span class="identifier">scene</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">Entire</span><span class="plain"> </span><span class="identifier">Game</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">Entire</span><span class="plain"> </span><span class="identifier">Game</span><span class="plain"> </span><span class="identifier">begins</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="identifier">ended</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">Entire</span><span class="plain"> </span><span class="identifier">Game</span><span class="plain"> </span><span class="identifier">ends</span><span class="plain"> </span><span class="identifier">when</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">story</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">ended</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP32"></a><b>&#167;32. Action-processing. </b>Action-processing happens on two levels: an upper level, handled by the main
"action-processing" rulebook, and a lower level, "specific action-processing".
This division clearly complicates matters, so why do we do it? It turns out be
convenient for several reasons:
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(a) Out-of-world actions like "saving the game" need to run through the
lower level, or they won't do anything at all, but must not run through the
upper level, or in-world rules (before or instead rules, for instance) might
prevent them from happening.
</li></ul>
<ul class="items"><li>(b) Requested actions such as generated by a command like "CLARK, BLOW WHISTLE"
have the reverse behaviour, being handled at the upper level but not the lower.
(If Clark should agree, a definite non-request action "Clark blowing the whistle"
is generated afresh: that one does indeed get to the lower level, but the original
request action doesn't.)
</li></ul>
<ul class="items"><li>(c) Specific action-processing has a rather complicated range of outcomes:
it must succeed or fail, according to whether the action either reaches the
carry out rules or is converted into another action which does, but also
ensure that in the event of failure, the exact rule causing the failure is
recorded in the "reason the action failed" variable.
</li></ul>
<ul class="items"><li>(d) The specific action-processing stage is where we have to split consideration
into action-specific rulebooks (like "check taking") rather than general ones
(like "instead"). To get this right, we want to use some rulebook variables,
and these need to be set at exactly the correct moment. It's tricky to
arrange for that in the middle of a big rulebook, but easy to do so at the
beginning, so we want the start of the SA-P stage to happen at the start of
a rulebook.
</li></ul>
<p class="inwebparagraph">This does mean that an attempt by the user to move the before stage to just
after the check stage (say) will fail &mdash; the before and check stages happen
in different rulebooks, so no amount of rearranging will do this.
</p>

<p class="inwebparagraph"><a id="SP33"></a><b>&#167;33.  </b>The upper level of action-processing consists of seeing whether the actor's
current situation forbids the action from being tried: does anybody or
anything intervene to stop it? Are there are any basic reasons of physical
realism why nobody could possibly try it? Does it require somebody else
to cooperate who in fact chooses not to?
</p>

<p class="inwebparagraph">Doctrinally, the before stage must see actions before anything else can
happen. (It needs the absolute freedom to start fresh actions and dispose
of the one originally intended, sure in the knowledge that no other rules
have been there first.) So before-ish material is anchored at the "first"
end of the rulebook.
</p>

<p class="inwebparagraph">The other book-end on the shelf is provided by the instead stage, which
doctrinally happens only when the action is now thought to be physically
reasonable. So this is anchored at the "last" end. (In fact it is followed
by several more rules also anchored there, but this is essentially just
the clockwork machinery showing through: they aren't realism checks.)
</p>

<p class="inwebparagraph">Miscellaneous general rules to do with physical realism are placed between
the two book-ends, then, and this is where any newly created action-processing
rules created by the user or by extensions will go.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">4</span><span class="plain"> - </span><span class="identifier">Action</span><span class="plain"> </span><span class="identifier">processing</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">before</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">rd.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">set</span><span class="plain"> </span><span class="identifier">pronouns</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">items</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">lists</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span>
        <span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">nd.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">announce</span><span class="plain"> </span><span class="identifier">items</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">lists</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span>
        <span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">st.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">basic</span><span class="plain"> </span><span class="identifier">visibility</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">basic</span><span class="plain"> </span><span class="identifier">accessibility</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">carrying</span><span class="plain"> </span><span class="identifier">requirements</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">instead</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">th from last.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">requested</span><span class="plain"> </span><span class="identifier">actions</span><span class="plain"> </span><span class="identifier">require</span><span class="plain"> </span><span class="identifier">persuasion</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">carry</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">requested</span><span class="plain"> </span><span class="identifier">actions</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">descend</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">end</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">success</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">ast.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP34"></a><b>&#167;34.  </b>As we shall see, most of these rules are primitives implemented by the
template I6 layer, but five are very straightforward.
</p>

<pre class="display">
    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">set</span><span class="plain"> </span><span class="identifier">pronouns</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">items</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">lists</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">:</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">current</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">list</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="identifier">nothing</span><span class="plain">,</span>
            <span class="identifier">set</span><span class="plain"> </span><span class="identifier">pronouns</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">current</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">list</span><span class="plain">.</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">announce</span><span class="plain"> </span><span class="identifier">items</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">lists</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">:</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">current</span><span class="plain"> </span><span class="identifier">item</span><span class="plain"> </span><span class="identifier">from</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">object</span><span class="plain"> </span><span class="identifier">list</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="identifier">nothing</span><span class="plain">,</span>
            <span class="identifier">say</span><span class="plain"> </span><span class="string">"[current item from the multiple object list]: [run paragraph on]"</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>

    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">before</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">abide</span><span class="plain"> </span><span class="identifier">by</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">before</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">instead</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">abide</span><span class="plain"> </span><span class="identifier">by</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">instead</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP35"></a><b>&#167;35.  </b>The final rule in the rulebook always succeeds: this ensures that
action-processing always makes a decision. (I7's doctrine is that an
action "succeeds" if and only if its carry-out stage is reached, so
any action getting right to the end of this rulebook must have
succeeded.)
</p>

<pre class="display">
    <span class="identifier">This</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">end</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">success</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeds</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP36"></a><b>&#167;36.  </b>The action-processing rulebook contains six primitives:
</p>

<p class="inwebparagraph"></p>

<ul class="items"><li>(1) The "basic visibility rule" checks the action to see if it requires
light, and if so, and if the actor is the player and in darkness, asks
the visibility rules (see below) whether the lack of light should stop
the action. (It would be cleaner to apply this rule to all actors, but we
would need much more extensive light calculations to do this.)
</li></ul>
<ul class="items"><li>(2) The "basic accessibility rule" checks the action to see if it requires
the noun to be touchable, and if so, asks the accessibility rulebook to
adjudicate (see below); then repeats the process for the second noun.
</li></ul>
<ul class="items"><li>(3) The "carrying requirements rule" checks the action to see if it requires
the noun to be carried. If so, but the noun is not carried, it generates an
implicit taking action (in effect, "try silently taking N"); and if that
fails, then the rulebook is halted in failure. The process is then repeated
for the second noun.
</li></ul>
<ul class="items"><li>(4) If the action is one where the player requests somebody else to do
something, the "requested actions require persuasion rule" asks the
persuasion rulebook for permission.
</li></ul>
<ul class="items"><li>(5) If the action is one where the player requests somebody else to do
something, the "carry out requested actions rule" starts a new action by
the person asked, and looks at the result: if it failed, the "unsuccessful
attempt by" rulebook is run to tell the player what has (not) happened.
(If that does nothing, a bland message is printed.) In all cases, the
original action of requesting is ended in success: a success because,
whatever happened, the request succeeded in making the actor try to do
something.
</li></ul>
<ul class="items"><li>(6) The "descend to specific action-processing rule" really only runs the
specific action-processing rulebook, but it's implemented as a primitive in
the template I6 layer because it must also find out which are the
specific check, carry out and report rulebooks for the current action (for
instance, "check taking" is the specific check rulebook for the
"taking" action &mdash; which seems obvious from the names: but at run-time,
the names aren't so visible).
</li></ul>
<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">basic</span><span class="plain"> </span><span class="identifier">accessibility</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"BASIC_ACCESSIBILITY_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"You must name something more substantial."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">basic</span><span class="plain"> </span><span class="identifier">visibility</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"BASIC_VISIBILITY_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[It] [are] pitch dark, and [we] [can't see] a thing."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">carrying</span><span class="plain"> </span><span class="identifier">requirements</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"CARRYING_REQUIREMENTS_R"</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">requested</span><span class="plain"> </span><span class="identifier">actions</span><span class="plain"> </span><span class="identifier">require</span><span class="plain"> </span><span class="identifier">persuasion</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"REQUESTED_ACTIONS_REQUIRE_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[The noun] [have] better things to do."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">carry</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">requested</span><span class="plain"> </span><span class="identifier">actions</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"CARRY_OUT_REQUESTED_ACTIONS_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[The noun] [are] unable to do that."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">descend</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
    <span class="string">"DESCEND_TO_SPECIFIC_ACTION_R"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP37"></a><b>&#167;37. Specific action-processing. </b>And now we descend to the lower level, which is much easier to understand.
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">work</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">details</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">first</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">specific</span>
    <span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span>
        <span class="plain">(</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">investigate</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">before</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">;</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeded</span><span class="plain">, </span><span class="identifier">now</span><span class="plain"> </span><span class="identifier">within</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">sight</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">true</span><span class="plain">;</span>
        <span class="identifier">otherwise</span><span class="plain"> </span><span class="identifier">now</span><span class="plain"> </span><span class="identifier">within</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">sight</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">false</span><span class="plain">.</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> (</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">check</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">anonymously</span><span class="plain"> </span><span class="identifier">abide</span><span class="plain"> </span><span class="identifier">by</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">check</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> (</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">carry</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">carry</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">.</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> (</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">after</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">world</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">true</span><span class="plain">, </span><span class="identifier">abide</span><span class="plain"> </span><span class="identifier">by</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">after</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span>
        <span class="plain">(</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">investigate</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">after</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">within</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">sight</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">false</span><span class="plain">:</span>
            <span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">;</span>
            <span class="identifier">if</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeded</span><span class="plain">, </span><span class="identifier">now</span><span class="plain"> </span><span class="identifier">within</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">sight</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">true</span><span class="plain">;</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> (</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">report</span><span class="plain"> </span><span class="identifier">stage</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">within</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">sight</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">true</span><span class="plain"> </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">keeping</span><span class="plain"> </span><span class="identifier">silent</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">false</span><span class="plain">,</span>
            <span class="identifier">follow</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">report</span><span class="plain"> </span><span class="identifier">rulebook</span><span class="plain">;</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain">-</span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">: </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeds</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP38"></a><b>&#167;38.  </b>The unusual use of "anonymously abide by" above is a form of "abide
by" which may be worth explaining. Suppose rule X consists of an
instruction to abide by rulebook Y, and suppose that Y in fact fails
when it reaches Y_k. If the ordinary "abide by" is used then the action
will be deemed to have failed at rule X, but if "anonymously abide by"
is used then it will be deemed to have failed at Y_k. (Thus X remains
anonymous: it can never be the culprit.) We only use this at the check
stage, because the carry out, report and after stages are not allowed to
fail the action. (The after stage is allowed to end it, but not in
failure.)
</p>

<p class="inwebparagraph"><a id="SP39"></a><b>&#167;39.  </b>The specific action-processing rulebook is probably more fruitful than the
main one if we want to modify what happens. For instance:
</p>

<blockquote>
    <p>This is the sixth sense rule: if the player is not the actor, say "You sense that [the actor] is up to something."</p>

</blockquote>

<blockquote>
    <p>The sixth sense rule is listed before the carry out stage rule in the specific action-processing rules.</p>

</blockquote>

<p class="inwebparagraph">...produces the message at a time when the action is definitely possible and
will succeed, but before anything has been done.
</p>

<p class="inwebparagraph"><a id="SP40"></a><b>&#167;40.  </b>The only rule not spelled out was the primitive "work out details of
specific action rule", which initialises the rulebook variables so that
they record the action's specific check, carry out and report rulebooks,
and whether or not it is in world.
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">work</span><span class="plain"> </span><span class="identifier">out</span><span class="plain"> </span><span class="identifier">details</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">specific</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
    <span class="string">"WORK_OUT_DETAILS_OF_SPECIFIC_R"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP41"></a><b>&#167;41. Player's action awareness. </b>This rulebook decides whether or not an action by somebody should be routinely
reported to the player: is he aware of it having taken place? If the rulebook
positively succeeds then he is, and otherwise not.
</p>

<pre class="display">
    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">rule</span>
        <span class="plain">(</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">aware</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">his</span><span class="plain"> </span><span class="identifier">own</span><span class="plain"> </span><span class="identifier">actions</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">actor</span><span class="plain">, </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeds</span><span class="plain">.</span>
    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">rule</span>
        <span class="plain">(</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">aware</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">actions</span><span class="plain"> </span><span class="identifier">by</span><span class="plain"> </span><span class="identifier">visible</span><span class="plain"> </span><span class="identifier">actors</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">actor</span><span class="plain"> </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">can</span><span class="plain"> </span><span class="identifier">see</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">actor</span><span class="plain">, </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeds</span><span class="plain">.</span>
    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">rule</span>
        <span class="plain">(</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">aware</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">actions</span><span class="plain"> </span><span class="identifier">on</span><span class="plain"> </span><span class="identifier">visible</span><span class="plain"> </span><span class="identifier">nouns</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">noun</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">thing</span><span class="plain"> </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">can</span><span class="plain"> </span><span class="identifier">see</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">noun</span><span class="plain">, </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeds</span><span class="plain">.</span>
    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">player</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">awareness</span><span class="plain"> </span><span class="identifier">rule</span>
        <span class="plain">(</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">aware</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">actions</span><span class="plain"> </span><span class="identifier">on</span><span class="plain"> </span><span class="identifier">visible</span><span class="plain"> </span><span class="identifier">second</span><span class="plain"> </span><span class="identifier">nouns</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">second</span><span class="plain"> </span><span class="identifier">noun</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">thing</span><span class="plain"> </span><span class="identifier">and</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">can</span><span class="plain"> </span><span class="identifier">see</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">second</span><span class="plain"> </span><span class="identifier">noun</span><span class="plain">, </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeds</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP42"></a><b>&#167;42. Accessibility. </b>The "accessibility" rulebook is not very visible to users: it's another
behind-the-scenes rulebook for managing the decision as to whether the actor
can touch any items which the intended action requires him to be able to
reach.
</p>

<p class="inwebparagraph">In its default configuration, it contains only the "access through barriers"
rule. This in all circumstances either succeeds or fails: in other words, it
makes a definite decision, and this is why it is anchored as "last" in the
rulebook. If users or extensions want to tweak accessibility at this
general level, any new rules they add will get the chance to decide before
the "access through barriers" rule settles the matter. But in practice
we expect most users to work with one of the two reaching rulebooks instead.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">5</span><span class="plain"> - </span><span class="identifier">Accessibility</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">access</span><span class="plain"> </span><span class="identifier">through</span><span class="plain"> </span><span class="identifier">barriers</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">accessibility</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">access</span><span class="plain"> </span><span class="identifier">through</span><span class="plain"> </span><span class="identifier">barriers</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"ACCESS_THROUGH_BARRIERS_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[regarding the noun][Those] [aren't] available."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP43"></a><b>&#167;43. Reaching inside. </b>What the access through barriers rule does is to try to construct a path
through the object containment tree from the actor to the item needed, and
to apply the reaching inside or reaching outside rulebooks each time this
path passes inside or outside of a container (or room). (Supporters never
form barriers.)
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">reach</span><span class="plain"> </span><span class="identifier">inside</span><span class="plain"> </span><span class="identifier">rooms</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">reaching</span><span class="plain"> </span><span class="identifier">inside</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">enultimate.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">reach</span><span class="plain"> </span><span class="identifier">inside</span><span class="plain"> </span><span class="identifier">closed</span><span class="plain"> </span><span class="identifier">containers</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">reaching</span>
    <span class="identifier">inside</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">. </span><span class="comment">ast.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">reach</span><span class="plain"> </span><span class="identifier">inside</span><span class="plain"> </span><span class="identifier">closed</span><span class="plain"> </span><span class="identifier">containers</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"CANT_REACH_INSIDE_CLOSED_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[The noun] [aren't] open."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">reach</span><span class="plain"> </span><span class="identifier">inside</span><span class="plain"> </span><span class="identifier">rooms</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"CANT_REACH_INSIDE_ROOMS_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[We] [can't] reach into [the noun]."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP44"></a><b>&#167;44. Reaching outside. </b>And, not quite symmetrically since we don't need to block room-to-room
reaching on both the inbound and outbound directions,
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">reach</span><span class="plain"> </span><span class="identifier">outside</span><span class="plain"> </span><span class="identifier">closed</span><span class="plain"> </span><span class="identifier">containers</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">reaching</span><span class="plain"> </span><span class="identifier">outside</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">reach</span><span class="plain"> </span><span class="identifier">outside</span><span class="plain"> </span><span class="identifier">closed</span><span class="plain"> </span><span class="identifier">containers</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"CANT_REACH_OUTSIDE_CLOSED_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[The noun] [aren't] open."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP45"></a><b>&#167;45. Visibility. </b>The visibility rulebook actually has the opposite sense to the one the name
might suggest. It is applied only when the player (not any other actor) tries
to perform an action which requires light to see by; the action is blocked
if the rulebook succeeds. (Well, but we could hardly call it the invisibility
rulebook. The name is supposed to suggest that the consideration of visibility
is being applied: rather the way cricket matches end with a declaration that
"light stopped play", meaning of course that darkness did.)
</p>

<pre class="display">
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">act</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">dark</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">listed</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">visibility</span><span class="plain"> </span><span class="identifier">rules</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">visibility</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> (</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">act</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">dark</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">): </span><span class="identifier">if</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">darkness</span><span class="plain">, </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">succeeds</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP46"></a><b>&#167;46. Does the player mean. </b>This rulebook is akin to a set of preferences about how to interpret the
player's commands in cases of ambiguity. No two Inform users are likely to
agree about the best way to decide these, so we are fairly hands-off, and
make only one rule as standard:
</p>

<pre class="display">
    <span class="identifier">Does</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span><span class="plain"> </span><span class="identifier">mean</span><span class="plain"> </span><span class="identifier">taking</span><span class="plain"> </span><span class="identifier">something</span><span class="plain"> </span><span class="identifier">which</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">carried</span><span class="plain"> </span><span class="identifier">by</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">player</span>
        <span class="plain">(</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">very</span><span class="plain"> </span><span class="identifier">unlikely</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">mean</span><span class="plain"> </span><span class="identifier">taking</span><span class="plain"> </span><span class="identifier">what</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">already</span><span class="plain"> </span><span class="identifier">carried</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">it</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">very</span><span class="plain"> </span><span class="identifier">unlikely</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP47"></a><b>&#167;47.  </b>And that completes the creation and stocking of the 25 rulebooks. More than
half of them are initially empty, including before, instead and after &mdash; at the
end of the day, these rulebooks are hooks allowing the user to change the
ordinary behaviour of things, but ordinariness is exactly what the Standard
Rules is all about.
</p>

<p class="inwebparagraph"><a id="SP48"></a><b>&#167;48. Adjectives applied to values. </b>There is a small stock of built-in adjectives for values.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">6</span><span class="plain"> - </span><span class="identifier">Adjectival</span><span class="plain"> </span><span class="identifier">definitions</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">can</span><span class="plain"> </span><span class="identifier">be</span><span class="plain"> </span><span class="identifier">recurring</span><span class="plain"> </span><span class="identifier">or</span><span class="plain"> </span><span class="identifier">non</span><span class="plain">-</span><span class="identifier">recurring</span><span class="plain">. </span><span class="identifier">A</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">usually</span><span class="plain"> </span><span class="identifier">non</span><span class="plain">-</span><span class="identifier">recurring</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">Entire</span><span class="plain"> </span><span class="identifier">Game</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">recurring</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP49"></a><b>&#167;49. Scene descriptions. </b>And there is one build-in value property for values.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">7</span><span class="plain"> - </span><span class="identifier">Scene</span><span class="plain"> </span><span class="identifier">descriptions</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">has</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">description</span><span class="plain">.</span>
    <span class="identifier">When</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> (</span><span class="identifier">called</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">event</span><span class="plain">) </span><span class="identifier">begins</span><span class="plain"> (</span><span class="identifier">this</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">scene</span><span class="plain"> </span><span class="identifier">description</span><span class="plain"> </span><span class="identifier">text</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain">):</span>
        <span class="identifier">if</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">description</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">event</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="string">""</span><span class="plain">,</span>
            <span class="identifier">say</span><span class="plain"> </span><span class="string">"[description of the event][paragraph break]"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP50"></a><b>&#167;50. Command parser errors. </b>This abstracts a set of return codes from the I6 parser, which are written
there as constants with the notation <code class="display"><span class="extract">*_ETYPE</span></code>.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">8</span><span class="plain"> - </span><span class="identifier">Command</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">errors</span>

    <span class="identifier">A</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">error</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">kind</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">value</span><span class="plain">. </span><span class="identifier">The</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">errors</span><span class="plain"> </span><span class="identifier">are</span>
        <span class="identifier">didn</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">understand</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">only</span><span class="plain"> </span><span class="identifier">understood</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="identifier">far</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">didn</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">understand</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">number</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">can</span><span class="plain"> </span><span class="identifier">only</span><span class="plain"> </span><span class="identifier">do</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">something</span><span class="plain"> </span><span class="identifier">animate</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">see</span><span class="plain"> </span><span class="identifier">any</span><span class="plain"> </span><span class="identifier">such</span><span class="plain"> </span><span class="identifier">thing</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">said</span><span class="plain"> </span><span class="identifier">too</span><span class="plain"> </span><span class="identifier">little</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">aren</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">holding</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">use</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">objects</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">can</span><span class="plain"> </span><span class="identifier">only</span><span class="plain"> </span><span class="identifier">use</span><span class="plain"> </span><span class="identifier">multiple</span><span class="plain"> </span><span class="identifier">objects</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">not</span><span class="plain"> </span><span class="identifier">sure</span><span class="plain"> </span><span class="identifier">what</span><span class="plain"> </span><span class="identifier">it</span><span class="plain"> </span><span class="identifier">refers</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">excepted</span><span class="plain"> </span><span class="identifier">something</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="identifier">included</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">not</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">verb</span><span class="plain"> </span><span class="identifier">I</span><span class="plain"> </span><span class="identifier">recognise</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">not</span><span class="plain"> </span><span class="identifier">something</span><span class="plain"> </span><span class="identifier">you</span><span class="plain"> </span><span class="identifier">need</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">refer</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">see</span><span class="plain"> </span><span class="identifier">it</span><span class="plain"> </span><span class="identifier">at</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">moment</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">didn</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">understand</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">way</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">finished</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">not</span><span class="plain"> </span><span class="identifier">enough</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">those</span><span class="plain"> </span><span class="identifier">available</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">nothing</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">do</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">noun</span><span class="plain"> </span><span class="identifier">did</span><span class="plain"> </span><span class="identifier">not</span><span class="plain"> </span><span class="identifier">make</span><span class="plain"> </span><span class="identifier">sense</span><span class="plain"> </span><span class="identifier">in</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">context</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">referred</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">determination</span><span class="plain"> </span><span class="identifier">of</span><span class="plain"> </span><span class="identifier">scope</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">I</span><span class="plain"> </span><span class="identifier">beg</span><span class="plain"> </span><span class="identifier">your</span><span class="plain"> </span><span class="identifier">pardon</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">again</span><span class="plain"> </span><span class="identifier">the</span><span class="plain"> </span><span class="identifier">addressee</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">comma</span><span class="plain"> </span><span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">begin</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">see</span><span class="plain"> </span><span class="identifier">whom</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">talk</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">,</span>
        <span class="identifier">can</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">talk</span><span class="plain"> </span><span class="identifier">to</span><span class="plain"> </span><span class="identifier">inanimate</span><span class="plain"> </span><span class="identifier">things</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">, </span><span class="identifier">and</span>
        <span class="identifier">didn</span><span class="plain">'</span><span class="identifier">t</span><span class="plain"> </span><span class="identifier">understand</span><span class="plain"> </span><span class="identifier">addressee</span><span class="plain">'</span><span class="identifier">s</span><span class="plain"> </span><span class="identifier">last</span><span class="plain"> </span><span class="identifier">name</span><span class="plain"> </span><span class="identifier">error</span><span class="plain">.</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">latest</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">error</span><span class="plain"> </span><span class="identifier">is</span><span class="plain"> </span><span class="identifier">a</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">error</span><span class="plain"> </span><span class="identifier">that</span><span class="plain"> </span><span class="identifier">varies</span><span class="plain">.</span>
    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">latest</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">error</span><span class="plain"> </span><span class="identifier">variable</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"etype"</span><span class="plain">.</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP51"></a><b>&#167;51. Internal rules. </b>These rules do nothing in themselves, and are really just hooks on which
some response texts can be hung.
</p>

<pre class="display">
    <span class="identifier">Section</span><span class="plain"> </span><span class="constant">9</span><span class="plain"> - </span><span class="identifier">Responses</span><span class="plain"> </span><span class="identifier">for</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rules</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">list</span><span class="plain"> </span><span class="identifier">writer</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"LIST_WRITER_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">" ("</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">),</span>
        <span class="string">")"</span><span class="plain"> (</span><span class="identifier">B</span><span class="plain">),</span>
        <span class="string">" and "</span><span class="plain"> (</span><span class="identifier">C</span><span class="plain">),</span>
        <span class="string">"providing light"</span><span class="plain"> (</span><span class="identifier">D</span><span class="plain">),</span>
        <span class="string">"closed"</span><span class="plain"> (</span><span class="identifier">E</span><span class="plain">),</span>
        <span class="string">"empty"</span><span class="plain"> (</span><span class="identifier">F</span><span class="plain">),</span>
        <span class="string">"closed and empty"</span><span class="plain"> (</span><span class="identifier">G</span><span class="plain">),</span>
        <span class="string">"closed and providing light"</span><span class="plain"> (</span><span class="identifier">H</span><span class="plain">),</span>
        <span class="string">"empty and providing light"</span><span class="plain"> (</span><span class="identifier">I</span><span class="plain">),</span>
        <span class="string">"closed, empty[if serial comma option is active],[end if] and providing light"</span><span class="plain"> (</span><span class="identifier">J</span><span class="plain">),</span>
        <span class="string">"providing light and being worn"</span><span class="plain"> (</span><span class="identifier">K</span><span class="plain">),</span>
        <span class="string">"being worn"</span><span class="plain"> (</span><span class="identifier">L</span><span class="plain">),</span>
        <span class="string">"open"</span><span class="plain"> (</span><span class="identifier">M</span><span class="plain">),</span>
        <span class="string">"open but empty"</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">),</span>
        <span class="string">"closed"</span><span class="plain"> (</span><span class="identifier">O</span><span class="plain">),</span>
        <span class="string">"closed and locked"</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">),</span>
        <span class="string">"containing"</span><span class="plain"> (</span><span class="identifier">Q</span><span class="plain">),</span>
        <span class="string">"on [if the noun is a person]whom[otherwise]which[end if] "</span><span class="plain"> (</span><span class="identifier">R</span><span class="plain">),</span>
        <span class="string">", on top of [if the noun is a person]whom[otherwise]which[end if] "</span><span class="plain"> (</span><span class="identifier">S</span><span class="plain">),</span>
        <span class="string">"in [if the noun is a person]whom[otherwise]which[end if] "</span><span class="plain"> (</span><span class="identifier">T</span><span class="plain">),</span>
        <span class="string">", inside [if the noun is a person]whom[otherwise]which[end if] "</span><span class="plain"> (</span><span class="identifier">U</span><span class="plain">),</span>
        <span class="string">"[regarding list writer internals][are]"</span><span class="plain"> (</span><span class="identifier">V</span><span class="plain">),</span>
        <span class="string">"[regarding list writer internals][are] nothing"</span><span class="plain"> (</span><span class="identifier">W</span><span class="plain">),</span>
        <span class="string">"Nothing"</span><span class="plain"> (</span><span class="identifier">X</span><span class="plain">),</span>
        <span class="string">"nothing"</span><span class="plain"> (</span><span class="identifier">Y</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">action</span><span class="plain"> </span><span class="identifier">processing</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"ACTION_PROCESSING_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[bracket]That command asks to do something outside of play, so it can</span>
        <span class="string">only make sense from you to me. [The noun] cannot be asked to do this.</span>
        <span class="string">bracket]"</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">),</span>
        <span class="string">"You must name an object."</span><span class="plain"> (</span><span class="identifier">B</span><span class="plain">),</span>
        <span class="string">"You may not name an object."</span><span class="plain"> (</span><span class="identifier">C</span><span class="plain">),</span>
        <span class="string">"You must supply a noun."</span><span class="plain"> (</span><span class="identifier">D</span><span class="plain">),</span>
        <span class="string">"You may not supply a noun."</span><span class="plain"> (</span><span class="identifier">E</span><span class="plain">),</span>
        <span class="string">"You must name a second object."</span><span class="plain"> (</span><span class="identifier">F</span><span class="plain">),</span>
        <span class="string">"You may not name a second object."</span><span class="plain"> (</span><span class="identifier">G</span><span class="plain">),</span>
        <span class="string">"You must supply a second noun."</span><span class="plain"> (</span><span class="identifier">H</span><span class="plain">),</span>
        <span class="string">"You may not supply a second noun."</span><span class="plain"> (</span><span class="identifier">I</span><span class="plain">),</span>
        <span class="string">"(Since something dramatic has happened, your list of commands has been</span>
        <span class="string">cut short.)"</span><span class="plain"> (</span><span class="identifier">J</span><span class="plain">),</span>
        <span class="string">"I didn't understand that instruction."</span><span class="plain"> (</span><span class="identifier">K</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">error</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"PARSER_ERROR_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"I didn't understand that sentence."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">),</span>
        <span class="string">"I only understood you as far as wanting to "</span><span class="plain"> (</span><span class="identifier">B</span><span class="plain">),</span>
        <span class="string">"I only understood you as far as wanting to (go) "</span><span class="plain"> (</span><span class="identifier">C</span><span class="plain">),</span>
        <span class="string">"I didn't understand that number."</span><span class="plain"> (</span><span class="identifier">D</span><span class="plain">),</span>
        <span class="string">"[We] [can't] see any such thing."</span><span class="plain"> (</span><span class="identifier">E</span><span class="plain">),</span>
        <span class="string">"You seem to have said too little!"</span><span class="plain"> (</span><span class="identifier">F</span><span class="plain">),</span>
        <span class="string">"[We] [aren't] holding that!"</span><span class="plain"> (</span><span class="identifier">G</span><span class="plain">),</span>
        <span class="string">"You can't use multiple objects with that verb."</span><span class="plain"> (</span><span class="identifier">H</span><span class="plain">),</span>
        <span class="string">"You can only use multiple objects once on a line."</span><span class="plain"> (</span><span class="identifier">I</span><span class="plain">),</span>
        <span class="string">"I'm not sure what ['][pronoun i6 dictionary word]['] refers to."</span><span class="plain"> (</span><span class="identifier">J</span><span class="plain">),</span>
        <span class="string">"[We] [can't] see ['][pronoun i6 dictionary word]['] ([the noun]) at the moment."</span><span class="plain"> (</span><span class="identifier">K</span><span class="plain">),</span>
        <span class="string">"You excepted something not included anyway!"</span><span class="plain"> (</span><span class="identifier">L</span><span class="plain">),</span>
        <span class="string">"You can only do that to something animate."</span><span class="plain"> (</span><span class="identifier">M</span><span class="plain">),</span>
        <span class="string">"That's not a verb I </span>
            <span class="string">active]recognize[otherwise]recognise[end if]."</span><span class="plain"> (</span><span class="identifier">N</span><span class="plain">),</span>
        <span class="string">"That's not something you need to refer to in the course of this game."</span><span class="plain"> (</span><span class="identifier">O</span><span class="plain">),</span>
        <span class="string">"I didn't understand the way that finished."</span><span class="plain"> (</span><span class="identifier">P</span><span class="plain">),</span>
        <span class="string">"[if number understood is 0]None[otherwise]Only [number understood in words]</span><span class="comment">nd if</span>
            <span class="string">of those [regarding the number understood][are] available."</span><span class="plain"> (</span><span class="identifier">Q</span><span class="plain">),</span>
        <span class="string">"That noun did not make sense in this context."</span><span class="plain"> (</span><span class="identifier">R</span><span class="plain">),</span>
        <span class="string">"To repeat a command like 'frog, jump', just say 'again', not 'frog, again'."</span><span class="plain"> (</span><span class="identifier">S</span><span class="plain">),</span>
        <span class="string">"You can't begin with a comma."</span><span class="plain"> (</span><span class="identifier">T</span><span class="plain">),</span>
        <span class="string">"You seem to want to talk to someone, but I can't see whom."</span><span class="plain"> (</span><span class="identifier">U</span><span class="plain">),</span>
        <span class="string">"You can't talk to [the noun]."</span><span class="plain"> (</span><span class="identifier">V</span><span class="plain">),</span>
        <span class="string">"To talk to someone, try 'someone, hello' or some such."</span><span class="plain"> (</span><span class="identifier">W</span><span class="plain">),</span>
        <span class="string">"I beg your pardon?"</span><span class="plain"> (</span><span class="identifier">X</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">nothing</span><span class="plain"> </span><span class="identifier">error</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"PARSER_N_ERROR_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"Nothing to do!"</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">),</span>
        <span class="string">"[There] [adapt the verb are from the third person plural] none at all available!"</span><span class="plain"> (</span><span class="identifier">B</span><span class="plain">),</span>
        <span class="string">"[regarding the noun][Those] [seem] to belong to [the noun]."</span><span class="plain"> (</span><span class="identifier">C</span><span class="plain">),</span>
        <span class="string">"[regarding the noun][Those] [can't] contain things."</span><span class="plain"> (</span><span class="identifier">D</span><span class="plain">),</span>
        <span class="string">"[The noun] [aren't] open."</span><span class="plain"> (</span><span class="identifier">E</span><span class="plain">),</span>
        <span class="string">"[The noun] [are] empty."</span><span class="plain"> (</span><span class="identifier">F</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">darkness</span><span class="plain"> </span><span class="identifier">name</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span><span class="plain"> </span><span class="string">"DARKNESS_NAME_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"Darkness"</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">command</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"PARSER_COMMAND_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"Sorry, that can't be corrected."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">),</span>
        <span class="string">"Think nothing of it."</span><span class="plain"> (</span><span class="identifier">B</span><span class="plain">),</span>
        <span class="string">"'Oops' can only correct a single word."</span><span class="plain"> (</span><span class="identifier">C</span><span class="plain">),</span>
        <span class="string">"You can hardly repeat that."</span><span class="plain"> (</span><span class="identifier">D</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">parser</span><span class="plain"> </span><span class="identifier">clarification</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"PARSER_CLARIF_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"Who do you mean, "</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">),</span>
        <span class="string">"Which do you mean, "</span><span class="plain"> (</span><span class="identifier">B</span><span class="plain">),</span>
        <span class="string">"Sorry, you can only have one item here. Which exactly?"</span><span class="plain"> (</span><span class="identifier">C</span><span class="plain">),</span>
        <span class="string">"Whom do you want [if the noun is not the player][the noun] [end if]to</span>
            <span class="string">[parser command so far]?"</span><span class="plain"> (</span><span class="identifier">D</span><span class="plain">),</span>
        <span class="string">"What do you want [if the noun is not the player][the noun] [end if]to</span>
            <span class="string">[parser command so far]?"</span><span class="plain"> (</span><span class="identifier">E</span><span class="plain">),</span>
        <span class="string">"those things"</span><span class="plain"> (</span><span class="identifier">F</span><span class="plain">),</span>
        <span class="string">"that"</span><span class="plain"> (</span><span class="identifier">G</span><span class="plain">),</span>
        <span class="string">" or "</span><span class="plain"> (</span><span class="identifier">H</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">yes</span><span class="plain"> </span><span class="identifier">or</span><span class="plain"> </span><span class="identifier">no</span><span class="plain"> </span><span class="identifier">question</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"YES_OR_NO_QUESTION_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"Please answer yes or no."</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">).</span>

    <span class="identifier">The</span><span class="plain"> </span><span class="identifier">print</span><span class="plain"> </span><span class="identifier">protagonist</span><span class="plain"> </span><span class="identifier">internal</span><span class="plain"> </span><span class="identifier">rule</span><span class="plain"> </span><span class="identifier">translates</span><span class="plain"> </span><span class="identifier">into</span><span class="plain"> </span><span class="identifier">I6</span><span class="plain"> </span><span class="identifier">as</span>
        <span class="string">"PRINT_PROTAGONIST_INTERNAL_R"</span><span class="plain"> </span><span class="identifier">with</span>
        <span class="string">"[We]"</span><span class="plain"> (</span><span class="identifier">A</span><span class="plain">),</span>
        <span class="string">"[ourselves]"</span><span class="plain"> (</span><span class="identifier">B</span><span class="plain">),</span>
        <span class="string">"[our] former self"</span><span class="plain"> (</span><span class="identifier">C</span><span class="plain">).</span>
</pre>

<p class="inwebparagraph"></p>

<hr class="tocbar">
<ul class="toc"><li><a href="S-pwm.html">Back to 'Physical World Model'</a></li><li><a href="S-act.html">Continue with 'Activities'</a></li></ul><hr class="tocbar">
<!--End of weave-->
		</main>
	</body>
</html>


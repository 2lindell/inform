<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>S/ut2</title>
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">
		<link href="../inweb.css" rel="stylesheet" rev="stylesheet" type="text/css">
	</head>
	<body>
		<nav role="navigation">
		<h1><a href="../webs.html">Sources</a></h1>
<ul>
<li><a href="../compiler.html">compiler tools</a></li>
<li><a href="../other.html">other tools</a></li>
<li><a href="../extensions.html"><b>extensions and kits</b></a></li>
<li><a href="../units.html">unit test tools</a></li>
/ul>
<h2>Extensions</h2>
<ul>
<li><a href="../basic_inform/index.html">Basic Inform</a></li>
<li><a href="../standard_rules/index.html">Standard Rules</a></li>
</ul>
<h2>Kits</h2>
<ul>
<li><a href="../BasicInformKit/index.html">BasicInformKit</a></li>
<li><a href="../BasicInformExtrasKit/index.html">BasicInformExtrasKit</a></li>
<li><a href="../CommandParserKit/index.html">CommandParserKit</a></li>
<li><a href="../EnglishLanguageKit/index.html">EnglishLanguageKit</a></li>
<li><a href="../WorldModelKit/index.html">WorldModelKit</a></li>
</ul>


		</nav>
		<main role="main">
		
<!--Weave of 'S/ct' generated by 7-->
<ul class="crumbs"><li><a href="../webs.html">Source</a></li><li><a href="../extensions.html">Kits</a></li><li><a href="index.html">BasicInformKit</a></li><li><b>Char Template</b></li></ul><p class="purpose">To decide whether letters are upper or lower case, and convert between the two.</p>

<ul class="toc"><li><a href="#SP1">&#167;1. Char Is Of Case</a></li><li><a href="#SP2">&#167;2. Char To Case</a></li><li><a href="#SP3">&#167;3. Reversing Case</a></li><li><a href="#SP4">&#167;4. DigitToValue</a></li><li><a href="#SP5">&#167;5. Testing</a></li></ul><hr class="tocbar">

<p class="inwebparagraph"><a id="SP1"></a><b>&#167;1. Char Is Of Case. </b>The following decides whether a character <code class="display"><span class="extract">c</span></code> belongs to case <code class="display"><span class="extract">case</span></code>, where
0 means lower case and 1 means upper. <code class="display"><span class="extract">c</span></code> is interpreted according to the
character casing chart in "UnicodeData.i6t", which means, it will be
ZSCII for the Z-machine and Unicode for Glulx.
</p>


<pre class="display">
    <span class="plain">[ </span><span class="identifier">CharIsOfCase</span><span class="plain"> </span><span class="identifier">c</span><span class="plain"> </span><span class="identifier">case</span>
        <span class="identifier">i</span><span class="plain"> </span><span class="identifier">tab</span><span class="plain"> </span><span class="identifier">min</span><span class="plain"> </span><span class="identifier">max</span><span class="plain"> </span><span class="identifier">len</span><span class="plain"> </span><span class="identifier">par</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain">&lt;</span><span class="character">'A'</span><span class="plain">) </span><span class="reserved">rfalse</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">case</span><span class="plain"> == </span><span class="constant">0</span><span class="plain">) {</span>
            <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">c</span><span class="plain"> &gt;= </span><span class="character">'a'</span><span class="plain">) &amp;&amp; (</span><span class="identifier">c</span><span class="plain"> &lt;= </span><span class="character">'z'</span><span class="plain">)) </span><span class="reserved">rtrue</span><span class="plain">;</span>
            <span class="identifier">tab</span><span class="plain"> = </span><span class="identifier">CharCasingChart0</span><span class="plain">;</span>
        <span class="plain">} </span><span class="reserved">else</span><span class="plain"> {</span>
            <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">c</span><span class="plain"> &gt;= </span><span class="character">'A'</span><span class="plain">) &amp;&amp; (</span><span class="identifier">c</span><span class="plain"> &lt;= </span><span class="character">'Z'</span><span class="plain">)) </span><span class="reserved">rtrue</span><span class="plain">;</span>
            <span class="identifier">tab</span><span class="plain"> = </span><span class="identifier">CharCasingChart1</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain">&lt;128) </span><span class="reserved">rfalse</span><span class="plain">;</span>
        <span class="reserved">while</span><span class="plain"> (</span><span class="identifier">tab</span><span class="plain">--&gt;</span><span class="identifier">i</span><span class="plain">) {</span>
            <span class="identifier">min</span><span class="plain"> = </span><span class="identifier">tab</span><span class="plain">--&gt;</span><span class="identifier">i</span><span class="plain">; </span><span class="identifier">i</span><span class="plain">++;</span>
            <span class="identifier">len</span><span class="plain"> = </span><span class="identifier">tab</span><span class="plain">--&gt;</span><span class="identifier">i</span><span class="plain">; </span><span class="identifier">i</span><span class="plain">++;</span>
            <span class="identifier">i</span><span class="plain">++;</span>
            <span class="identifier">par</span><span class="plain"> = </span><span class="constant">0</span><span class="plain">;</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">len</span><span class="plain">&lt;0) { </span><span class="identifier">par</span><span class="plain"> = </span><span class="constant">1</span><span class="plain">; </span><span class="identifier">len</span><span class="plain"> = </span><span class="constant">-</span><span class="identifier">len</span><span class="plain">; }</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain"> &lt; </span><span class="identifier">min</span><span class="plain">) </span><span class="reserved">rfalse</span><span class="plain">;</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain"> &lt; </span><span class="identifier">min</span><span class="plain">+</span><span class="identifier">len</span><span class="plain">) {</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">par</span><span class="plain">) { </span><span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">c</span><span class="plain">-</span><span class="identifier">min</span><span class="plain">) % </span><span class="constant">2</span><span class="plain"> == </span><span class="constant">0</span><span class="plain">) </span><span class="reserved">rtrue</span><span class="plain">; }</span>
                <span class="reserved">else</span><span class="plain"> { </span><span class="reserved">rtrue</span><span class="plain">; }</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
        <span class="reserved">rfalse</span><span class="plain">;</span>
    <span class="plain">];</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP2"></a><b>&#167;2. Char To Case. </b>And the following converts character <code class="display"><span class="extract">c</span></code> to the desired case, or returns
it unchanged if it is not a letter with variant casings.
</p>


<pre class="display">
    <span class="plain">[ </span><span class="identifier">CharToCase</span><span class="plain"> </span><span class="identifier">c</span><span class="plain"> </span><span class="identifier">case</span>
        <span class="identifier">i</span><span class="plain"> </span><span class="identifier">tab</span><span class="plain"> </span><span class="identifier">min</span><span class="plain"> </span><span class="identifier">max</span><span class="plain"> </span><span class="identifier">len</span><span class="plain"> </span><span class="identifier">par</span><span class="plain"> </span><span class="identifier">del</span><span class="plain"> </span><span class="identifier">f</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain">&lt;</span><span class="character">'A'</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">c</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">case</span><span class="plain"> == </span><span class="constant">1</span><span class="plain">) {</span>
            <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">c</span><span class="plain"> &gt;= </span><span class="character">'a'</span><span class="plain">) &amp;&amp; (</span><span class="identifier">c</span><span class="plain"> &lt;= </span><span class="character">'z'</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">c</span><span class="plain">-32;</span>
            <span class="identifier">tab</span><span class="plain"> = </span><span class="identifier">CharCasingChart0</span><span class="plain">;</span>
        <span class="plain">} </span><span class="reserved">else</span><span class="plain"> {</span>
            <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">c</span><span class="plain"> &gt;= </span><span class="character">'A'</span><span class="plain">) &amp;&amp; (</span><span class="identifier">c</span><span class="plain"> &lt;= </span><span class="character">'Z'</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">c</span><span class="plain">+32;</span>
            <span class="identifier">tab</span><span class="plain"> = </span><span class="identifier">CharCasingChart1</span><span class="plain">;</span>
        <span class="plain">}</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain">&lt;128) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">c</span><span class="plain">;</span>
        <span class="reserved">while</span><span class="plain"> (</span><span class="identifier">tab</span><span class="plain">--&gt;</span><span class="identifier">i</span><span class="plain">) {</span>
            <span class="identifier">min</span><span class="plain"> = </span><span class="identifier">tab</span><span class="plain">--&gt;</span><span class="identifier">i</span><span class="plain">; </span><span class="identifier">i</span><span class="plain">++;</span>
            <span class="identifier">len</span><span class="plain"> = </span><span class="identifier">tab</span><span class="plain">--&gt;</span><span class="identifier">i</span><span class="plain">; </span><span class="identifier">i</span><span class="plain">++;</span>
            <span class="identifier">del</span><span class="plain"> = </span><span class="identifier">tab</span><span class="plain">--&gt;</span><span class="identifier">i</span><span class="plain">; </span><span class="identifier">i</span><span class="plain">++;</span>
            <span class="identifier">par</span><span class="plain"> = </span><span class="constant">0</span><span class="plain">;</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">len</span><span class="plain">&lt;0) { </span><span class="identifier">par</span><span class="plain"> = </span><span class="constant">1</span><span class="plain">; </span><span class="identifier">len</span><span class="plain"> = </span><span class="constant">-</span><span class="identifier">len</span><span class="plain">; }</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain"> &lt; </span><span class="identifier">min</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">c</span><span class="plain">;</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">c</span><span class="plain"> &lt; </span><span class="identifier">min</span><span class="plain">+</span><span class="identifier">len</span><span class="plain">) {</span>
                <span class="identifier">f</span><span class="plain"> = </span><span class="reserved">false</span><span class="plain">;</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">par</span><span class="plain">) { </span><span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">c</span><span class="plain">-</span><span class="identifier">min</span><span class="plain">) % </span><span class="constant">2</span><span class="plain"> == </span><span class="constant">0</span><span class="plain">) </span><span class="identifier">f</span><span class="plain"> = </span><span class="reserved">true</span><span class="plain">; }</span>
                <span class="reserved">else</span><span class="plain"> { </span><span class="identifier">f</span><span class="plain"> = </span><span class="reserved">true</span><span class="plain">; }</span>
                <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">f</span><span class="plain">) {</span>
                    <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">del</span><span class="plain"> == </span><span class="identifier">UNIC_NCT</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">c</span><span class="plain">;</span>
                    <span class="reserved">return</span><span class="plain"> </span><span class="identifier">c</span><span class="plain">+</span><span class="identifier">del</span><span class="plain">;</span>
                <span class="plain">}</span>
            <span class="plain">}</span>
        <span class="plain">}</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">c</span><span class="plain">;</span>
    <span class="plain">];</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP3"></a><b>&#167;3. Reversing Case. </b>It's convenient to provide this relatively fast routine to reverse the
case of a letter since this is an operation used frequently in regular
expression matching (see "RegExp.i6t").
</p>


<pre class="display">
    <span class="plain">#</span><span class="identifier">IFDEF</span><span class="plain"> </span><span class="identifier">TARGET_ZCODE</span><span class="plain">;</span>
    <span class="plain">[ </span><span class="identifier">TEXT_TY_RevCase</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain">&lt;</span><span class="character">'A'</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="character">'a'</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="character">'z'</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-</span><span class="character">'a'</span><span class="plain">+</span><span class="character">'A'</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="character">'A'</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="character">'Z'</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-</span><span class="character">'A'</span><span class="plain">+</span><span class="character">'a'</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain">&lt;128) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">155</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">157</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">+3; </span><span class="comment">! a, o, u umlaut in ZSCII</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">158</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">160</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-3; </span><span class="comment">! A, O, U umlaut</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">164</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">165</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">+3; </span><span class="comment">! e, i umlaut</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">167</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">168</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-3; </span><span class="comment">! E, I umlaut</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">169</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">174</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">+6; </span><span class="comment">! a, e, i, o, u, y acute</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">175</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">180</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-6; </span><span class="comment">! A, E, I, O, U, Y acute</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">181</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">185</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">+5; </span><span class="comment">! a, e, i, o, u grave</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">186</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">190</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-5; </span><span class="comment">! A, E, I, O, U grave</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">191</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">195</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">+5; </span><span class="comment">! a, e, i, o, u circumflex</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">196</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">200</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-5; </span><span class="comment">! A, E, I, O, U circumflex</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">201</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">202</span><span class="plain">; </span><span class="comment">! a circle</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">202</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">201</span><span class="plain">; </span><span class="comment">! A circle</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">203</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">204</span><span class="plain">; </span><span class="comment">! o slash</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">204</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">203</span><span class="plain">; </span><span class="comment">! O slash</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">205</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">207</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">+3; </span><span class="comment">! a, n, o tilde</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="constant">208</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="constant">210</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-3; </span><span class="comment">! A, N, O tilde</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">211</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">212</span><span class="plain">; </span><span class="comment">! ae ligature</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">212</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">211</span><span class="plain">; </span><span class="comment">! AE ligature</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">213</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">214</span><span class="plain">; </span><span class="comment">! c cedilla</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">214</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">213</span><span class="plain">; </span><span class="comment">! C cedilla</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">215</span><span class="plain"> </span><span class="reserved">or</span><span class="plain"> </span><span class="constant">216</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">+2; </span><span class="comment">! thorn, eth</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">217</span><span class="plain"> </span><span class="reserved">or</span><span class="plain"> </span><span class="constant">218</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-2; </span><span class="comment">! Thorn, Eth</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">220</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">221</span><span class="plain">; </span><span class="comment">! oe ligature</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain"> == </span><span class="constant">221</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">220</span><span class="plain">; </span><span class="comment">! OE ligature</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">;</span>
    <span class="plain">];</span>
    <span class="plain">#</span><span class="identifier">IFNOT</span><span class="plain">;</span>
    <span class="plain">[ </span><span class="identifier">TEXT_TY_RevCase</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain">&lt;</span><span class="character">'A'</span><span class="plain">) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="character">'a'</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="character">'z'</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-</span><span class="character">'a'</span><span class="plain">+</span><span class="character">'A'</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">ch</span><span class="plain"> &gt;= </span><span class="character">'A'</span><span class="plain">) &amp;&amp; (</span><span class="identifier">ch</span><span class="plain"> &lt;= </span><span class="character">'Z'</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">-</span><span class="character">'A'</span><span class="plain">+</span><span class="character">'a'</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">ch</span><span class="plain">&lt;128) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">CharIsOfCase</span><span class="plain">(</span><span class="identifier">ch</span><span class="plain">, </span><span class="constant">0</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">CharToCase</span><span class="plain">(</span><span class="identifier">ch</span><span class="plain">, </span><span class="constant">1</span><span class="plain">);</span>
        <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">CharIsOfCase</span><span class="plain">(</span><span class="identifier">ch</span><span class="plain">, </span><span class="constant">1</span><span class="plain">)) </span><span class="reserved">return</span><span class="plain"> </span><span class="identifier">CharToCase</span><span class="plain">(</span><span class="identifier">ch</span><span class="plain">, </span><span class="constant">0</span><span class="plain">);</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">ch</span><span class="plain">;</span>
    <span class="plain">];</span>
    <span class="plain">#</span><span class="identifier">ENDIF</span><span class="plain">;</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP4"></a><b>&#167;4. DigitToValue. </b>This takes a ZSCII or Unicode character code and returns its value as a digit,
or returns -1 if it isn't a digit.
</p>


<pre class="display">
    <span class="plain">[ </span><span class="identifier">DigitToValue</span><span class="plain"> </span><span class="identifier">c</span><span class="plain"> </span><span class="identifier">n</span><span class="plain">;</span>
        <span class="identifier">n</span><span class="plain"> = </span><span class="identifier">c</span><span class="plain">-</span><span class="character">'0'</span><span class="plain">;</span>
        <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">n</span><span class="plain">&lt;0) || (</span><span class="identifier">n</span><span class="plain">&gt;9)) </span><span class="reserved">return</span><span class="plain"> </span><span class="constant">-1</span><span class="plain">;</span>
        <span class="reserved">return</span><span class="plain"> </span><span class="identifier">n</span><span class="plain">;</span>
    <span class="plain">];</span>
</pre>

<p class="inwebparagraph"></p>

<p class="inwebparagraph"><a id="SP5"></a><b>&#167;5. Testing. </b>Not actually used: simply for testing the tables.
</p>


<pre class="display">
    <span class="plain">[ </span><span class="identifier">CharTestCases</span><span class="plain"> </span><span class="identifier">case</span><span class="plain"> </span><span class="identifier">i</span><span class="plain"> </span><span class="identifier">j</span><span class="plain">;</span>
        <span class="reserved">for</span><span class="plain"> (</span><span class="identifier">i</span><span class="plain">=32: </span><span class="identifier">i</span><span class="plain">&lt;</span><span class="constant">$E0</span><span class="plain">: </span><span class="identifier">i</span><span class="plain">++) {</span>
            <span class="reserved">if</span><span class="plain"> ((</span><span class="identifier">i</span><span class="plain">&gt;=127) &amp;&amp; (</span><span class="identifier">i</span><span class="plain">&lt;155)) </span><span class="reserved">continue</span><span class="plain">;</span>
            <span class="reserved">print</span><span class="plain"> </span><span class="identifier">i</span><span class="plain">, </span><span class="string">" - "</span><span class="plain">, (</span><span class="identifier">char</span><span class="plain">) </span><span class="identifier">i</span><span class="plain">, </span><span class="string">" -"</span><span class="plain">;</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">CharIsOfCase</span><span class="plain">(</span><span class="identifier">i</span><span class="plain">, </span><span class="constant">0</span><span class="plain">)) </span><span class="reserved">print</span><span class="plain"> </span><span class="string">"  lower"</span><span class="plain">;</span>
            <span class="reserved">if</span><span class="plain"> (</span><span class="identifier">CharIsOfCase</span><span class="plain">(</span><span class="identifier">i</span><span class="plain">, </span><span class="constant">1</span><span class="plain">)) </span><span class="reserved">print</span><span class="plain"> </span><span class="string">"  upper"</span><span class="plain">;</span>
            <span class="identifier">j</span><span class="plain"> = </span><span class="identifier">CharToCase</span><span class="plain">(</span><span class="identifier">i</span><span class="plain">, </span><span class="constant">0</span><span class="plain">); </span><span class="reserved">if</span><span class="plain"> (</span><span class="identifier">j</span><span class="plain"> ~= </span><span class="identifier">i</span><span class="plain">) </span><span class="reserved">print</span><span class="plain"> </span><span class="string">"  tolower: "</span><span class="plain">, (</span><span class="identifier">char</span><span class="plain">) </span><span class="identifier">j</span><span class="plain">;</span>
            <span class="identifier">j</span><span class="plain"> = </span><span class="identifier">CharToCase</span><span class="plain">(</span><span class="identifier">i</span><span class="plain">, </span><span class="constant">1</span><span class="plain">); </span><span class="reserved">if</span><span class="plain"> (</span><span class="identifier">j</span><span class="plain"> ~= </span><span class="identifier">i</span><span class="plain">) </span><span class="reserved">print</span><span class="plain"> </span><span class="string">"  toupper: "</span><span class="plain">, (</span><span class="identifier">char</span><span class="plain">) </span><span class="identifier">j</span><span class="plain">;</span>
            <span class="reserved">print</span><span class="plain"> </span><span class="string">"^"</span><span class="plain">;</span>
        <span class="plain">}</span>
    <span class="plain">];</span>
</pre>

<p class="inwebparagraph"></p>

<hr class="tocbar">
<ul class="toc"><li><a href="S-ut2.html">Back to 'UnicodeData Template'</a></li><li><a href="S-rt2.html">Continue with 'RegExp Template'</a></li></ul><hr class="tocbar">
<!--End of weave-->
		</main>
	</body>
</html>

